CHYBY:

 * Chyba pøi vyvolání tisk. sestavy

   Pøi vyvolání formuláøe pøes Enter nebo Space v BrowseFormu a následného vyvolání tiskové sestavy
   vyskoèí chybové okno.
 
 * Deadlock pøi zamykání

   Mìjme tabulku T1, kde políèko p1 má "references=C1 ON UPDATE CASCADE".  Pøi otevøení editaèního
   formuláøe nad T1 dojde k uzamèení T1.  Pokud nad tímto editaèním formuláøem otevøeme èíselník C1
   a provedeme editaci referenèního sloupce (vìt¹inou klíèového) v záznamu referovaném z uzamèeného
   øádku T1, dojde k dead-locku, proto¾e databáze nemù¾e provést "ON UPDATE CASCADE".

   Návrh øe¹ení:

   Evidovat v datovém rozhraní zamknuté sloupce tabulek odkazovaných v REFERENCES.  Pøi lock_record
   do této evidence pøidat v¹echny sloupce v odkazovaných tabulkách, které jsou z uzamykané tabulky
   odkazovány, pokud mají nastaveno ON UPDATE CASCADE (pøi unlock_record je opìt odebrat).

   Díky tomu by bylo mo¾né pøi zápisu do datového objektu zjistit, jestli není nìkterý ze sloupcù
   aktualizované tabulky v této evidenci a napø. vyvolat výjimku a pøedejít tím zatuhnutí.
   
   Dále by bylo mo¾né tuto informaci z datového objektu nìjak vytáhnout a napø. uèinit pøíslu¹né
   políèko needitovatelné.

 * Zamrznutí aplikace pøi pou¾ití tlaèítek s EVT_UPDATE_UI ve formuláøích.

   Pokud ve funkci `wx_button()' povolím navázání `EVT_UPDATE_UI' pro aktualizaci stavu tlaèítka v
   závislosti na dostupnosti pøíkazu, dojde pøi uzavøení jakéhokoliv dialogu nad otevøeným
   editaèním formuláøem (ve kterém je takové tlaèítko pou¾ito) k zatuhnutí celé aplikace (Formuláø
   pøestane reagovat, celé okno je za¹edlé).  Aby k tomu nedocházelo, je pøíslu¹ný kód nyní
   zablokován, ale bude potøeba to nìjak doøe¹it, aby tlaèítka mohla dynamicky reagovat na zmìnu
   dostupnosti pøíkazù...

 * Pøi ukládání pojmenovaného filtru upozornit, ¾e filtr se stejným jménem u¾ existuje.

 * Tiskové menu je zobrazeno pro v¹echny formuláøe ale pøíkaz PRINT je o¹etøen jen pro BrowseForm.

 * Kombinace default, computer a prefill

   Pøi pou¾ití prefillu pøi zobrazení formuláøe pro nový záznam by mìl mít computer pøednost pøed
   default, pokud jsou v prefillu políèka, na kterých computer závisí.  Jinak má pøednost default a
   computer se pou¾ije a¾ bìhem editace.
 
 * Zapamatovaná pozice oddìlovaèe dualformu.

   Momentálnì se poèíátá se stejnou velikostí okna pøi dal¹ím startu aplikace.
   Napø. pøi maximalizaci okna ale dojde k ulo¾ení pozice a pøi dal¹ím startu
   je okno aplikace jinak veliké a oddìlovaè se zobrazí mimo... 

 * Zkopírovat obsah buòky nefunguje s èe¹tinou.

   Projevuje se pouze na Windowsech pøes Cygwin.

 * Aktualizace políèka `data-changed' ve stavové øádce.

   Po vlo¾ení záznamu je zobrazeno, ¾e data nejsou ok i ve formuláøi, ze
   kterého byla zmìna provedena.

 * Zobrazování nápovìdy polo¾ek menu ve stavové øádce.

   Nepodaøilo se zatím zprovoznit v kontextovém menu vstupního políèka v re¾imu
   inline editace, v kontextovém menu vstupního políèka v ShowFormu a v
   kontextovém menu záhlaví sloupce.

 * Vyhledávání nìkdy skoèí na záznam následující za hledaným.

   Popisovaný problém se bì¾nì neprojevuje.  Napøíklad v zakázkách pøi
   vyhledávání podle kódu zakázky v¹ak bylo toto chování hlá¹eno, ale po
   restartu aplikace ne¹lo zreprodukovat.

 * Problém s notifikaèním threadem pøi startu aplikace

   Pøi volání funkce v rámci Application.Init, která pracuje nad daty v databázi
   (napø. insert_new_user nebo obecnì operace nad DBConfig), hlásí notification thread
   na pozadí chybové hlá¹ení AttributeError pro atribut connection.


NOVÉ VLASTNOSTI:

 * Optické zvýraznìní políèek Editformu pøi zmìnì hodnoty tohoto políèka

   V Editformu rozli¹it opticky políèka, u kterých u¾ivatel zmìnil hodnotu nebo hodnota byla
   zmìnìna funkcionalitou (Computerem). U¾ivatel tak bude mít pøehled, která políèka zeditoval.  

 * Omezit max. ¹íøku okna èíselníku

 * Nová polo¾ka v menu sloupce: Vrátit výchozí øazení

 * Umo¾nit definici hierarchie a skupin filtrù podobnì jako u actions.

 * Umo¾nit definici `editable' i na úrovni ViewSpec

   Editovatelnost záznamu je tøeba kontrolovat jak pøed editací ve formuláøi, tak pøed inline
   editací.  V pøípadì needitovatelnosti by nìkdy bylo vhodné mít mo¾nost zobrazit zprávu proè
   editace není pøípustná.

 * Pokud je default hodnota políèka typu CHOICE None, pøidat do výbìru None polo¾ku

 * Ve specifikaci unique datového typu pøedávat datový objekt

   To by jednak umo¾nilo provádìt validaci unique pøímo jako souèást validace datového typu (nyní
   to musí být øe¹eno a¾ na úrovni PresentedRow) a jednak by bylo mo¾né provádìt validaci oproti
   jinému datovému objektu, ne¾ do kterého vkládáme - ten toti¾ ji¾ mù¾e být vyfiltrovaný, tak¾e
   unikátnost nelze spolehlivì ovìøit.

 * Práva:

   * Rozli¹it polo¾ky menu nedostupné kvùli pøístuponým právùm.
 
   * omezení view na jednotlivé sloupce

   * správa práv pøes databázi a formuláø, nikoli pøes specifikace

   * Detailnìj¹í kontrola nad rozli¹ením práv pøi UPDATE/INSERT

     Pokud není na políèko právo UPDATE, zakázat jej i pøi INSERTU, ale umo¾nit
     nìkterá políèka explicitnì povolit (pouze pro INSERT).  Nebo také povolit
     úplnì v¹e, nehledì na práva pro UPDATE.

 * Automatické doplòování.

   Widget nabídky doplnìní momentálnì nereaguje na my¹.

   Pro velké èíselníky trvá select neúmìrnì dlouho kvùli "select count".  Pøitom pokud výsledek
   selectu obsahuje více ne¾ X (napø. 50) záznamù, nemá smysl výbìr zobrazovat.  Øe¹ením by bylo
   vyvolat select bez "select count" a provést fetch prvních maximálnì X záznamù.  Potom pokud lze
   provést i fetch záznamu X+1, je mo¾né v¹e zahodit.  To by mìlo fungovat stejnì rychle nezávisle
   na velikosti èíselníku.

   V seznamu doplnìní by pro èíselníky s displejem bylo mo¾né zobrazovat i druhý sloupec s hodnotou
   displeje.

 * Vyu¾ití vyhledávacího panelu i pro vyhledávání s podmínkou zadanou pøes formuláø.

 * Pou¾ití externího PS prohlí¾eèe.

 * Souèasný výbìr nìkolika øádkù v øádkovém formuláøi.

   Práce s výbìrem je nyní problematická, proto¾e výbìr je pou¾íván také k
   vysvícení aktuálního øádku.  Je tøeba nejprve vymyslet, jak se to má
   chovat.  Více viz news 2006-02-27.

 * Roz¹íøit øádek po dobu inline editace víceøádkového textu.
 
 * Zarovnávání, atributy a masky vstupních políèek.

 * Pøepoèítání závislých políèek pøi výbìru z ListField.

   V souèasné dobì se dìje jen pøi zmìnì hodnoty.  Chtìli bychom ale, aby k
   pøepoèítání do¹lo pøi ka¾dém dvojkliku (nebo výbìru pravým tlaèítkem).

 * Pro datumová políèka umo¾nit display ukazující odpovídající den v týdnu.

 * Zobrazení editovatelných/needitovatelných políèek v ShowFormu.

 * Zamezit výpoètu editovatelnosti políèek v ShowFormu - je to zbyteèné...

 * Zobrazení názvu aktivního filtru

   Pokud se pøi otevøení filtraèního dialogu zjistí, ¾e podmínka aktivního filtru
   odpovídá nìjakému pojmenovanému filtru, zobrazí se místo "Poslední aplikovaný filtr"
   název pojmenovaného filtru.

 * Dùslednìji promyslet klávesové zkratky.  napø.:
   - Escape a Enter ve filtraèním dialogu
   - Enter v pøihla¹ovacím dialogu
   - Enter ve formuláøích (odeslat celý formuláø)?
   - Tab v tabulce (pohybuje kurzorem, ale to dìlají i ¹ipky) -- mohl vyvolat COMMAND_OTHER_FORM
   
 * Doplnit pro pytis.extensions.dbselect parametr "limit" pro mo¾nost omezit poèet hledaných
   øádkù. Pøi kontrolách staèí èasto najít, ¾e existuje jeden hledaný øádek jako chyba a není
   získat seznam v¹ech øádkù. (Pou¾ít agregace a zjistit poèet øádkù je por tyto úèely na zápis
   kódu ponìkud nepøehledné). Mo¾ná by stálo za úvahu zavést i funkci dbexists(spec, cond,
   transaction). 


2) Specifikace

 * Dynamické urèení parametrù odkazu.

   Prozatím lze specifikaci odkazu pøedat pouze statické hodnoty.  Jak název
   odkazované specifikace, tak argument `select_row' by v¹ak bylo mo¾né urèit
   dynamicky podle obsahu aktuálního øádku pomocí funkce, která dostane
   aktuální øádek jako argument.

 * after_new_record, after_edit_record apod.

   Nyní je mo¾né pøidat kód, který se provede po vlo¾ení nového záznamu buïto
   do cleanup, nebo definovat on_new_record, a v nìm nejprve zavolat výchozí
   new_record s block_on_new_record.  Jednodu¹¹í a pøehlednìj¹í by bylo mít
   pro tento pøípad explicitní podporu.

 * Zmìny ohlednì nastavení ¹íøky sloupcù/políèek.

   `width = 0' zakázat a v¹echna taková políèka vyøadit z layoutu (nejprve
   logovat jako deprecated).
   
   `column_width = 0' nijak speciálnì neo¹etøovat (stejnì je ¹íøka minimálnì
   taková, aby se ve¹el label)

 * V tiskovém menu umo¾nit definovat separátor a klávesové zkratky.

 * Sestavování pamì»ového datového objektu ve tøídì `Specification'.

   Sestavování datových typù sloupeèkù pro nedatabázové datové objektu má
   nìkolik omezení.  Napøíklad pokud je tøeba urèit typ èíselníkového políèka
   (není to String), bude ve formuláøi dána pøednost takto explicitnì urèenému
   typu.  To znamená, ¾e specifikovaný typ ji¾ musí mít pøíslu¹ný enumerátor a
   nemù¾e být vyu¾ito mo¾nosti automatického pøiøazení enumerátoru na základì
   specifikace `codebook'.  Øe¹ením by bylo zru¹it pravidlo o pøednostním
   vyu¾ití datového typu z FieldSpec pøed typem z DataSpec.  Je ov¹em tøeba
   ovìøit, jestli se toho nìkde nevyu¾ívá.

 * Kontrola práv pøi volání funkcí jako dbupdatemany apod.
   

INTERNÍ ZÁLE®ITOSTI:

 * Neprovádìt reinicializaci v¹ech sloupcù pøi vstupu do inline editace buòky.

   Je tøeba aby editory v¾dy byly vytvoøeny pro aktuální editovaný øádek.  Provádìt kvùli tomu
   reinicializaci v¹ech sloupcù je zbyteèné, ale prozatím to tak alespoò funguje.  Do budoucna by
   bylo vhodné editory inicializovat pøi vstupu do inline editace a po jejím ukonèení je zru¹it.

 * Nepou¾ívat mx.DateTime, ale Pythonový modul datetime.

 * Mezivrstva pro práci s aktuálním selectem, kurzory apod.

   Je tøeba oddìlit ve¹kerý kód týkající se práce s aktuálním selectem,
   získáváním dat podle èísla øádkù (práce s kurzorem) a cachování øádkù, který
   je nyní pøedev¹ím v ListTable, do speciální tøídy (nadstavba datového
   rozhraní -- asi v modulu `presentation').  Podobné vìci se dìlají i v
   netabulkových formuláøích a je tøeba je mít na jednom místì, nezávisle na
   formuláøových tøídách.

 * Pøepracování stavového øádku.

   Pole definovaná aplikací (message, list-position, ...) by mìla být pøítomna
   automaticky.  Mìlo by být mo¾né zobrazit ikonu a tooltip.  Mìlo by být mo¾né
   definovat políèko sledující stav konfiguraèní volby (nebo i jiné hodnoty?).
   Je tøeba myslet také na obnovení stavu pøi pøepínání formuláøù
   (`Form.restore()').


ÈI©TÌNÍ:

 * Odstraní argumentu `key' funkcí `on_new_record()'.

   Tento argument je tam patrnì z historických dùvodù, kdy se tak øe¹ilo
   kopírování záznamu.  To je dnes provádìno pøes `prefill', tak¾e funkce
   `on_new_record()' arument `key' nikdy nedostane.  V nìkterých defsech se s
   ním v¹ak stále poèítá.

 * Specifikace okrajù a mezer ve formuláøích.

   Argument `border_style' ne pravdìpodobnì zcela nepou¾ívaný.  `gap', `space' a `border' by bylo
   lépe definovat pro celý layout globálnì, ne¾ zvlá¹» pro ka¾dou `GroupSpec'.

 * Nedostupnost pøíkazu vs. pøístupová práva.

   Pokud není pøíkaz dostupný z dùvodu nedostateèných pøístupových práv,
   bylo by dobré o tom u¾ivatele nìjak informovat.  Bude to v¹ak tøeba nejprve
   nìjak rozli¹it -- buïto pomocí návratové hodnoty funkce enabled, nebo je¹tì
   dal¹í funkcí pro zji¹tìní pøístupových práv.
   
 * Validace hodnot konfiguraèních voleb.

   Pro ka¾dou konfiguraèní volbu je nyní znám její datový typ, tak¾e by nebyl
   problém do metody `Option.set_value()' pøidat kontrolu, zda pøedaná hodnota
   skuteènì odpovídá deklarovanému typu volby.
  
 * S groupingem pracovat jako s celým èíslem.

   Problém bude hlavnì v defsech, kde bývá grouping èasto specifikován jako
   název sloupce.
   
 * Implementovat také None context pro spou¹tìní akcí.

   Specifikace kontextu akce nyní umo¾òuje také hodnotu None, která by mìla
   zaruèit, ¾e akci nejsou pøedány ¾ádné argumenty.  Toho je v¹ak zatím
   vyu¾íváno jen ve webových formuláøích.  Bylo by dobré to samé
   doimplementovat i do GUI formuláøù.


wx-2.8:

 * Po zmìnì ve filtraèním formuláøi se "zboøí" layout celého formuláøe.

 * Tracebackový dialog má chybný layout: Tlaèítka jsou uvnitø tracebackového
   okna.
