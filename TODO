CHYBY:

 * Závislosti runtime_filterù (a asi i editability) nefungují tranzitivnì.

   Tj. napø. kdy¾ je filter závislý na dopoèítávaném políèku, které je zmìnìno
   na základì zmìny jiného políèka, není filter pøepoèítán.  Lze to obejít
   uvedením závislosti na v¹ech políèkách, na kterých je závislé ono
   dopoèítávané políèko (a také se tak v defsech dìje), ale není to
   systematické (problémy s údr¾bou).

 * Aktualizace políèka `data-changed' ve stavové øádce.

   Po vlo¾ení záznamu je zobrazeno, ¾e data nejsou ok i ve formuláøi, ze
   kterého byla zmìna provedena.

 * Chyba v ukládání nastavení sloupeèkù.

   V databázi ISASu jsem se vy¹krtl ze skupiny isas_admin.  Pøes nabídku
   "Spustit formuláø" jsem si spustil defs ZakazkaSet:NAAN a skryl jsem si
   první dva sloupeèky.  Vyskoèil jsem z ISASu a pøidal se do skupiny
   isas_admin.  Spustil jsem si ISAS, napsal heslo a ke konci ke¹ování defsù to
   spadlo.  Pomáhá jedinì update bv_users_cfg set saved_config = NULL;

 * Zobrazování nápovìdy polo¾ek menu ve stavové øádce.

   Nepodaøilo se zatím zprovoznit v kontextovém menu vstupního políèka v re¾imu
   inline editace, v kontextovém menu vstupního políèka v ShowFormu a v
   kontextovém menu záhlaví sloupce.

 * Posun po zamítnutí mazání øádku.

   Po odpovìdi "Ne" na otázku na smazání záznamu je posunut aktivní záznam na
   dal¹í øádek.  Dìje se to ale jen nìkdy a teï nevíme kdy.

 * Vyhledávání nìkdy skoèí na záznam následující za hledaným.

   Popisovaný problém se bì¾nì neprojevuje.  Napøíklad v zakázkách pøi
   vyhledávání podle kódu zakázky v¹ak bylo toto chování hlá¹eno, ale po
   restartu aplikace ne¹lo zreprodukovat.

 * Zkopírovat obsah buòky nefunguje s èe¹tinou.


NOVÉ VLASTNOSTI:

1) U¾ivatelské rozhraní

 * Souèasný výbìr nìkolika øádkù v øádkovém formuláøi.

   Práce s výbìrem je nyní problematická, proto¾e výbìr je pou¾íván také k
   vysvícení aktuálního øádku.  Je tøeba nejprve vymyslet, jak se to má
   chovat.  Více viz news 2006-02-27.

 * Ulo¾ené filtrovací podmínky.

   K tomu bude nejprve tøeba nìjak zpøehlednit v¹e, co se týká práce s rùznými
   typy filtrovacích podmínek uplatnìných v rùzných formuláøích.

   Filtrovací podmínka by mìla být definovatelná jednak ve specifikaci a jednak
   by mìla jít ulo¾it u¾ivatelem definovaná (naklikaná) podmínka.

 * Zobrazení editovatelných/needitovatelných políèek v ShowFormu.
 
 * Roz¹íøit øádek po dobu inline editace víceøádkového textu.
 
 * Detailnìj¹í kontrola nad rozli¹ením práv pøi UPDATE/INSERT

   Pokud není na políèko právo UPDATE, zakázat jej i pøi INSERTU, ale umo¾nit
   nìkterá políèka explicitnì povolit (pouze pro INSERT).  Nebo také povolit
   úplnì v¹e, nehledì na práva pro UPDATE.

 * Automatický filter èíselníku pøi vyplnìní wildcard hodnoty.

   Pokud je vyplnìna hodnota obsahující hvìzdièku, automaticky zapnout filtr
   pøi vyvolání èíselníku.

 * Filtr distinct hodnot (v kontextovém menu záhlaví sloupce).

 * Filtrovat aktuální hodnoty (v kontextovém menu buòky).

 * Pou¾ití externího PS prohlí¾eèe.

 * Správa pøístupových práv pøes databázi a formuláø, nikoli pøes specifikace.

 * Menu na pravé tlaèítko ve vstupních políèkách versus gtk menu.

 * Zarovnávání a atributy v InputFieldu.

 * Masky políèek.

 * Pøepoèítání závislých políèek pøi výbìru z ListField.

   V souèasné dobì se dìje jen pøi zmìnì hodnoty.  Chtìli bychom ale, aby k
   pøepoèítání do¹lo pøi ka¾dém dvojkliku (nebo výbìru pravým tlaèítkem).

 * Pro datumová políèka umo¾nit display ukazující odpovídající den v týdnu.


2) Specifikace

 * Mo¾nost definovat seznam odskokù.

   Odskok se vá¾e v¾dy k jednomu FieldSpec, ale dostupný by potom mìl být pro
   celý øádek.  Parametrem je názav specifikace (nebo funkce row, která vrátí
   název specifikace).  Druhým parametrem by mìl být select_row, jako funkce
   row, která vrátí hodnotu pro argument select_row otevøeného formuláøe.  Dále
   by mìlo být mo¾né zvolit v jakém typu formuláøe bude øádek otevøen, ale
   mo¾ná by mìl mít u¾ivatel sám mo¾nost v¾dy urèit, jakým zpùsobem chce
   odkazovaný záznam vidìt.  Vìt¹inou jde o BrowseForm (nebo BrowseDualForm),
   ShowForm, nebo vytvoøení nového záznamu s prefillem.

 * Zmìny týkající se standardních konfiguraèních voleb.

   V defsech v¹ech projektù:
    - zru¹it celý defs NastaveniUIUser.
    - v NastaveniUser pøidat sloupeèek `saved_config'.
    - v application.py pøidat podporu pro ukládání konfigurace do saved_config.
   
   V databázi v¹ech projektù:
    - zru¹it sloupeèky `export_directory' a `export_encoding'
    - zru¹it v¹e, co se týká bv_users_ui_cfg.
    - pøidat sloupeèek `saved_config' do bv_users_cfg.
   
 * Zmìny ohlednì u¾ivatelského pøizpùsobení sloupcù BrowseFromu.

   `width = 0' zakázat a v¹echna taková políèka vyøadit z layoutu (nejprve
   logovat jako deprecated).
   
   `column_width = 0' nijak speciálnì neo¹etøovat (stejnì je ¹íøka minimálnì
   taková, aby se ve¹el label)

   Nový atribut `disabled' zcela zemezí takový sloupec zobrazit.

   `columns' zùstává, jen je tøeba jej sestavovat nìjak algoritmicky, aby to
   bylo pro danou situaci pokud mo¾no pøehledné a snadno udr¾ovatelné...

 * Zjednodu¹ená definice pøíkazù a jejich argumentù.

   Pokud instanci pøíkazu zavoláme s libovolnými klíèovými argumenty, je nyní
   vrácena dvojice (COMMAND, ARGS).  Toho je nyní vyu¾ito jednak pøi
   rozbalování FORM_COMMAND_MENU a DEFAULT_KEYMAP v application.py a jednak
   konstruktoru MItem, který by argument `command' v pøípadì pøedání dvojice
   rozbalí.  Bylo by dobré oddìlené pøedávání `args' úplnì zakázat a v¹ude
   pøejít na nový zpùsob definice.
   
 * V tiskovém menu umo¾nit definovat separátor a klávesové zkratky.

 * Práva view na jednotlivé sloupce.

 * Formuláøový dialog.

 * Kontrola práv pøi volání funkcí jako dbupdatemany apod.

 * Zru¹it 'allow_codebook_insert'???

   Vlo¾ení nové hodnoty do èíselníku by mohlo být provádìno pøes pøíkaz z popup
   menu èíselníkového políèka (pøes pravé tlaèítko my¹i).  To by mohlo být
   povoleno pro v¹echny èíselníky a tlaèítko "+" ve formuláøi by tak bylo
   zbyteèné.  Problém je, ¾e popup menu je nìkdy pøebito popup menu GTK...
   

INTERNÍ ZÁLE®ITOSTI:

 * Zamykání a závislost na OID

   Momentálnì musí být v¹echny tabulky vytváøeny s OID, které je pytisem
   vyu¾íváno k zamykání øádkù.  V Postgresu je v¹ak od verze 8.1 zamykání øádku
   vyøe¹eno, tak¾e mù¾eme závislost na pøítomnosti OID zru¹it a vyu¾ít pøímo
   Postgresového mechanismu zamykání.
   
 * Mezivrstva pro práci s aktuálním selectem, kurzory apod.

   Je tøeba oddìlit ve¹kerý kód týkající se práce s aktuálním selectem,
   získáváním dat podle èísla øádkù (práce s kurzorem) a cachování øádkù, který
   je nyní pøedev¹ím v ListTable, do speciální tøídy (nadstavba datového
   rozhraní -- asi v modulu `presentation').  Podobné vìci se dìlají i v
   netabulkových formuláøích a je tøeba je mít na jednom místì, nezávisle na
   formuláøových tøídách.

 * Instance Value na rozhraní InputField.

   InputField.get_value(), InputField.set_value() nech» pracují s instancemi
   Value, ne se stringy.  Také by bylo vhodné, kdyby políèko mìlo pøístup pøímo
   k PresentedRow.
   
 * Pøepracování stavového øádku.

   Pole definovaná aplikací (message, list-position, ...) by mìla být pøítomna
   automaticky.  Mìlo by být mo¾né zobrazit ikonu a tooltip.  Mìlo by být mo¾né
   definovat políèko sledující stav konfiguraèní volby (nebo i jiné hodnoty?).
   Je tøeba myslet také na obnovení stavu pøi pøepínání formuláøù
   (`Form.restore()').

 * Nepou¾ívat mx.DateTime, ale Pythonový modul datetime.

 * Vyjasnìní práce s arguemntem prefill.

   Argument prefill je nyní pou¾íván k nìkolika pomìrnì rozlièným úèelùm
   (napø. pøednastavení hodnoty vazebního sloupce, pøedvyplnìní dat
   kopírovaného øádku, apod.).  Bylo by vhodné se zamyslet nad tím, zda
   jednotlivé zpùsoby pou¾ití vzájemnì nekolidují.  Problém by mohl být zejména
   v tom, ¾e prefill není pou¾it jen k pøednastavení výchozích hodnot nového
   øádku, ale je formuláøem také zapamatován a pøedáván dále.

   
   
ÈI©TÌNÍ:

 * Nedostupnost pøíkazu vs. pøístupová práva.

   Pokud není pøíkaz dostupný z dùvodu nedostateèných pøístupových práv,
   bylo by dobré o tom u¾ivatele nìjak informovat.  Bude to v¹ak tøeba nejprve
   nìjak rozli¹it -- buïto pomocí návratové hodnoty funkce enabled, nebo je¹tì
   dal¹í funkcí pro zji¹tìní pøístupových práv.
   
 * Zpracování pøíkazù.

   Vyvolání handleru z on_command je nyní mo¾né nahradit metodu `_cmd_*', kde *
   je název pøíkazu.

 * Validace hodnot konfiguraèních voleb.

   Pro ka¾dou konfiguraèní volbu je nyní znám její datový typ, tak¾e by nebyl
   problém do metody `Option.set_value()' pøidat kontrolu, zda pøedaná hodnota
   skuteènì odpovídá deklarovanému typu volby.

 * Form._original_key by nemìlo být.  _current_key by mìl vracet pùvodní klíè.

 * Vyhodit side_columns a side_title z DualSpec.

   Udr¾ování identifikátorù sloupcù pro 'side_columns' v defsu pro DualSpec je
   velice nevhodné.  Èasto to vede k nekonzistenci a k následným chybám.
   Namísto uvádìní sloupcù zde je lep¹í vytvoøit zvlá¹tní variantu.  Tím jsou
   seznamy sloupcù pro rùzná pou¾ití formuláøe v¾dy pohromadì.  To samé platí
   pro argumenty 'title' a 'side_title'.  Nebylo by v¹ak od vìci definovat
   titulek DualFormu jako celku a to dokonce jako povinný.  Ten by bylo mo¾né
   pou¾ívat napøíklad v helpech, v titulcích polo¾ek menu, apod.
   
 * S groupingem pracovat jako s celým èíslem.

   Problém bude hlavnì v defsech, kde bývá grouping èasto specifikován jako
   název sloupce.
   
 * Zru¹it pøenastavování argumentù v metodì `Application.run_form'.

   Jde o o¹etøení zpìtné kompatibility pøi pou¾ití starých argumentù 'key' a
   'new'.  Ty je tøeba nejprve ve v¹ech projektech pøestat pou¾ívat.

 * Zru¹it speciální o¹etøování políèek s nulovou ¹íøkou.

   Momentálnì jsou políèka s nulovou ¹íøkou pøítomná v layoutu logována a
   ignorována.  Správnì by nemìla být nulová ¹íøka nijak speciálnì o¹etøována,
   ale bude tøeba mít mo¾nost urèit, ¾e nìkteré políèko nemá být zaøazeno do
   automaticky vytváøeného layoutu.  To v¹ak nic nemìní na tom, ¾e v explicitnì
   definovaných layoutech nemají neviditelná políèka co dìlat a je tøeba je
   odtamtud vyhodit.

   