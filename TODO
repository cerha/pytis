CHYBY:

 * Zkopírovat obsah buòky nefunguje s èe¹tinou.

   Projevuje se pouze na Windowsech pøes Cygwin.

 * Aktualizace políèka `data-changed' ve stavové øádce.

   Po vlo¾ení záznamu je zobrazeno, ¾e data nejsou ok i ve formuláøi, ze
   kterého byla zmìna provedena.

 * Chyba v ukládání nastavení sloupeèkù.

   V databázi ISASu jsem se vy¹krtl ze skupiny isas_admin.  Pøes nabídku
   "Spustit formuláø" jsem si spustil defs ZakazkaSet:NAAN a skryl jsem si
   první dva sloupeèky.  Vyskoèil jsem z ISASu a pøidal se do skupiny
   isas_admin.  Spustil jsem si ISAS, napsal heslo a ke konci ke¹ování defsù to
   spadlo.  Pomáhá jedinì update bv_users_cfg set saved_config = NULL;

 * Zobrazování nápovìdy polo¾ek menu ve stavové øádce.

   Nepodaøilo se zatím zprovoznit v kontextovém menu vstupního políèka v re¾imu
   inline editace, v kontextovém menu vstupního políèka v ShowFormu a v
   kontextovém menu záhlaví sloupce.

 * Vyhledávání nìkdy skoèí na záznam následující za hledaným.

   Popisovaný problém se bì¾nì neprojevuje.  Napøíklad v zakázkách pøi
   vyhledávání podle kódu zakázky v¹ak bylo toto chování hlá¹eno, ale po
   restartu aplikace ne¹lo zreprodukovat.


NOVÉ VLASTNOSTI:


 * Práce s Binary Large Objekty.

 * Pou¾ití externího PS prohlí¾eèe.

 * Správa pøístupových práv pøes databázi a formuláø, nikoli pøes specifikace.

 * Detailnìj¹í kontrola nad rozli¹ením práv pøi UPDATE/INSERT

   Pokud není na políèko právo UPDATE, zakázat jej i pøi INSERTU, ale umo¾nit
   nìkterá políèka explicitnì povolit (pouze pro INSERT).  Nebo také povolit
   úplnì v¹e, nehledì na práva pro UPDATE.

 * Práva view na jednotlivé sloupce.

 * Argument 'enabled' pro odkazy.

 * Ikony k pøíkazùm podle argumentù pøíkazu.

 * Zobecnìní a pøesun èástí wikinga do pytisu.

 * Souèasný výbìr nìkolika øádkù v øádkovém formuláøi.

   Práce s výbìrem je nyní problematická, proto¾e výbìr je pou¾íván také k
   vysvícení aktuálního øádku.  Je tøeba nejprve vymyslet, jak se to má
   chovat.  Více viz news 2006-02-27.

 * Ulo¾ené filtrovací podmínky.

   K tomu bude nejprve tøeba nìjak zpøehlednit v¹e, co se týká práce s rùznými
   typy filtrovacích podmínek uplatnìných v rùzných formuláøích.

   Filtrovací podmínka by mìla být definovatelná jednak ve specifikaci a jednak
   by mìla jít ulo¾it u¾ivatelem definovaná (naklikaná) podmínka.

 * Roz¹íøit øádek po dobu inline editace víceøádkového textu.
 
 * Automatický filter èíselníku pøi vyplnìní wildcard hodnoty.

   Pokud je vyplnìna hodnota obsahující hvìzdièku, automaticky zapnout filtr
   pøi vyvolání èíselníku.

 * Filtr distinct hodnot (v kontextovém menu záhlaví sloupce).

 * Automatické èíslování polo¾ek menu s mo¾ností rychlého výbìru.

   Polo¾ky ve v¹ech menu by mohly být automaticky oèíslovány podobnì jako v
   menu oken.  Nebylo by tak tøeba vymý¹let klávesové zkratky.  Tato vlastnost
   by v¹ak mìla být konfigurovatelná, proto¾e asi ne ka¾dému se to bude líbit.

 * Zarovnávání a atributy v InputFieldu.

 * Masky políèek.

 * Pøepoèítání závislých políèek pøi výbìru z ListField.

   V souèasné dobì se dìje jen pøi zmìnì hodnoty.  Chtìli bychom ale, aby k
   pøepoèítání do¹lo pøi ka¾dém dvojkliku (nebo výbìru pravým tlaèítkem).

 * Pro datumová políèka umo¾nit display ukazující odpovídající den v týdnu.

 * Zobrazení editovatelných/needitovatelných políèek v ShowFormu.


2) Specifikace

 * Dynamické urèení parametrù odkazu.

   Prozatím lze specifikaci odkazu pøedat pouze statické hodnoty.  Jak název
   odkazované specifikace, tak argument `select_row' by v¹ak bylo mo¾né urèit
   dynamicky podle obsahu aktuálního øádku pomocí funkce, která dostane
   aktuální øádek jako argument.

 * after_new_record, after_edit_record apod.

   Nyní je mo¾né pøidat kód, který se provede po vlo¾ení nového záznamu buïto
   do cleanup, nebo definovat on_new_record, a v nìm nejprve zavolat výchozí
   new_record s block_on_new_record.  Jednodu¹¹í a pøehlednìj¹í by bylo mít
   pro tento pøípad explicitní podporu.

 * Zmìny ohlednì u¾ivatelského pøizpùsobení sloupcù BrowseFromu.

   `width = 0' zakázat a v¹echna taková políèka vyøadit z layoutu (nejprve
   logovat jako deprecated).
   
   `column_width = 0' nijak speciálnì neo¹etøovat (stejnì je ¹íøka minimálnì
   taková, aby se ve¹el label)

   Nový atribut `disabled' zcela zemezí takový sloupec zobrazit.

   `columns' zùstává, jen je tøeba jej sestavovat nìjak algoritmicky, aby to
   bylo pro danou situaci pokud mo¾no pøehledné a snadno udr¾ovatelné...

 * Zmìny týkající se standardních konfiguraèních voleb.

   V defsech v¹ech projektù:
    - zru¹it celý defs NastaveniUIUser.
    - v NastaveniUser pøidat sloupeèek `saved_config'.
    - v application.py pøidat podporu pro ukládání konfigurace do saved_config.
   
   V databázi v¹ech projektù:
    - zru¹it sloupeèky `export_directory' a `export_encoding'
    - zru¹it v¹e, co se týká bv_users_ui_cfg.
    - pøidat sloupeèek `saved_config' do bv_users_cfg.
   
 * V tiskovém menu umo¾nit definovat separátor a klávesové zkratky.

 * Formuláøový dialog.

 * Kontrola práv pøi volání funkcí jako dbupdatemany apod.
   

INTERNÍ ZÁLE®ITOSTI:

 * Zamykání a závislost na OID

   Momentálnì musí být v¹echny tabulky vytváøeny s OID, které je pytisem
   vyu¾íváno k zamykání øádkù.  V Postgresu je v¹ak od verze 8.1 zamykání øádku
   vyøe¹eno, tak¾e mù¾eme závislost na pøítomnosti OID zru¹it a vyu¾ít pøímo
   Postgresového mechanismu zamykání.

 * Mezivrstva pro práci s aktuálním selectem, kurzory apod.

   Je tøeba oddìlit ve¹kerý kód týkající se práce s aktuálním selectem,
   získáváním dat podle èísla øádkù (práce s kurzorem) a cachování øádkù, který
   je nyní pøedev¹ím v ListTable, do speciální tøídy (nadstavba datového
   rozhraní -- asi v modulu `presentation').  Podobné vìci se dìlají i v
   netabulkových formuláøích a je tøeba je mít na jednom místì, nezávisle na
   formuláøových tøídách.

 * Pøepracování stavového øádku.

   Pole definovaná aplikací (message, list-position, ...) by mìla být pøítomna
   automaticky.  Mìlo by být mo¾né zobrazit ikonu a tooltip.  Mìlo by být mo¾né
   definovat políèko sledující stav konfiguraèní volby (nebo i jiné hodnoty?).
   Je tøeba myslet také na obnovení stavu pøi pøepínání formuláøù
   (`Form.restore()').

 * Instance Value na rozhraní InputField.

   InputField.get_value(), InputField.set_value() nech» pracují s instancemi
   Value, ne se stringy.  Také by bylo vhodné, kdyby políèko mìlo pøístup pøímo
   k PresentedRow.
   
 * Nepou¾ívat mx.DateTime, ale Pythonový modul datetime.

 * Vyjasnìní práce s arguemntem prefill.

   Argument prefill je nyní pou¾íván k nìkolika pomìrnì rozlièným úèelùm
   (napø. pøednastavení hodnoty vazebního sloupce, pøedvyplnìní dat
   kopírovaného øádku, apod.).  Bylo by vhodné se zamyslet nad tím, zda
   jednotlivé zpùsoby pou¾ití vzájemnì nekolidují.  Problém by mohl být zejména
   v tom, ¾e prefill není pou¾it jen k pøednastavení výchozích hodnot nového
   øádku, ale je formuláøem také zapamatován a pøedáván dále.

   
   
ÈI©TÌNÍ:

 * Odstraní BrowseDualForm._new_record_hook()
   
 * Pøechod z DualSpec na BindingSpec.

   Více viz NEWS 2006-06-13.

   V kódu je zatím v¹e o¹etøováno nadvakrát.  A¾ to nebude potøeba, je tøeba
   proèistit:
   
   - DualForm._create_view_spec()
   - Application._can_run_form()
   - generování nápovìdy
   - cachování a kontrolu defsù

 * Nedostupnost pøíkazu vs. pøístupová práva.

   Pokud není pøíkaz dostupný z dùvodu nedostateèných pøístupových práv,
   bylo by dobré o tom u¾ivatele nìjak informovat.  Bude to v¹ak tøeba nejprve
   nìjak rozli¹it -- buïto pomocí návratové hodnoty funkce enabled, nebo je¹tì
   dal¹í funkcí pro zji¹tìní pøístupových práv.
   
 * Zpracování pøíkazù.

   Vyvolání handleru z on_command je nyní mo¾né nahradit metodu `_cmd_*', kde *
   je název pøíkazu.  To u¾ skoro v¹ude je, ale na nìkolika místech je¹tì
   `on_command' zbylo...

 * Validace hodnot konfiguraèních voleb.

   Pro ka¾dou konfiguraèní volbu je nyní znám její datový typ, tak¾e by nebyl
   problém do metody `Option.set_value()' pøidat kontrolu, zda pøedaná hodnota
   skuteènì odpovídá deklarovanému typu volby.
  
 * S groupingem pracovat jako s celým èíslem.

   Problém bude hlavnì v defsech, kde bývá grouping èasto specifikován jako
   název sloupce.
   
 * Zru¹it pøenastavování argumentù v metodì `Application.run_form'.

   Jde o o¹etøení zpìtné kompatibility pøi pou¾ití starých argumentù 'key' a
   'new'.  Ty je tøeba nejprve ve v¹ech projektech pøestat pou¾ívat.

 * Zru¹it speciální o¹etøování políèek s nulovou ¹íøkou.

   V layoutu v¹ech aplikací se ji¾ nevyskytují políèka s nulovou ¹íøkou a
   jejich speciální o¹etøování pøi sestavování formuláøe je ji¾ mo¾né zru¹it.

   Do budoucna by v¹ak mohlo být praktické mít mo¾nost nìkterá políèka vynechat
   z automaticky vytváøeného layoutu.

 * Odstranit argument `resolver' z konstruktoru formuláøù.

   V¹ude je mo¾no pou¾ívat globální resolver získaný pomocí funkce
   `resolver()', tak¾e není dùvod se o nìj starat ve formuláøích.  Trochu
   slo¾itìj¹í to ov¹em asi bude s PrintResolvery (?).

 * Implementovat také None context pro spou¹tìní akcí.

   Specifikace kontextu akce nyní umo¾òuje také hodnotu None, která by mìla
   zaruèit, ¾e akci nejsou pøedány ¾ádné argumenty.  Toho je v¹ak zatím
   vyu¾íváno jen ve webových formuláøích.  Bylo by dobré to samé
   doimplementovat i do GUI formuláøù.
