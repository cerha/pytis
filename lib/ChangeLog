2005-05-30  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/application.py
	(Application._WINDOW_MENU_TITLE): Pou¾ij `&' pro klávesovou
	zkratku.
	(Application.OnInit): Vynech v menu oken pøíkazy pro manipulaci s
	okny.
	(Application._window_menu): Zru¹eno.
	(Application._update_window_menu): Nepou¾ívej
	`self._window_menu()'.  Pøidávej do titulku èíslo formuláøe,
	fungující také jako klávesová zkratka.  Popis formuláøe uvádìj
	pouze pokud nejde o BrowseForm.

	* pytis/form/dualform.py (DualForm._DESCR,
	DescriptiveDualForm._DESCR): Nové konstanty.

	* pytis/form/form.py (Form._menus, EditForm._menus): Pøidány pøíkazy pro
	manipulaci s okny.
	(Form.descr): Pokud `self._DESCR' není None, vracej jeho hodnotu.
	(EditForm._validate): Neprovádìj kontrolu datového typu hodnot v
	row zde.
	(ShowForm): Nová konstanta.

2005-05-30  Tomas Cerha  <cerha@brailcom.orWg>

	* pytis/form/dualform.py (DualForm._DESCR) 
	(DescriptiveDualForm._DESCR): Nové konstanty.

	* pytis/form/list.py (_post_selection_hook): O¹etøuj
	`DataAccessException' pøi zji¹»ování hodnoty displeje.

2005-05-26  Tomas Cerha  <cerha@brailcom.org>

	* pytis/presentation/spec.py (FieldSpec.__init__): Nové argumenty
	`allow_codebook_insert', `codebook_insert_spec'.
	(FieldSpec.allow_codebook_insert) 
	(FieldSpec.allow_codebook_insert): Nové metody.

	* pytis/form/inputfield.py (InputField._validation_error_handler):
	Zru¹eno.
	(InputField.validate): Zapomeò na `_validation_error_handler'.
	(TextField._create_ctrl): Vý¹ka políèka lehce zvìt¹ena.  Volej
	také `self.SetSize()'.
	(Invocable._create_widget): Nastavuj tlaèítku tooltip.
	(Invocable._create_widget): Mezeru v sizeru vytváøej zleva.
	Nastavuj `wx.FIXED_MINSIZE' pøi vkládání do sizeru.
	(Invocable._create_button): Namísto `SetSize()' pou¾ij
	`SetMinSize()'.
	(CodebookField._create_widget): Pokud bylo ve specifikaci povoleno
	`allow_codebook_insert', vytvoø také pøidávací tlaèítko.  Nastavuj
	`wx.FIXED_MINSIZE' pøi vkládání do sizeru.
	(CodebookField._validation_error_handler): Zru¹eno.
	(CodebookField._on_codebook_insert): Nová metoda.
	(CodebookField._create_widget): Nech» je tlaèítko pro pøidávání
	záznamù pøeskakováno pøi prùchodu formuláøem.

	* pytis/form/list.py (_post_selection_hook): Pokud nejsi
	zaostøeným oknem, nic neprovádìj.

2005-05-25  Tomas Cerha  <cerha@brailcom.org>

	* pytis/presentation/field.py (PresentedRow._Column.__init__):
	Zru¹en argument separator.
	(PresentedRow._process_fieldspec): Nepøedávej `separator'.
	(PresentedRow.__setitem__): Pøidán zatím zakomentovaný assert na
	typ nastavované hodnoty.

	* pytis/presentation/spec.py (ViewSpec.__init__): Kosmetická úprava.
	(FieldSpec.__init__): Zru¹en argument `separator'.
	(FieldSpec.separator): Metoda zru¹ena.
	(CodeBookSpec): Tøída zru¹ena.
	(FieldSpec.__init__): Povol pouze øetìzec jako argument `codebook'.

	* pytis/form/inputfield.py (InputField.create): Enumerátor zkoumej
	jak pro typ `String', tak `Number'.
	(CodebookField._maxlen): Pokud dojde k `AttributeError', vracej None.
	(CodebookField._create_widget): Zru¹eny hacky kvùli kompatibilitì
	se starou definicí `codebook'.
	(CodebookField._on_invoke_selection)
	(CodebookField._validation_error_handler): Respektuj to.

	* pytis/form/list.py (ListForm._ListTable.GetColLabelValue):
	Zru¹eno.
	(ListForm._on_column_header_paint.triangle): Nová metoda.
	(_InputFieldCellEditor.BeginEdit): Nezkou¹ej
	`control.SetInsertionPoint()'
	(ListForm._create_grid): Nastav callback `wx.EVT_PAINT' na
	`self._on_column_header_paint()'.
	(ListForm._ListTable.column_id): Nová metoda.
	(ListForm._ListTable.column_label): Nová metoda.
	(ListForm._SELECTION_CALLBACK_DALAY): Pøejmenováno na
	`_SELECTION_CALLBACK_DELAY'.
	(ListForm._select_cell): `_SELECTION_CALLBACK_DALAY' ->
	`_SELECTION_CALLBACK_DELAY'
	(ListForm._post_selection_hook): Nová metoda.
	(ListForm._on_idle): Volej ji.

2005-05-24  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/command.py (DEFAULT_COMMAND_KEYS): Pøehozeny klávesy
	pøíkazù `Application.COMMAND_NEXT_FORM' a
	`Application.COMMAND_PREV_FORM'.

	* pytis/form/application.py (Application.OnInit): Pøehozeno poøadí
	pøíkazù v menu oken.
	(Application._add_window_menu_item)
	(Application._remove_window_menu_item)
	(Application._check_window_menu_item): Metody zru¹eny.
	(Application._update_window_menu): Nová metoda.
	(Application.run_form): Namísto `self._add_window_menu_item()'
	pou¾ívej `self._update_window_menu()'.
	(Application.leave_form): Namísto `self._remove_window_menu_item()'
	pou¾ívej `self._update_window_menu()'.
	(Application.restore): Namísto `self._check_window_menu_item()'
	pou¾ívej `self._update_window_menu()'.
	(Application.on_ui_event): Opravena podmínka pro `UI_OPENED_WINDOW'.

	* pytis/output/resolver.py (OutputResolver.output_parameter):
	Pøebírej klíèové argumenty a pøedávej je metodì `get()'.

	* pytis/form/inputfield.py (CodebookField._on_invoke_selection):
	Hodnotu argumentu `select_row' pøedávej jako tuple.

	* pytis/data/_test.py (Module): Nastav implicitní kódování na
	'iso-8859-2' voláním `sys.setdefaultencoding()'.
	(Color): Nový test.
	(Enumeration): Zru¹eno.
	(Enumerator): Pøejmenováno na `DataEnumerator'.
	(DataEnumerator.test_get): Nový test.
	(FixedEnumerator): Nový test.
	(Sequence): Zru¹eno.
	(Date.test_validation): Netestuj dvouciferný rok jako validní hodnotu.
	(Boolean.test_values): Zru¹eno.

	* pytis/data/types_.py (Type.__cmp__): Porovnávej
	`self._enumerator', nikoliv `self._enumeration'.
	(Color._VALIDATION_REGEX): Oprava.

	* pytis/util/util.py (direct_public_members): Testuj tøídu pomocí
	`isinstance()' Pou¾ívej "list comprehension" namísto `map()' a
	`filter()'.
	(XStack.__init__): Vyu¾ívej `super()' k volání pøedka.
	(XStack.push): Pøidávej prvek za právì aktivní prvek, ne na konec.
	(XStack.pop): Vyu¾ívej `super()' k volání pøedka.
	(XStack.remove): Aktivuj následující, resp. pøedchozí prvek, ne
	vrcholový prvek.

	* pytis/util/test.py (prefix_test): Pou¾ívej "list comprehension"
	namísto `map()' a `filter()'.

	* pytis/presentation/spec.py (CodebookSpec.__init__): Oprava chyby.

2005-05-23  Tomas Cerha  <cerha@brailcom.org>

	* pytis/presentation/spec.py (CodebookSpec): Nová tøída.
	(CodeBookSpec): Buï potomkem `CodebookSpec'.
	(FieldSpec.__init__): Aktualizace docstringu.
	(FieldSpec.__init__): Nový argument `display_size'.
	(FieldSpec.display_size): Nová metoda.
	(FieldSpec.__init__): Povol také øetìzec jako argument `codebook'.

	* pytis/form/dialog.py (RunFormDialog._CODEBOOK_FORM) 
	(RunFormDialog.__init__): `CodeBook' -> `CodebookForm'.

	* pytis/form/list.py (_on_incremental_search): Zapomeò na typ
	`pytis.data.Codebook'.
	(CodeBook): Pøejmenováno na `CodebookForm'.
	(CodebookForm.__init__, CodebookForm._init_attributes) 
	(CodebookForm.on_command): `CodeBook' -> `CodebookForm'.

	* pytis/form/inputfield.py (CodeBookField): Pøejmenováno na
	`CodebookField'.
	(InputField.create): `CodeBookField' ->	`CodebookField'.
	(InputField._init_ctrl): Kosmetické úpravy.
	(EnumerationField): Aktualizace docstringu.
	(Invocable): Aktualizace docstringu.
	(CodebookField): Aktualizace docstringu.
	(CodebookField._create_widget): Specifikaci èíselníku získávej
	pøes resolver zde, pokud je self.spec().codebook() øetìzec.  Ulo¾
	ji do `self._cb_spec' a název do `self._cb_name'.
	(CodebookField._on_invoke_selection): Pou¾ívej `self._cb_spec'.
	(CodebookField._validation_error_handler): Pou¾ívej
	`self._cb_spec' a `self._cb_name'.
	(CodebookField._on_invoke_selection): `CodeBook' -> `CodebookForm'.

2005-05-23  Pavel Hanak  <hanak@asellus.cz>

	* pytis/form/form.py (EditForm.print_menu): Odstranìno.

2005-05-23  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/application.py (Application.leave_form): Neloguj
	ukonèení dialogu.

	* pytis/form/screen.py (wx_text_view): Drobná oprava.

2005-05-19  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/screen.py (wx_text_view): Odhaduj velikost okna i pro
	WIKI formát ze zdrojového textu.

	* pytis/data/__init__.py: Neimportuj `xtypes'.  Aktualizuj jmenný
	prostor modulu `types_'.

	* pytis/data/_test.py (Boolean.test_values): Oèekávej vnitøní
	hodnoty, nikoli u¾ivatelské. 
	(Boolean.test_noncmp): Porovnávej s typem `String', ne `Enumeration'.
	(Codebook): Zru¹eno.
	(Enumerator): Nový test.

	* pytis/data/types_.py (Type.VM_NULL_VALUE): Nová konstanta.
	(Type._VALIDATION_MESSAGES): Pøidána zpráva pro `VM_NULL_VALUE'.
	(Type.__init__): Nový argument `enumerator'.
	(Type._complete): Zru¹eno.
	(Type.__cmp__): Porovnávej také enumerátory.
	(Type.__getattr__): Nevolej `self._complete()'.
	(Type._check_constraints): Pokud je value None a typ není "NOT
	NULL", vracej True bez dal¹ích kontrol.  Pokud je definován
	enumerátor, kontroluj hodnotu jeho prostøednictvím.
	(Type.enumerator): Nová metoda.
	(Type.constraints): Zru¹eno.
	(MutableType): Tøída zru¹ena.
	(Enumeration): Tøída zru¹ena.
	(Boolean): Buï rovnou potomkem `Type' s vyu¾itím `enumerator'.
	(FixedEnumeration): Tøída zru¹ena.
	(Enumerator, FixedEnumerator, MutableEnumerator, DataEnumerator): Nové tøídy.
	(Sequence): Tøída zru¹ena.
	(_Value.__cmp__): Pokud dojde na porovnávání hodnot, pou¾ij
	`cmp()', ne `compare_objects()'.
	(Boolean.__init__): Pøedávej argument `not_null'.

	* pytis/data/dbdata.py (DBDataPostgreSQL._pg_codebook_cache):
	Zru¹eno.
	(DBDataPostgreSQL._pg_query): Nevytváøej `_pg_codebook_cache'.
	(DBDataPostgreSQL._pg_create_make_row_template): Odstranìno
	zpracování typù `Codebook' a `Sequence'.  `DateTime' a `Time'
	zpracovávej spoleènì.  Neøe¹ `icount', je nyní v¾dy 1.
	(DBDataPostgreSQL._pg_validate_codebook): Metoda zru¹ena.
	(DBDataPostgreSQL._pg_make_row_from_raw_data): Neoèekávej `icount'
	v `self._pg_make_row_template'.  Zapomeò na typy typy `Codebook' a
	`Sequence'.  `DateTime' a `Time' zpracovávej spoleènì.
	(DBDataPostgreSQL._pg_value): Namísto `Enumeration' pracuj s `Boolean'.
	(PostgreSQLStandardBindingHandler._db_bindings_to_column_spec):
	Zru¹eny v¹echny hacky se zpracováním `Codebook' a `Sequence'.
	(PostgreSQLStandardBindingHandler._pdbb_condition2sql.relop):
	Zapomeò na typy typ `Codebook'.

	* pytis/presentation/field.py (PresentedRow._process_fieldspec):
	Pracuj s enumerátorem, ne pøímo s typem.
	(PresentedRow.__str__): Volej metodu pøedka, pokud je¹tì
	neexistuje `self._row'.
	(PresentedRow._recompute_codebook_runtime_filter): Pracuj s
	enumerátorem, ne pøímo s typem.

	* pytis/form/inputfield.py (InputField.create): Èíselníková
	políèka rozpoznávej podle enumerátoru, ne podle typu.
	(EnumerationField._values): Pracuj s enumerátorem.
	(EnumerationField._set_value, EnumerationField.get_value): Zru¹en
	neaktuální docstring.
	(ListBoxField._create_ctrl): Kosmetické úpravy.
	(CodeBookField._on_change_hook):
	(CodeBookField._on_invoke_selection): Zru¹en hack s validací podle
	typu sloupce èíselníku.  Pracuj s enumerátorem.  Nepou¾ívej
	`returned_column'.
	(CodeBookField._validation_error_handler): Validuj typ pøímo, ne
	pøes sloupce èíselníku.
	(CodeBookField._validation_error_handler): Nepou¾ívej
	`returned_column'.

	* pytis/form/list.py (CodeBook.__init__): O¹etøuj Double-click
	voláním `_on_activation()'.
	(CodeBook._init_attributes, CodeBook._init_attributes): Argument
	`ctype' nahrazen argumentem `condition'.
	(BrowseForm._context_menu): Kosmetické úpravy.

	* pytis/form/application.py (Application.run_form): Po uzavøení
	formuláøe volej `busy_cursor(False)'.
	(Application.run_dialog): Po uzavøení dialogu volej
	`busy_cursor(False)'.

	* pytis/data/xtypes.py: Removed.

	* pytis/data/data.py (MemData.select): `cond' není nikdy None.
	Vracej poèet nalezených øádek.

2005-05-19  Pavel Hanak  <hanak@asellus.cz>

	* pytis/form/form.py (Form.print_menu): Zohledni vrácení 'None' z
	'print_spec'. 

2005-05-18  Pavel Hanak  <hanak@asellus.cz>

	* pytis/util/configuration.py (Configuration._Option_doc_dir):
	Nová konfiguraèní volba.

2005-05-13  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/screen.py (wx_text_view): Pou¾ívej `lcg.WikiNode', ne
	pøímo `lcg.wiki.Parser'.
	(wx_text_view): Výstup Wiki parseru také obaluj HTML kódem.

	* pytis/form/dialog.py (GenericDialog._create_dialog_elements):
	Vkládej report do sizeru bez okrajù.

2005-05-12  Tomas Cerha  <cerha@brailcom.org>

	* pytis/presentation/spec.py (TextFormat.PLAIN): Nová tøída.

	* pytis/form/screen.py (wx_text_view): Nová funkce.
	(InfoWindow._create_content): Vyu¾ívej ji.
	(wx_html_view): Nová funkce.
	(HtmlWindow._create_content): Vyu¾ívej ji.
	(InfoWindow.__init__): Nepøedáven argument `title' volání
	`_create_content()'.
	(InfoWindow.__init__): Nový argument `format'.  Vytváøej widget
	pøímo zde voláním `wx_text_view()'.  Pøidány asserty na typy arguemntù.
	(InfoWindow._create_content): Metoda zru¹ena.
	(HtmlWindow): Tøída zru¹ena.
	(wx_html_view): Funkce zru¹ena.
	(wx_text_view): Nový argument `format'.  Vytváøej odpovídající
	widget podle tohoto argumentu.

	* pytis/form/dialog.py (GenericDialog.__init__): Nové arguemnty
	`report' a `html'.
	(GenericDialog._create_dialog): Pokud byl specifikován `report',
	pøidej do dialogu pøíslu¹ná prvek.
	(Message.__init__, MultiQuestion.__init__, Question.__init__):
	Nové arguemnty `report' a `html'.
	(GenericDialog.__init__): Argument 'html' nahrazen argumentem
	'report_format'.
	(GenericDialog._create_dialog_elements): Pøedávaj `report_format'
	volání `wx_text_view()'.  Nepou¾ívej ji¾ `wx_html_view()'.
	(Message.__init__, MultiQuestion.__init__, Question.__init__):
	Argument 'html' nahrazen argumentem 'report_format'.

	* pytis/util/log.py (SyslogLogger.FACILITY_LOCAL0) 
	(SyslogLogger.FACILITY_LOCAL1, SyslogLogger.FACILITY_LOCAL2)
	(SyslogLogger.FACILITY_LOCAL3, SyslogLogger.FACILITY_LOCAL4)
	(SyslogLogger.FACILITY_LOCAL5, SyslogLogger.FACILITY_LOCAL6)
	(SyslogLogger.FACILITY_LOCAL7): Nové konstanty.
	(SyslogLogger.__init__): Pøidán assert na hodnotu `facility'.
	
2005-05-11  Pavel Hanak  <hanak@asellus.cz>

	* pytis/form/form.py (EditForm._commit_form): Cleanup provádìj
	pouze pokud projde 'check'.

2005-05-10  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/inputfield.py (Module): V¹echna volání `log(DEBUG, ...)'
	uvozena podmínkou `if __debug__: ...'.

	* pytis/form/list.py (Module): V¹echna volání `log(DEBUG, ...)'
	uvozena podmínkou `if __debug__: ...'.

	* pytis/form/screen.py (Module): V¹echna volání `log(DEBUG, ...)'
	uvozena podmínkou `if __debug__: ...'.

	* pytis/form/output.py (Module): V¹echna volání `log(DEBUG, ...)'
	uvozena podmínkou `if __debug__: ...'.

	* pytis/remote/data.py (_DataChangesWatcher._watcher)
	(_DataChangesWatcher.register_callback)
	(_DataChangesWatcher.unregister_callback): Volání 
	`log(DEBUG, ...)'  uvozeno podmínkou `if __debug__: ...'.

	* pytis/util/util.py (copy_stream): Volání
	`log(DEBUG, ...)'  uvozeno podmínkou `if __debug__: ...'.

	* pytis/util/resolver.py (FileResolver._get_module): Odstranìna
	debug hlá¹ka.

	* pytis/output/formatter.py (LoutFormatter._resolve)
	(LoutFormatter._lout, LoutFormatter._lout, LoutFormatter._lout):
	Volání `log(DEBUG, ...)'  uvozeno podmínkou `if __debug__: ...'.

	* pytis/form/form.py (Form._on_parent_close): Volání
	`log(DEBUG, ...)'  uvozeno podmínkou `if __debug__: ...'.

	* pytis/form/event.py (wx_callback.process_event): Volání
	`log(DEBUG, ...)'  uvozeno podmínkou `if __debug__: ...'.

	* pytis/data/dbdata.py (Module): V¹echna volání `log(DEBUG, ...)'
	uvozena podmínkou `if __debug__: ...'.

	* pytis/util/configuration.py
	(Configuration._Option_application_name.default): Vracej `Pytis'.
	(Configuration._Option_log_logger.default_string): Vracej hodnotu
	korespondující s `default' hodnotou.

	* pytis/form/application.py (Application.OnInit): titulek aplikace
	získávej pøímo z konfiguraèní volby `application_name', nikoliv ze
	specifikace.
	(set_status): Volání `log(DEBUG, ...)'  uvozeno podmínkou 
	`if __debug__: ...'.
	(Application.OnInit, Application.run_dialog): Zmìnìna logovací
	priorita.

	* pytis/util/log.py (StreamLogger): Buï potomkem `object'.
	(StreamLogger.__init__): Pou¾ívej `super()'.
	(SyslogLogger._prefix): Loguj také jméno u¾ivatele.
	(LoggingInterface.__call__): Kosmetické úpravy.
	(SyslogLogger.__init__): Nová metoda.
	(SyslogLogger._send): Zakóduj pøedanou `facility' do `priority'.

2005-05-09  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/screen.py (HtmlWindow, InfoWindow): Nové tøídy.

	* pytis/form/application.py (Application.wx_frame): Nová metoda.
	(wx_frame): Nová funkce.

2005-05-06  Pavel Hanak  <hanak@asellus.cz>

	* pytis/data/dbdata.py
	(DBDataPostgreSQL._pg_create_make_row_template): Doplò o testování
	instance 'Time'.
	(DBDataPostgreSQL._pg_make_row_from_raw_data): O¹etøi typ 'Time'.

2005-05-06  Petr Malivanek  <malivanek@asellus.cz>

	* pytis/presentation/spec.py, pytis/form/screen.py (init_colors):
	Doplnìní konstant:
        BLANCHETALMOND:(255, 235, 205),
        LIGHTYELLOW:(255, 255, 224),
        PEACHPUFF2:(238, 203, 173),
        SLATEGRAY2:(185, 211, 238),
        LIGHTSALMON:(255, 160, 122)	

2005-05-05  Tomas Cerha  <cerha@brailcom.org>

	* pytis/data/xtypes.py (Codebook.validity_condition): Povol None,
	jako hodnotu vrácenou providerem.

	* pytis/data/dbdata.py
	(PostgreSQLStandardBindingHandler._pdbb_get_table_type): Nový
	argument `type_kwargs'.  Pøedávej jej volání
	`self._pdbb_get_type()'
	(PostgreSQLStandardBindingHandler._pdbb_get_type): Nový argument
	`type_kwargs'.  Nech» je argument `ctype' nepovninný.
	(PostgreSQLStandardBindingHandler._db_bindings_to_column_spec):
	Nepodporuj ji¾ specifikaci typu ani enumerátoru obsahující tuple.
	Pøedávej klíèové argumenty z DBColumnBinding do volání
	`self._pdbb_get_table_type()' a konstruktorùm typù.
	(DBBinding.__init__): Pøidán assert na typ argumentu `id'.
	(DBColumnBinding.__init__): Nový argument `**kwargs'.
	Zdokumentovány zmìny v chápání argumentù `enumerator' a `type_'.
	Pøidány asserty an datové typy v¹ech arguemntù.
	(DBColumnBinding.kwargs): Nová metoda. 

2005-05-02  Tomas Cerha  <cerha@brailcom.org>

	* pytis/form/inputfield.py (CodeBookField._on_invoke_selection):
	`begin_search' condition fixed.

	* pytis/form/list.py (CodeBook._on_idle): `begin_search' handling
	simplified.  Report invalid `begin_search' argument.

	* pytis/form/search.py: Import everything from `pytis.presentation'.

