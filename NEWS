; -*- mode: change-log -*-
; Tento dokument obsahuje chronologický seznam nových u¾ivatelských vlastností
; a opravených chyb.  Dodr¾ujte prosím formát.  Nejprve jsou nové
; vlastnosti (na ka¾dou vlastnost jeden odstavec) a potom bugfixy, ka¾dý
; uvozen "* BUGFIX:"


2006-01-18  Tomas Cerha  <cerha@brailcom.org>

        Specifikaèní parametr `enable_inline_insert' by ji¾ nemìl být
	pou¾íván.  Prozatím byl ponechán pro zpìtnou kompatibilitu a jeho
	pou¾ití je logováno, ale èasem bude potøeba jej v¹ude odstranit.
	Mo¾nost inline vkládání formuláø nyní zji¹»uje automaticky podle
	toho, zda jsou zobrazeny v¹echny NOT NULL sloupce.

	* BUGFIX: Pøi skrytí, èi pøesunu sloupce, nad ním¾ byla pøedtím
	provádìna inline editace se aplikace shroutila na SEGFAULT.  Tomu
	se podaøilo pøedejít uzavíráním v¹ech editorù je¹tì pøed
	manipulacemi se sloupci.
	
	* BUGFIX: Pøi kliknutí na záhlaví sloupce se stisknutým Shiftem
	ji¾ nedojde k doèasnému výbìru v¹ech øádkù gridu.  To bylo
	implicitní chování wx, které výraznì zdr¾ovalo (zejména u velkých
	tabulek) pøi pøepínání dodateèného tøídìní.

	* BUGFIX: O¹etøen pøípad vyvolání pøíkazu nad mrtvým formuláøem.
	
2006-01-17  Tomas Cerha  <cerha@brailcom.org>

	Ovládání tøídìní sloupcù by nyní mìlo být intuitivnìj¹í.
	Kliknutím na záhaví sloupce nyní nedojde k jeho pøidání jako
	dodateèného tøídícího sloupce, ale sloupec se stane primárním
	tøídícím sloupcem.  To je chování obvyklé v jiných aplikacích (ty
	se vìt¹inou mo¾ností nìkolika tøídících sloupcù vùbec nezatì¾ují).
	Pøidat sloupec jako dodateèný je nyní mo¾né jednodu¹e tak, ¾e pøi
	kliknutí na záhlaví sloupce pøidr¾ím klávesu Shift.

	Vizuální seskupování je nyní mo¾né i podle nìkolika sloupcù
	zároveò.  V kontextovém menu záhlaví sloupce proto pøibyly dvì
	nové polo¾ky, umo¾òující sloupec pøidat ke stávajícím seskupovacím
	sloupcùm, a nebo jej naopak odebrat.  Také ve specifikacích lze
	pro parametr `grouping' namísto prostého identifikátoru sloupce
	pøedat tuple a zapnout tak výchozí seskupování podle nìkolika
	sloupcù zároveò.

	* BUGFIX: U¾ivatelské nastavení tøídìní je bráno v potaz i pokud
	si u¾ivatel tøídìní zcela zru¹il.
	
2006-01-16  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi pøeskupování sloupcù jsou nyní také aktualizovány
	atributy sloupcù gridu.  Díky tomu jednak opìt chodí inline
	editace a jednak dojde ke korektnímu pøenastavení atributù po
	vyvolání pøíkazu `Form.COMMAND_RELOAD_FORM_STATE'.

2006-01-13  Tomas Cerha  <cerha@brailcom.org>

        V¹echny hodnoty naèítané z form_state jsou nyní dùkladnì
	kontrolovány, zda neobsahují nesmyslné, nebo zastaralé údaje a v
	pøípadì nesrovnalostí jsou ignorovány.

	Kontextové menu sloupce, pokud je vyvoláno v oblasti, kde ji¾ není
	¾ádný sloupec, nyní obsahuje pouze seznam sloupcù s mo¾ností
	zapnout a vypnout jednotlivé sloupce.  Díky tomu bylo mo¾né
	povolit skrýtí sloupce, by» je posledním zobrazeným sloupcem.
	Tak¾e teï mù¾eme skrýt v¹echny sloupce a pak zase nìkterý sloupec
	zobrazit výbìrem z tohoto menu.  Zároveò bylo o¹etøeno nìkolik
	chyb, vznikajících kdy¾ formuláø nemá zobrazeny ¾ádné sloupce.

	Drobná zmìna ve vytváøení atributù v gridu by mohla pøinést mírné
	zrychlení vykreslování pøi pou¾ití stylù.

	Kvùli ukládání u¾ivatelského nastavení seskupování a tøídìní bylo
	nutné proèistit a zpøehlednit nakládání s tìmito parametry, tak¾e
	nyní je v¹e ve slu¹ném stavu.

	* BUGFIX: O¹etøena situace, kdy byl pøidán nový sloupec z
	kontextového menu sloupce vyvolaného v oblasti za posledním
	sloupcem.  To vedlo k rozhození sloupcù a následnì èasto k
	segfaultu.

	* BUGFIX: I ostatní pøíkazy vyvolávané klikáním na záhlaví sloupcù
	o¹etøují kliknutí mimo existující sloupec a s tím související
	chyby.

	* BUGFIX: Ve filtrovacím a vyhledávacím dialogu se opìt správnì
	pøednastavuje aktuální sloupec a to i za situací, kdy se to døíve
	nedìlo (pøi druhém a dal¹ím spu¹tìní, pokud je podmínka prázdná).

	* BUGFIX: Polo¾ky menu pro grouping jsou nyní aktivní/neaktivní
	podle aktuálního stavu.

	
2006-01-12  Tomas Cerha  <cerha@brailcom.org>

        Nový pøíkaz `Form.COMMAND_RELOAD_FORM_STATE' (spou¹tìný momentálnì
	klávesovou zkratkou `Ctrl-Baskcpace' umo¾òuje zahodit aktuální
	u¾ivatelská nastavení formuláøe (napø. zobrazené sloupce, jejich
	¹íøky apod.) a vrátit døíve ulo¾ené u¾ivatelské nastavení.  V
	podstatì je formuláø reinicializován do stavu, v jakém byl otevøen
	a v¹echny zmìny od té doby provedené jsou tak zapomenuty.
	
        Robustnìj¹í nakládání s ulo¾enými informacemi o formuláøích a
	stavu aplikace by mìlo zamezit zhroucení aplikace pøi potenciálním
	chybném obsahu ulo¾ených stavových informací.

	Novì je nyní ukládáno také u¾ivatelské nastavení vizuálního
	seskupování a tøídìní pro ka¾dý formuláø.  Oba parametry se
	zároveò korektnì obnovují po vyvolání pøíkazu
	`Form.COMMAND_RELOAD_FORM_STATE'.
	
	* BUGFIX: Velikost gridu je nyní po rozta¾ení sloupce upravena
	tak, aby koncové sloupce nebyly useknuté.

	* BUGFIX: Ukládání u¾ivatelské konfigurace ji¾ nesel¾e díky nové,
	døíve neexistující volbì.
	
2006-01-11  Tomas Cerha  <cerha@brailcom.org>

	Nový argument `inserted_data' konstruktoru PopupEditForm umo¾òuje
	pøedat libovolnou sekvenci datových øádkù (instancí
	pytis.data.Row).  Formuláø je potom postupnì pøedvyplòován tìmito
	øádky a tlaèítkem "Dal¹í" je ka¾dý záznam ulo¾en a formuláø
	naplnìn dal¹ím øádkem.  Takto je mo¾né jednodu¹e vyu¾ít formuláø k
	hromadnému vkládání øádkù naètených z libovolného zdroje.

	Stavový øádek PopupEditFormu je teï flexibilnìj¹í a mohl by
	obsahovat nìkterá dal¹í zajímavá políèka, jako napø. pøíznak
	zmìny, nebo zkrátka co nás napadne.  Staèí vymyslet nìco
	smysluplného...

2006-01-09  Tomas Cerha  <cerha@brailcom.org>

	Název i formát specifikaèní funkce `command_keys' zmìnìn.  Nový
	název je `keymap' a polo¾ky definují navíc také argumenty pøíkazu,
	pøièem¾	definice klávesy je nyní na prvním místì.  Pøíkladem je
	definice `DEFAULT_KEYMAP' v `commands_.py'.  Hlavní výhodou je to,
	¾e nyní mù¾eme definovat i argumenty pøíkazù a nemusíme vytváøet
	pro ka¾dou variantu pøíkazu jeho specializovanou instanci.

	Pøi zpracování mnohých pøíkazù jsou nyní vyu¾ívány argumenty a
	mnohé pøíkazy byly zru¹eny a nahrazeny obecným pøíkazem a jeho
	arguemnty.
	
	Nové klávesové zkratky `Shift-Left' a `Shift-Right' (¹ipky),
	umo¾òují pøesunout aktuální sloupec vlevo/vpravo bez pou¾ití my¹i.
	
	
2006-01-06  Tomas Cerha  <cerha@brailcom.org>

	Ve filtraèním, vyhledávacím a tøídícím dialogu se nyní zobrazené
	sloupce zobrazují na zaèátku a skryté sloupce jsou za nimi a
	jejich názvy jsou v závorkách.  Tím by mìl být výbìr sloupce
	daleko pøehlednìj¹í.

	Pøi ka¾dém otevøení formuláøe je kontrolováno, zda se mno¾ina
	sloupcù definovaná ve specifikaci nezmìnila od doby, kdy si
	u¾ivatel ulo¾il vlastní nastavení sloupcù.  Pokud ano, vyskoèí
	dialog, jeho¾ potvrzením je u¾ivatelské nastavení zahozano.
	U¾ivatel mù¾e zahození také zamítnout.  V tom pøípadì vidí jen ty
	sloupce, ze svého nastavení, které v souèasné specifikaci zùstaly,
	resp. jejich¾ identifikátory se nezmìnily.
	
	Nový argument `row_style' ve `ViewSpec' umo¾òuje definovat styl
	pro celý øádek, tedy v¹echna políèka zároveò.  Tím by se mohly
	nìkteré formuláøe dosti urychlit, proto¾e se styl i pøi velkém
	poètu sloupcù poèítá pro ka¾dý øádek jen jednou.  Je v¹ak tøeba
	zru¹it v¹echny styly definované jako `style' ve `FieldSpec' a
	definovat místo toho `row_style'.  Pokud má nìjaký sloupec
	pou¾ívat jiný styl, není problém oba styly kombinovat -- `style'
	ve `FieldSpec' má pøednost, pokud je definován.

	Nová konfiguraèní volba ve formuláøi "Nastavení u¾ivatelského
	rozhraní" umo¾òuje nastavit ztmavení øádkù pøi vizuálním
	seskupování.

	* BUGFIX: Filtraèní dialog u¾ opìt filtruje i pøi stisku
	"Ctrl-Enter".

	* BUGFIX: Filtraèní a tøídící dialog nyní rozeznávají sloupeèky
	podle poøadí, nikoliv podle názvu, co¾ opravuje napøíklad
	nefunkèní filtraci v zakázkách isasu, kde byly dva sloupce
	stejného názvu a filtrování se tak provádìlo v jiném sloupci, ne¾
	u¾ivatel oèekával.

	* BUGFIX: Grouping nyní funguje i pokud sloupec zrovna není
	zobrazen.

	* BUGFIX: Pokud je sloupec roztahován/zu¾ován my¹í, nedochází ji¾
	k nechtìnému pøesouvání sloupce pøi pøeta¾ení okraje za polovinu
	vedlej¹ího sloupce.

	* BUGFIX: Urèení pozice sloupce nyní poèítá i s offsetem
	zpùsobeným horizontálním scrollováním.  Ve¹keré akce nad sloupci
	provádìné my¹í tak nyní pracují za v¹ech okolností se správným
	sloupcem.  Døíve byl napøíklad pøesunut nebo skryt jiný sloupec,
	pokud byla tabulka odscrollovaná doprava.
	
2006-01-04  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: V pytis-extensions byla opravena funkce
	`get_menu_defs()', tak aby nezahrnovala polo¾ky týkající se
	konfigurace.

	* BUGFIX: Inicializuj klávesovou mapu pøed naèítáním konfigurace,
	jinak nefungují klávesy v dialogu pro pøihlá¹ení k databázi.
	
2006-01-03  Tomas Cerha  <cerha@brailcom.org>

        Validace hodnot zadaných ve filtrovacím nebo vyhledávacím dialogu
	nyní není striktní a pokud k chybì validace dojde, dialog se
	neukonèí.
	
        Algoritmus pro pøepoèítávání ¹íøek sloupcù byl upraven, aby lépe
	zohledòoval u¾ivatelem nastavené ¹íøky sloupcù.

	Nová konfiguraèní volba (v dialogu nastavení u¾ivatelského
	rozhraní) umo¾òuje zakázat automatické roztahování tabulek na
	celou ¹íøku okna.

	* BUGFIX: Tlaèítko "Pou¾ít" v konfiguraèním dialogu ji¾ opìt
	funguje.

	* BUGFIX: Zmìna ¹íøky sloupce pomocí klávesových zkratek je
	zapamatována.

	* BUGFIX: Pøi ukládání u¾ivatelských voleb do konfiguraèního
	souboru jsou døíve ulo¾ené hodnoty promazávány.  Pokud se tak
	nedìlo, volby, které u¾ivatel jednou zmìnil a potom vrátil na
	výchozí hodnotu, si poøád dr¾ely zmìnìnou hodnotu.
	
	* BUGFIX: Ve filtrovacím dialogu se nyní zobrazují v¹echny
	dostupné sloupce (tedy i ty, které momentálnì nejsou zobrazené).
	
2006-01-02  Tomas Cerha  <cerha@brailcom.org>

        V pytis-extensions byla definována nová pomocná funkce
	`context_mitem()', která usnadòuje definici polo¾ek kontextového
	menu.
	
	* BUGFIX: Zobrazování popiskù konfiguraèních voleb ji¾ funguje i v
	optimalizovaném re¾imu.
	
	* BUGFIX: Pøi naèítání konfigurace z databáze je díky pou¾ití
	`db_operation' nyní správnì provedeno pøihlá¹ení do databáze.

	* BUGFIX: Pøi sestavování argumentù handleru pøíkazu je o¹etøena
	situace, kdy handler nepøijímá ¾ádné klíèové argumenty, která
	po pøede¹lých úpravách vyvolávala výjimku.
	
2005-12-28  Tomas Cerha  <cerha@brailcom.org>

	Pøíkazy kontextového menu øádkového formuláøe:
	
	ListForm má nyní nový pøíkaz `COMMAND_CONTEXT_MENU_ACTION', který
	je urèen k vytváøení akcí v kontextovém menu øádku BrowseFormu.

	Pøíkaz mù¾e mít libovolné argumenty, av¹ak dva z nich jsou
	zpracovány odli¹nì.  Argument `handler' je povinný a musí
	odkazovat na funkci, která akci provede.  Dal¹ím speciálním
	argumentem je `enabled', co¾ mù¾e být funkce, vracející pravdu,
	pokud je pøíkaz aktivní a nepravdu v opaèném pøípadì.

	Obì funkce (`handler' i `enabled') dostanou jako klíèové argumenty
	v¹echny ostatní argumenty pøíkazu, vyjma argumentù `handler' a
	`enabled'.  Navíc, pokud tyto funkce pøijímají jeden pozièní
	argument, dostanou jako první argument instanci PresentedRow
	aktuálního øádku, nad kterým byla akce vyvolána.  Pokud pøijímají
	dva pozièní argumenty, bude na prvním místì pøedán je¹tì datový
	objekt formuláøe.

	Tento pøíkaz by mìl být vyu¾íván namísto u¾ivatelských pøíkazù,
	ale pro finální pou¾ití bude je¹tì dodìlána nìjaká podpora
	zjednodu¹ující definici.   Bohu¾el asi nebude mo¾é automaticky
	zmìnit typ pøíkazu vracený funkcí `user_cmd()', proto¾e ta vrací
	pouze pøíkaz a my potøebujeme zmìnit také jeho argumenty...  Je¹tì
	se na to ale podíváme.

	Menu poslednì otevøených formuláøù:
	
	Pøi definici menu aplikace je mo¾no v libovolném místì pou¾ít
	novou funkci `recent_forms_menu()', která vytvoøí menu poslednì
	otevøených formuláøù.  Do tohoto menu jsou potom automaticky
	pøidávány v¹echny spou¹tìné formuláøe (vyjma popup formuláøù).
	Výbìrem polo¾ky menu je stejný formuláø otevøen znovu.  Stav je
	ukládán pøi ukonèení aplikace, tak¾e se menu bude hodit zejména
	pro znovuotevírání èasto pou¾ívaných formuláøù.  Menu si pamatuje
	pouze posledních deset polo¾ek.

	* BUGFIX: Byl o¹etøen pøípad vkládání záznamu do prázdné tabulky.

	* BUGFIX: Pøi zji¹»ování editovatelnosti políèka v inline editaci
	je nyní správnì pou¾it rozeditovaný øádek, ne øádek stejného èísla.
	
	* BUGFIX: Pøi aktualizaci gridu nyní nevoláme `_select_cell()' pro
	výbìr pøedchozí vybrané buòky.  Vìt¹inou to není potøeba a bìhem
	refresh, kde to potøeba je, se to stejnì provádí na konci je¹tì
	jednou.  Naopak v nìkterých pøípadech vkládání øádkù je to
	ne¾ádoucí, proto¾e je tím opìt zru¹ena nastartovaná editace.
	
2005-12-27  Tomas Cerha  <cerha@brailcom.org>

	Notifikace o zmìnì dat v databázi (napø. jiným u¾ivatelem) je nyní
	mo¾no zobrazovat ve stavové øádce.  Staèí v definici polí
	stavového øádku (v application.py) pøidat polo¾ku
	"('data-changed', 13)" a v aplikaci pøibyde nové stavové pole,
	které zobrazuje text "Data ok", pokud jsou data aktuální a "Data
	zmìnìna", pokud byla data v databázi zmìnìna a je tedy nutné
	zobrazení aktualizovat.  Jsou vítány návrhy na lep¹í hlá¹ky,
	proto¾e "data zmìnìna" mù¾e vypadat i jako ¾e u¾ivatel nìco zmìnil
	a neulo¾il, ale v¹echny jiné varianty jsou pøíli¹ dlouhé...

	V budoucnu bude vhodné umo¾nit zobrazení ikony s tooltipem, èím¾
	se vyøe¹í dilema s délkou/výsti¾ností hlá¹ky.  Také by tato
	polo¾ka mìla být pøidávána do statusbaru automaticky, tak¾e nebude
	nutné upravovat application.py v¹ech aplikací.  K tomu je ov¹em
	tøeba trochu pøepracovat implementaci stavové øádky.

	Dále byla dnes commitnuta úprava v configui, která zaji¹»uje
	naèítání a ukládání konfigurace v konfiguraèním formuláøi pomocí
	speciální "fale¹né" datové tøídy, èím¾ se jednak zjednodu¹ila
	implementace formuláøe a jednak vyøe¹il døívìj¹í problém s módem
	formuláøe.
	
2005-12-22  Tomas Cerha  <cerha@brailcom.org>

        Pøibyl nový konfiguraèní formuláø "Nastavení exportu", který
	nahrazuje polo¾ky, které byly døíve zamíchány do u¾ivatelského
	nastavení.  Tyto polo¾ky byly odstranìny z Isasu a Solasu.
	
	* BUGFIX: Pøi uzavírání popup oken je kontrolováno, zda pøíslu¹ný
	wx prvek je¹tì ¾ije.  To døíve mohlo vést ve speciálních pøípadech
	ke krachu aplikace.
	
2005-12-21  Tomas Cerha  <cerha@brailcom.org>

        ListForm nyní pøi refreshi aktualizuje i nastavení v¹ech barev,
	tak¾e po zmìnì v konfiguraci se v¹e hned promítne.

	EditForm nyní pou¾ívá "Stock Buttons", tak¾e tlaèítka mají nyní
	ikonky.  Tlaèítko "Ok" se teï sice jmenuje "Budi¾", co¾ nelze
	zmìnit, proto¾e to je vlastnost GTK, ale snad to u¾ivatelùm vadit
	nebude.  Ikonky se jim urèitì líbit budou.

	V pytis.form nyní pøibyl nový modul `configui', který realizuje
	u¾ivatelské rozhraní pro nastavování konfiguraèních voleb.
	Konfiguraèní formuláøe jsou tak nyní souèástí pytis a nemysí být
	slo¾itì znova a znova implementovány v ka¾dé aplikaci.  Zejména
	nemusí být pro ka¾dou konfiguraèní volbu vytváøen sloupeèek v
	databázi, co¾ umo¾ní snadné pøidávání nových voleb do formuláøù.

	Pou¾ití konfiguraèních formuláøù je snadné.  Staèí pøi vytváøení
	menu aplikace pou¾ít funkci `config_menu_items()', která
	automaticky do menu doplní polo¾ky pro v¹echny dostupné
	konfiguraèní formuláøe.
	
2005-12-20  Tomas Cerha  <cerha@brailcom.org>

        Tabulkové formuláøe si nyní ukládají nastavení sloupcù do
	konfigurace, tak¾e pokud si u¾ivatel pøeskupí, skryje èi zobrazí
	sloupce oproti specifikaci, budou tyto zmìny zapamatovány.  Také
	¹íøky sloupcù jsou ukládány.  Není zatím øe¹ena napø. situace, kdy
	ve specifikaci aplikace pøibydou nové sloupce, nebo bylo zmìnìno
	jejich výchozí poøadí, èi názvy.  Pokud si u¾ivatel sloupce ji¾
	upravil, o zmìnì se nyní nedozví, pouze sloupce, které ji¾ ne
	specifikaci neexistují nebudou zobrazeny.  Tuto situaci bude tøeba
	je¹tì o¹etøit.

	Byl také implementován mechanismus ukládání konfiguraèních voleb
	pøi ukonèení aplikace a jejich obnovení pøi dal¹ím spu¹tìní, tak¾e
	napø. zmìny sloucù, ale i zmìny libovolných jiných konfiguraèních
	voleb jsou perzistentní.  Výchozí metodou ukládání konfigurace je
	konfiguraèní soubor v domovském adresáøi u¾ivatele (na platformì
	UNIX - na jiných platformáých by tomu bylo jinak, napø. Windows
	Registry).  Ve specifikaci aplikace ('application.py') v¹ak lze
	metodu ukládání pøedefinovat libovolnou vlastní metodou (více viz
	dokumnetace tøídy pytis.form.Application).  Navíc v
	pytis-extensions byly definovány nové funkce umo¾òující ukládání
	konfigurace v zapicklované podobì do stringového sloupeèku v
	databázi.
	
        V pytis-extensions je nyní nová tøída DBConfig, nahrazující
	døívìj¹í ConfigDB.  Není s pùvodní tøídou zcela kompatibilní,
	proto nový název.  Stará tøída by ji¾ nemìla být vyu¾ívána a bude
	èasem zru¹ena.  Kromì jednodu¹¹ích arguemntù konstruktoru nová
	tøída opravuje nekonzistenci rozhraní, kdy nastavení hodnoty
	slovníku oèakávalo instanci Value, ale získání hodnoty vracelo
	Pythonovou hodnotu.  Nyní se v¹ude pracuje pouze s Pythonovými
	hodnotami.  K získání instance Value je navíc mo¾né vyu¾ít novou
	metodu `value()'.  Kromì toho tøída ke¹uje datové objekty, tak¾e
	je nyní vnitøne vyu¾ívána i funkcí `cfg_param', její¾ rozhraní se
	v¹ak nijak nezmìnilo.

	* BUGFIX: Opraveno ¹patné chování metody `Configuration.changed()'
	pøi práci s mutable objekty.  Inicializaèní hodnota je nyní
	kopírována, tak¾e dojde ke správné detekci zmìny.
	
	* BUGFIX: Záhlaví sloupcù nech» zobrazují `column_label', nikoli
	plný název sloupce.

2005-12-19  Tomas Cerha  <cerha@brailcom.org>

        Ka¾dá konfiguraèní volba nyní udr¾uje informaci o své pùvodní
	hodnotì a umo¾òuje tak zjistit, zda za bìhu aplikace do¹lo ke
	zmìnì této hodnoty u¾ivatelem.  Tím bude mo¾né zmìnìné volby pøed
	ukonèením aplikace ulo¾it a pøi pøí¹tím startu opìt obnovit.
	
	* BUGFIX: begin_search
	
2005-12-16  Tomas Cerha  <cerha@brailcom.org>

        Vìt¹ina vlastností konfiguraèních voleb (v modulu
	`configuration.py') je nyní definována pomocí konstant.  Není tak
	nutno pøedefinovávat celé metody a definice je tak pøehlednìj¹í a
	snáze udr¾ovatelná.

	* BUGFIX: Opravena vèerej¹í chybka, která mìla za následek ¾e
	stiskem Enter na tlaèítku dialogu nebyl vyvolán stisk tlaèítka,
	tak¾e dialog ne¹el tímto zpùsobem odeslat.

2005-12-15  Tomas Cerha  <cerha@brailcom.org>

	Dialog lze nyní odeslat klávesou Ctrl-Enter.  Tímto zpùsobem je
	dialog odeslán stejnì, jako by bylo stisknuto potvrzovací
	tlaèítko.  Toto potvrzovací tlaèítko mají definováno jen dialogy,
	u kterých to má smysl (napø. vyhledávací/filtrovací).
	
	* BUGFIX: Pøidání sloupce nyní funguje i pokud je zobrazen pouze
	jeden sloupec.
	
2005-12-14  Tomas Cerha  <cerha@brailcom.org>

	Byly implementovány funkce umo¾òující u¾ivateli interaktivnì mìnit
	poøadí sloupcù, skrývat vybrané sloupce a zobrazovat sloupce,
	které jsou implicitnì skryté.  V kontextovém menu záhlaví sloupce
	je polo¾ka pro skrytí aktuálního sloupce a podmenu, ve kerém jsou
	vidìt v¹echny dostupné sloupce a jejich aktuální stav.  Výbìrem
	polo¾ky je tak mo¾né libovolný sloupec skrýt nebo zobrazit.

	Zmìnu poøadí sloupcù lze nyní jednodu¹e mìnit pøetahováním záhlaví
	sloupce my¹í.
	
	* BUGFIX: O¹etøen pøípad, kdy v hlavním formuláøi dualformu není
	vybrán ¾ádný øádek.  Pøedchozí oprava toti¾ mìla mouchy...

2005-12-12  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Funkce `refresh()' nyní pracuje správnì s aktivním
	formuláøem, ne s posledním, jak tomu bylo dosud, tak¾e teï u¾ by
	se mìl refresh skuteènì projevit ve v¹ech pøípadech.

2005-12-09  Tomas Cerha  <cerha@brailcom.org>

	Nová tøída `CheckItem' umo¾òuje definovat polo¾ku menu, které se v
	konstruktoru pøedá funkce `state', která za bìhu zjistí stav
	polo¾ky.

	Menu oken pøepsáno s pou¾itím této nové vlastnosti, kterou dìdí i
	`RadioItem'.
	
	* BUGFIX: Spojovací operátory ("a zároveò" / "a nebo") by ji¾ mìly
	bát správnì pøi vytváøení podmínky pomocí "Filtrovat podle buòky".
	
	* BUGFIX: O¹etøen pøípad, kdy v hlavním formuláøi dualformu není
	vybrán ¾ádný øádek.  To se nìkdy stávalo po úpravì dat horního
	formuláøe a zpùsobovalo to traceback.

	* BUGFIX: V rámci kódu pøepoèítávací funkce cmputeru je nyní
	mo¾né zjistit pùvodní hodnotu sebe sama bez rizika rekurze.  Tím
	je mo¾né napø. za urèitých podmínek ponechat hodnotu políèka
	nezmìnìnou (vrátit pøedchozí hodnotu).
	
	* BUGFIX: Pøi zmìnì ¹írky sloupce z klávesnice se nyní aktualizují
	i scrollbary.
	
	* BUGFIX: "Filtrovat podle buòky" se ji¾ nehroutí na virtuálním
	sloupci.  Zobrazí se jen zpráva, ¾e to nelze.
	
2005-12-07  Tomas Cerha  <cerha@brailcom.org>

	Specifikace èíselníku se nyní naèítá a¾ v konstruktoru formuláøe.
	V dùsledku se napø. pøi pou¾ití `run_cb()' (pytis-extensions)
	automaticky pou¾ijí sloupce definované v `cb_spec()'

        Klávesové zkratky 'Alt-Right' a 'Alt-Left' (levá a pravá ¹ipka)
	nyní umo¾òují interaktivnì mìnit ¹íøku aktuálního sloupce.
	
        Funkce `run_procedure()' a `user_cmd()' (pytis-extensions) nyní
	pøijímají argument `block_refresh_' a pokud je pravdivý, tak
	obalují proceduru, resp. handler pøíkazu funkcí `block_refresh()',
	tak¾e po dobu jejich provádìní se neprovádí ¾ádné refreshe.  Pokud
	je to tøeba, je nutno pøípadný refresh nakonec zavolat ruènì.
	
	* BUGFIX: Øazení klikáním na záhlaví sloupce ji¾ funguje i na
	primárnì øazeném sloupci.

	* BUGFIX: Opraveny nefunkèní agregaèní funkce ve vedlej¹ím
	formuláøi dualformu.  Døíve docházelo k tomu, ¾e filtraèní dialog
	(ve kterém se agregaèní funkce poèítají) byl inicializován pouze
	pøi prvním spu¹tìní aktuální datovou podmínkou platnou pro aktivní
	øádek hlavního formuláøe.  Pøi pøechodu na jiný øádek se data
	dolního formuláøe zmìnila, ale agregaèní funkce pracovaly poøád se
	stejnými daty.
	
2005-12-06  Tomas Cerha  <cerha@brailcom.org>

	Èíselníkové políèko typu ListField nyní umo¾òuje nezávislý pohyb
	kurzoru a výbìr.  Døíve výbìr v¾dy následoval kurzor, co¾
	znemo¾òovalo napøíklad scrollovat hodnoty pomocí klávesnice.

	Blokování refreshe nyní funguje i pøi jeho vnoøeném pou¾ití a je
	mo¾né pøedat argumenty volané funkce.  Byly také odstranìny
	nìkteré døívìj¹í hacky, které øe¹ily blockování refreshe po svém.
	
	* BUGFIX: O¹etøena ztráta focusu pøi uzavøení filtrovacího diaogu
	nad duálním formuláøem, kvùli které pøestávalo fungovat
	zobrazování aktivního øádku ve stavové øádce.

	* BUGFIX: Focus je nyní pøi otevøení duálního formuláøe nahoøe.
	
2005-12-05  Tomas Cerha  <cerha@brailcom.org>

	Nová funkce `block_refresh' umo¾òuje zablokovat refresh po dobu
	vykonávání bloku kódu.  To je vhodné zejména pøi definici procedur
	v defsech, kde automatické refreshe èasto zdr¾ují a pøitom postaèí
	jeden refresh a¾ na konci série operací.

	* BUGFIX: Opravena drobná chybka znemo¾òující tisk pomocí
	klávesové zkratky.

	* BUGFIX: Opraveno havarování pøi zobrazení více dialogù.
	
	* BUGFIX: Filtrovací dialog si nyní opìt správnì zapamatuje
	podmínku.

	* BUGFIX: Nastavování velikostí prvkù filtrovacích dialogù
	upraveno pro nové verze wx.

2005-12-01  Tomas Cerha  <cerha@brailcom.org>

	Tiskové menu se nyní nevytváøí v menubaru aplikace, ale ka¾dý
	formuláø má tlaèítko, kterým lze menu vyvolat.  Je tím vyøe¹en
	problém tiskového menu v duálním formuláøi.

2005-11-29  Tomas Cerha  <cerha@brailcom.org>

	Dialogy nyní pou¾ívají systémové ikony, tak¾e jednak není nutné
	distribuovat ikony spoleènì s Pytisem (a nastavovat cesty atd.) a
	jednak ikony odpovídají zvolenému systémovému tématu (jsou
	vìt¹inou mnohem hezèí, ne¾ ty, které jsme mìli).

	* BUGFIX: Opraven nefunkèní `OperationDialog'.

	* BUGFIX: Nastavení výchozího tlaèítka dialogu by ji¾ mìlo
	fungovat.
	
	* BUGFIX: Klávesy v dialozích by se ji¾ mìly chovat pøirozenìji.
	
	* BUGFIX: Editable.ONCE nyní funguje správnì i v inline editaci.
	
2005-11-29  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Kalendáøový dialog by ji¾ mìl správnì reagovat ve v¹ech
	verzích wxWidgets.
	
	* BUGFIX: O¹etøeny výjimky resloveru pøi zji¹»ování výchozího
	tøídìní èíselníku.

2005-11-28  Tomas Cerha  <cerha@brailcom.org>

	Nová konfiguraèní volba `dbport' (a argument pøíkazové øádky)
	umo¾òuje nastavit port databázového spojení.  `dbhost' nyní
	funguje i jako argument pøíkazové øádky.
 	
	ListField nyní reaguje na koleèko my¹i.

	* BUGFIX: Pøi vyvolání prázdného èíselníku nezobrazuj chybovou
	hlá¹ku "Záznam nenalezen".

	* BUGFIX: Needitovatelný ListField lze nyní scrollovat (my¹í).

	* BUGFIX: Focus ji¾ v duálním formuláøi nepøeskakuje pøi pøechodu
	na záznam, ke kterému v dolním formuláøi nejsou ¾ádné polo¾ky.
	Tato chyba byla pravdìpodobnì odstranìna nìkterou pøedchozí
	úpravou.  Dnes bylo správné chování pouze zji¹tìno.

	* BUGFIX: Vyvolání èíselníku v inline editaci.
	
2005-11-25  Tomas Cerha  <cerha@brailcom.org>

	Odstranìn doèasný hack v PresentedRow._init_row.genval()
	umo¾òující pou¾ití computeru namísto funkce `default'.  Nyní je
	tedy nutné ve specifikacích v¾dy rozli¹ovat.  Default je pro
	výpoèet hodnoty pøi inicializaci nového záznamu, computer pro
	prùbì¾né dopoèítávání a výpoèet hodnot virtuálních políèek.

	* BUGFIX: Vyøe¹en problém sdílení Enumerátorù projevující se
	výrazným zpomalením pøi pou¾ití ListField v DescriptiveDualFormu.
	
2005-11-24  Tomas Cerha  <cerha@brailcom.org>

	Argument 'sorting' v CodebookSpec se nyní skuteènì projeví pøi
	zobrazení èíselníku.
      	
	* BUGFIX: V DescriptiveDualForm byl pøi výbìru pøedáván do
	vedlej¹ího formuláøe celý PresentedRow, tak¾e nedocházelo správnì
	k aktualizaci RuntimeFilterù a dal¹ích závislostí.  Opraveno
	nastavováním pouze pøes datový øádek.

	* BUGFIX: Vèerej¹í bugfix zpùsobil problémy s computery pøi
	inicializaci prázdného PresentedRow v EditFormu.  Dne¹ní oprava v
	DescriptiveDualFormu v¹ak øe¹í i problém s neinicializovanými
	filtry, tak¾e vèerej¹í úprava mohla být zase zru¹ena.

	* BUGFIX: ListField nyní zachovává nastavenou hodnotu i po
	pøenaètení dat (zmìna runtime-filteru).

2005-11-23  Tomas Cerha  <cerha@brailcom.org>

        V CodebookSpec lze nyní pøedefinovat také tøídìní argumentem
	'sorting'.  Zatím se to nikde neprojeví, ale lze toho ji¾ vyu¾ívat
	ve specifikacích a brzo se snad dostaneme i k implementaci.  Sní¾í
	se tak poèet potøebných variant v defsech.

	V pytis-extensions pøibyla nová funkce enum(), umo¾òující
	jednodu¹e vytvoøit DataEnumerator pro arguemnt 'enumerator'
	datového typu.

	* BUGFIX: V ListField jsou nyní správnì zobrazovány i víceøádkové
	polo¾ky.

	* BUGFIX: Odstranìn problém s "Insufficient runtime filter"
	zpùsobený neinicializovanými filtry ve formuláøích, které
	nevytváøely PresentedRow v konstruktoru.

	* BUGFIX: Opraveno chování specifikátoru 'default'.  Nyní je
	funkce volána pouze pøi vytváøení nového øádku.

2005-11-22  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: None nech» je platným argumentem 'select_row()'.

	* BUGFIX: Vnoøené volání hookù pøi zmìnì runtime filteru
	enumerátoru.

	* BUGFIX: PresentedRow nyní správnì øe¹í ve¹keré závislosti a
	pøepoèítávání i pro virtuální políèka.
	
2005-11-21  Tomas Cerha  <cerha@brailcom.org>

	Nový typ èíselníkového políèka urèený pomocí `SelectionType.LIST'.
	Toto políèko nahrazuje pùvodní seznamové políèko urèené pomocí
	'RefSpec' a argumentu 'references'.  Argument 'references' je nyní
	nefunkèní a jeho pou¾ití je pouze logováno.  Bude tøeba ho v¹ude
	odstranit a nahradit èíselníkem s vý¹e zmínìným 'selection_type'.
	Tato nová implementace umo¾òuje daleko sna¾¹í práci se seznamem,
	mo¾nost pøímého získání vybrané hodnoty (napø. v computerech),
	získání hodnoty libovolného sloupce vybraného øádku a dal¹í
	mo¾nosti *sdandardnì* podporované èíselníkovými políèky.
	Odstraòuje také nìkolik velice nepøíjemných hackù, které byly
	nutné kvùli døívìj¹í implementaci a pomìrnì neprùhledné a zcela
	nestandardní chování.  Kromì nového typu 'selection_type' nejsou
	na stranì specifikace nyní pou¾ity ¾ádné speciality.  K filtrování
	záznamù v seznamu podle aktuálních dat formuláøe je mo¾né pou¾ít
	'codebook_runtime_filter'.  V¹e je tak plnì v souladu se za¾itou
	koncepcí systému.

	Zprùhlednìní zpracování arguemntu 'selection_type' ve 'FieldSpec'
	a pøiøazení výchozích hodnot.  Pøidány asserty upozoròující na
	nesprávnou kombinaci 'selection_type' a 'codebook' ve specifikaci.

2005-11-18  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opraveno nefunkèní nastavení editovatelnosti políèek.

	* BUGFIX: Nezobrazuj chybový dialog, kdy¾ nelze nalézt pùvodní
	záznam po vyvolání funkce kontextového menu v BrowseFromu.

	* BUGFIX: Displej se nyní nezobrazí, pokud má nastavenu nulovou
	¹íøku.

2005-11-16  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Chybné skládání klávesových zkratek a následé padání pøi
	zobrazení popup-menu.

2005-11-15  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Nechtìné nalíznutí sekvencí pøi otevírání formuláøù
	odvozených z EditForm (nadbyteèná inicializace prázdného záznamu).
   
2005-11-09  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Nekorektní chování metody `Data.search()' v tabulce s
	NULL hodnotami ve sloupci, podle kterého je tøídìno.
