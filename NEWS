; -*- mode: change-log -*-
; Tento dokument obsahuje chronologický seznam nových u¾ivatelských vlastností
; a opravených chyb.  Dodr¾ujte prosím formát.  Nejprve jsou nové
; vlastnosti (na ka¾dou vlastnost jeden odstavec) a potom bugfixy, ka¾dý
; uvozen "* BUGFIX:"

2006-11-28  Tomas Cerha  <cerha@brailcom.org>

	Menu autofilteru nyní není souèástí kontextového menu záhlaví
	sloupce, proto¾e jeho sestavování mù¾e trvat dlouho a to
	zpùsobovalo problémy pøi násobném pokusu o vyvolání menu.  Namísto
	toho je v kontextovém menu záhlaví sloupce zobrazena pouze
	polo¾ka, která menu autofilteru sestaví a¾ na po¾ádání.  Výhodou
	tohoto øe¹ení je napøíklad i to, ¾e je mo¾né menu autofilteru
	vyvolat i jinak ne¾ z kontextového menu záhlaví sloupce --
	napøíklad klávesovou zkratkou (zatím není definována).  Ka¾dopádnì
	je tím vyøe¹en problém, který zpùsoboval podivné zamrznutí
	zpracování událostí pøi dvojím kliknutí pravým tlaèítkem na
	záhlaví sloupce.
	
2006-11-27  Tomas Cerha  <cerha@brailcom.org>

	Inkrementální vyhledávání nevalidní hodnoty v èíselníku je nyní
	automaticky nastartováno jen pokud byla hodnota políèka zmìnìna.

	Hack, který umo¾òuje zji¹tìní názvu specifikace enumerátoru nyní
	funguje i pro enumerátory jejich¾ datový objekt je definován
	pomocí nové tøídy `Specification'.  Tím je umo¾òeno v pøechodném
	období kombinovat "staré" defsy s defsy vyu¾ívajícími tøídu
	`Specification'.
	
	* BUGFIX: Bylo odstranìno nechtìné omezení, které znemo¾òovalo
	vytváøet èíselníková políèka s computerem typu CbComputer.
	
	* BUGFIX: Argument `alternate' pøíkazu
	Invocable.COMMAND_INVOKE_SELECTION (klávesa Ctrl-F2) je nyní
	korektnì zpracován v¹emi pøíslu¹nými typy vstupních políèek.
	
	* BUGFIX: Opravena rekurze pøi porovnávání typù, která napøíklad
	vedla k pádu aplikace pøi otevøení DescriptiveDualForm (mezerník).

2006-11-24  Pavel Hanak  <hanak@asellus.cz>

	Tøída `Specification' nyní podporuje také urèení OID sloupce.  Viz
	dokumentace `Specification.oid'.
	
2006-11-24  Tomas Cerha  <cerha@brailcom.org>

	Tøída `Specification' má nyní podporu také pro vytvoøení
	virtuálního datového objektu.  Toho lze vyu¾ít napøíklad pro
	zobrazení formuláøù, které nejsou vázány na databázovou tabulku (v
	procedurách apod).  Virtuální specifikaci vytvoøíme tak, ¾e jako
	argument `data_cls' uvedeme tøídu `RestrictedMemData'.  Proto¾e
	datové typy nelze urèit automaticky z databáze, je výchozím
	datovým typem políèek v¾dy `String'.  Aktuální implementace má
	nyní nìkolik drobnìj¹ích omezení.  Napøíklad pokud je tøeba urèit
	typ èíselníkového políèka (je jiný ne¾ String), je tøeba mu
	správnì pøedat v¹echny argumenty vèetnì enumerátoru, tak¾e v tomto
	pøípadì nelze spoléhat na automatické vytvoøení enumerátoru podle
	specifikace `codebook'.  Øe¹ení v¹ak není triviální, tak¾e
	prozatím zkusme vystaèit s tímto omezením.

	Nastavení pozice oddìlovaèe duálního formuláøe je nyní ukládáno
	jako stavová informace o formuláøi.

	Pokud je pøi vyvolání èíselníku v políèku vyplnìna nevalidní
	hodnota, zaèni automaticky inkrementální vyhledávání podle této
	hodnoty.

2006-11-23  Tomas Cerha  <cerha@brailcom.org>

	V kontextovém menu záhlaví sloupce pøibyla nyní funkce
	"Autofiltr".  Umo¾òuje vyfiltrovat tabulku podle výbìru z
	"distinct" hodnot daného sloupce.  Funkce není dostupná pro
	virtuální sloupce a pro sloupce obsahující více ne¾ 60 rùzných
	hodnot.

2006-11-22  Tomas Cerha  <cerha@brailcom.org>

	Jako argument `layout' ve ViewSpec je nyní mo¾né pou¾ít také
	prostý seznam identifikátorù políèek.  V tom pøípadì bude layout
	sestaven vertikálním poskládáním vyjmenovaných políèek.

	Vstupní políèka výètových typù nyní v¾dy zobrazují hodnotu danou
	specifikací `display'.  Díky tomu je mo¾né ve výbìru zobrazit
	textový popis a ne vnitøní kód èíselníku.  Tím je koneènì mo¾né
	rozumné vyu¾ití políèek typu CHOICE, RADIO_BOX a SELECT_BOX
	namísto obyèejných èíselníkových políèek.

	* BUGFIX: Nastavování focusu pøi inicializaci aplikace nyní
	zohledòuje pøípadné formuláøe otevøené bìhem inicializace
	aplikace.  Díky tomu se nestane, ¾e takto otevøené formuláøe po
	startu aplikace nedostanou focus, jako tomu bylo napøíklad v isasu
	pøi zobrazení kontrolních náhledù.
	
2006-11-21  Tomas Cerha  <cerha@brailcom.org>

	V `pytis.presentation' pøibyla nová tøída `Specification' pro
	zjednodu¹ení tvorby specifikací.  Tøída sestavuje specifikace
	automaticky na základì hodnot atributù, tak¾e lze snadno vytváøet
	varianty specifikací pouhým pøedefinováním potøebných atributù v
	odvozené tøídì.  Dal¹í podstatné zjednodu¹ení spoèívá v tom, ¾e
	tøída automaticky vytváøí datovou specifikaci pouze na základì
	fields, tak¾e by ji¾ vùbec nemìlo být potøeba datové specifikace
	udr¾ovat.  Více viz dokumentace tøídy.
	
2006-11-20  Tomas Cerha  <cerha@brailcom.org>

	Resolver nyní ke¹uje instance specifikaèních tøíd.  Pøi vytváøení
	tìchto instancí je konstruktoru nyní navíc pøedáván resolver jako
	první argument.

2006-11-16  Tomas Cerha  <cerha@brailcom.org>

	Bylo slouèeno zji¹»ování u¾ivatelské hodnoty èíselníku (displeje)
	z nìkolika míst do tøídy PresentedRow.  Díky tomu jsou nyní ve
	v¹ech pøípadech podporovány v¹echny mo¾nosti specifikace displeje
	uvedené ve specifikaci.  Displej urèený v `cb_spec' lze
	pøedefinovat ve `FieldSpec' a je mo¾né specifikovat jak název
	sloupce, tak libovolnou funkci, nebo také dvojici - funkce, název
	sloupce.  Více viz dokumentace `CodebookSpec'.

	Reslover nyní umo¾òuje pracovat i se specifikacemi, které namísto
	prostých specifikaèních funkcí umo¾òují volat metody
	specifikaèních tøíd.  Pokud název specifikaního modulu obsahuje
	teèky, jde o název modulu a tøídy v nìm obsa¾ené.  Název modulu
	mù¾e v tomto pøípadì také obsahovat názvy adresáøù (oddìlené
	rovnì¾ teèkami).  Napøíklad název 'ucetnictvi.denik.UcetniDenik'
	znamená, ¾e v adresáøi 'ucetnictvi' bude hledán soubor 'denik.py'
	a v nìm tøída 'UcetniDenik'.  Pokud je tøída nalezena, je zavolána
	její metoda 'spec_name', té jsou pøedány dané klíèové argumenty a
	výsledek je vrácen.  Pokud v názvu teèky nejsou, jde o "starou"
	specifikaci a v¹e funguje tak jako døíve.  Tato vymo¾enost by mìla
	v budoucnu umo¾nit zjednodu¹ení specifikací a vyu¾ití dìdiènosti
	pøi tvorbì variant.  Na základních tøídách, které to umo¾ní se
	pracuje.

2006-11-08  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opravena nekompatibilita s novou verzí LCG, která se
	projevovala pøi zobrazení dialogù s formátovaným textem (napø. pøi
	Alt-F6).

	* BUGFIX: Datový typ Boolean nyní pracuje správnì i s NULL hodnotami.

2006-11-03  Tomas Cerha  <cerha@brailcom.org>

	Modul pro generování nápovìdy v pytis-extensions byl aktualizován
	podle nového API LCG, tak¾e pro generování nápovìdy je nyní tøeba
	aktualizovat na nejnovìj¹í verzi LCG (z CVS).  Novì je nyní do
	popisu náhledu generován také seznam v¹ech políèek z layoutu a
	seznam v¹ech souvisejících náhledù (èíselníky a odkazy).

2006-11-02  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Platnost tøídících sloupcù je nyní kontrolována i pro
	argumenty konstruktoru, tak¾e se ji¾ napø. nenastane chyba pøi
	zobrazení formuláøe po pøesmìrování kdy¾ otvíraný formuláø
	neobsahuje sloupce, podle kterých bylo v pùvodním formuláøi
	tøídìno.

	* BUGFIX: Závislosti pøi dopoèítávání editovatelnosti a runtime
	filtrù jsou nyní procházeny rekurzivnì, tak¾e staèí uvádìt pouze
	políèka, ze kterých je hodnota skuteènì vypoètena a ne i políèka
	na kterých tato políèka závisí (skrze computer), jak tomu bylo
	doposud.
	
2006-10-11  Tomas Cerha  <cerha@brailcom.org>

	Jako argument `link' ve `FieldSpec' je nyní mo¾no uvést i sekvenci
	odkazù.  V tom pøípadì budou pou¾ity v¹echny tyto odkazy.  Jeden
	odkaz je i nadále mo¾né uvést pøímo, bez obalování do tuplu.
	
	Do CVS pøibyly nové ikony pøíkazù.  K jejich vyu¾ití je tøeba v
	konfiguraèních souborech v¹ech projektù nastavit konfiguraèní
	volbu `icon_dir' na absolutní cestu k adresáøi icons z CVS pytisu.

	* BUGFIX: V pytis.extensions byly opraveny funkce pro naèítání
	defsù s ohledem na nový zpùsob odkazování na duální formuláøe.

	* BUGFIX: Také funkce pro generování nápovìdy nyní pracují s novou
	notací zápisu názvu duálních formuláøù.  Je tøeba dbát, aby název
	souboru s popisem duálního formuláøe odpovídal zpùsobu, jakým se
	na formuláø odkazuji z menu.  Pokud se tedy odkazuji jako
	'Hlavni::Vedlejsi', potom se soubor s nápovìdou musí jmenovat
	'Hlavni::Vedlejsi.txt'.  Pøídavné oznaèení '-dual' ji¾ tedy není
	potøeba.  Pokud se ale v aplikaci na specifikaci odkazuji starým
	zpùsobem (Specifikace není pøevedena na `BindingSpec'), '-dual'
	zùstává.
	
2006-10-10  Tomas Cerha  <cerha@brailcom.org>

        Hodnota argumentu `display' ve `FieldSpec', nebo `CodeookSpec'
	mù¾e nyní být i funkce jednoho argumentu.  V tom pøípadì je
	zobrazená hodnota urèena voláním této funkce s vnitøní hodnotou
	èíselníku jako argumentem.
	
	* BUGFIX: Ulo¾ené nastavení tøídìní je nyní ignorováno kdy¾
	sloupeèky neexistují v datovém objektu.  Døíve byly chybnì
	kontrolovány pouze oproti fields, èím¾ nebyly vyøazeny virtuální
	sloupce.

	* BUGFIX: Webový formuláø se nyní vypoøádá i s prázdnou hodnotou v
	èíselníku.

2006-10-06  Tomas Cerha  <cerha@brailcom.org>

	Ve specifikaci `Link' byl argument `form', kterým se specifikovala
	pøímo formuláøová tøída, nahrazen argumentem `type', který je
	konstantou nové tøídy `FormType'.  Typ otevíraného formuláøe je
	tak urèen automaticky a specifikace tak abstrahuje od konkrétních
	tøíd u¾ivatelského rozhraní.  Urèujeme pouze úèel, za kterým je
	formuláø otevírán.  Momentálnì existují konstanty BROWSE, EDIT,
	INSERT a SHOW.  Jako pøímý dùsledek této zmìny je mo¾nost
	specifikovat odkaz pro vlo¾ení nového záznamu (konstanta INSERT).
	Pro otevøení duálního formuláøe je tøeba jako parametr `name'
	pou¾ít název duální specifikace v novém tvaru
	"HlavniDefs::VedlejsiDefs" (s pou¾itím `BindingSpec' namísto
	`DualSpec').  Pro duální specifikaci je prozatím povolen pouze
	odkaz typu BROWSE.  Pokud nìkdo má nìjaký smysluplný pøíklad i pro
	jiné typy, není problém to roz¹íøit. 

	Pøi odchytávání výjimek v databázovém rozhraní je nyní pùvodní
	výjimka pøedána vèetnì v¹ech informací.  Díky tomu je v bug-reportu
	zobrazen skuteèný traceback pùvodní výjimky, ne jen traceback od
	místa, kde byla odchycena.  To zásadnì usnadní ladìní.
	
	* BUGFIX: Pøevod instancí Row a Value na øetìzec nyní probìhne bez
	chyb i pokud hodnoty obsahují unicode øetìzce nepøevoditelné do
	systémového kódování.  Díky tomu je mo¾né v databázi pracovat se
	v¹emi unicode znaky (pokud je správnì nastaveno také
	db_encoding).  Døíve to ne¹lo, proto¾e operace zhavarovali na
	logování.

2006-10-03  Tomas Cerha  <cerha@brailcom.org>

	Specifikace tøídìní se nyní prování pomocí konstant
	`pytis.data.ASCENDENT' a `pytis.data.DESCENDANT', ne
	`pytis.form.LookupForm.SORTING_ASCENDENT' a
	`pytis.form.LookupForm.SORTING_DESCENDANT'.  Zároveò byly zmìnìny
	konstanty `ASC' a `DESC' v pytis.extensions, tak¾e v¹ude tam, kde
	je pou¾íváno `ASC' a `DESC' by nemìlo být zapotøebí ¾ádných úprav
	defsù.  Pøesto bude dobré ovìøit, zda se v nìkterých star¹ích
	defsech konstanty `pytis.form.LookupForm.SORTING_*' nevyskytují.

	V pytis.extensions jsou nyní v¹echny identifikátory z pytis.form
	importovány jen pokud byl ji¾ døíve modul pytis.form importován.
	To nastává jen ve wx aplikaci, tak¾e v jiných pøípadech bude
	pytis.extensions na pytis.form (a pota¾mo tedy i na wx) nezávislé.

2006-08-14  Tomas Cerha  <cerha@brailcom.org>

	V pytis-extensions pøibyla nová funkce `nextval', kterou je mo¾no
	pou¾ívat pro zjednodu¹ení zápisu `default' hodnoty naèítané ze
	sekvence.  Staèí uvést napøíklad:
	
	   default=nextval('zakazka_zakazka_id_seq')

	Dále je v pytis-extensions novì mo¾nost v konstruktoru `DBConfig'
	urèit callback, který bude zavolán pøi ka¾dé zmìnì v datovém
	objektu.  Tím je mo¾no napøíklad aktualizovat pole stavové øádky...
	
2006-08-14  Tomas Cerha  <cerha@brailcom.org>

	Byla zru¹ena automatická konverze øetìzcù pocházejících z defsù
	pomocí gettext.  V praxi by to bylo stejnì nepou¾itelné, proto¾e
	by øetìzce nebylo podle èeho z defsù vyextrahovat.  Tam, kde se
	pøedpokládá pøeklad, je nutné øetìzce pøímo v defsech oznaèit
	obalením funkcí `_'.  Tato zmìna znamená také to, ¾e øetezce,
	které takto obalené nejsou, nejsou v rámci Pytis typu `unicode',
	ale `str'.  To by teoreticky nemìlo znamenat ¾ádné problémy, ale
	pøesto bude vhodné chování nejprve otestovat a mít pøi pøípadných
	problémech toto na pamìti.
	
2006-08-07  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi sestavování formuláøe jsou nyní správnì zpracovány
	horizontální skupiny.  Døíve byla v¹echna políèka horizontální
	skupiny pøidávána jako "kompaktní", aèkoliv pøíznak `compact'
	nastaven nemìla.  Bude dobré zkontrolovat, zda se s tímto chybným
	chováním v nìkterých formuláøích nepoèítalo.
	
2006-08-01  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi inicializaci vstupních políèek byl za urèitých
	okolností nastaven callback pøeskoèení políèka vícekrát.  To
	zpùsobilo, ¾e nìkdy bylo pøi navigaci pøeskoèeno kromì
	needitovatelného políèka je¹tì políèko následující.
	
2006-07-24  Tomas Cerha  <cerha@brailcom.org>

	Sestavování kontextového menu øádku bylo urychleno pøesunutím
	èásti operací do konstruktoru.  Mírnì se tím zpomalí start
	formuláøe, ale zobrazení kontextového menu je ji¾ rychlé.

	Polo¾ky odkazù v kontextovém menu øádku odkazující na stejný defs
	jsou nyní seskupovány do podmenu.  Ka¾dé podmenu obsahuje odkazy
	pøes v¹echny související sloupce.  Proto¾e v¹ak èasto více sloupcù
	obsahuje stejnou hodnotu, stálo by za úvahu, zda není dostaèující
	vytvoøit polo¾ky pouze pro rùzné cílové hodnoty.  Tím sice
	u¾ivatel ztratí informaci o tom, ze kterého sloupce která hodnota
	pochází, ale zase bude menu pøehlednìj¹í...
	
2006-07-21  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi odesesílání 'Question' dialogu pomocí Ctrl+Enter ji¾
	nedojde k tracebacku, ale je správnì pou¾ito tlaèítko výchozí
	odpovìdi.
	
2006-07-10  Tomas Cerha  <cerha@brailcom.org>

        Zru¹eno automatické vkládání øádkù do sideformu po vlo¾ení záznamu
	v mainformu.
	
2006-06-22  Tomas Cerha  <cerha@brailcom.org>

        Automaticky generované titulky odskokù byly upraveny podle návrhù.
	
	* BUGFIX: Urèení titulku odskoku pøi sestavování kontextového menu
	nyní funguje i pro duální formuláøe.
	
2006-06-21  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opraveno procházení políèek v novém uspoøádání EditFormu
	s vyu¾itím nových mo¾ností wx.
	
	
2006-06-15  Tomas Cerha  <cerha@brailcom.org>

	Nová tøída `Link' a argument `link' ve `FieldSpec' nyní umo¾òují
	definovat odkazy do jiného náhledu souvisejícího s hodnotou
	políèka.  V kontextovém menu øádku bude pro ka¾dý definovaný odkaz
	vytvoøena jedna polo¾ka umo¾òující odskok do odkazovaného náhledu
	s vyhledáním záznamu odpovídajícího aktuální hodnotì políèka.  Do
	budoucna je mo¾né roz¹íøení o mo¾nost "výpoètu" názvu specifikace
	podle obsahu aktuálního øádku a podobnì o "výpoèet" argumentu
	`select_row' pøedáním funkce, která dostane aktuální øádek jako
	argument.  Prozatím lze pøedat pouze statické hodnoty.

	Byl zru¹en pøíkaz 'SHOW_CELL_CODEBOOK' a související polo¾ka menu
	"Zobrazit související èíselník".  Namísto toho je nyní vytváøen
	automaticky seznamem odskokù na v¹echny èíselníky v¹ech políèek.
	Vyhoda je ta, ¾e odskoky mají stejnou formu, jako ostatní odkazy a
	¾e jsou dostupné v¹echny naráz a není tedy nutné klikat zrovna nad
	daným èíselníkovým sloupcem.  Døíve byl obsah menu v podstatì
	závislý na aktuálním sloupci, co¾ nemuselo být z u¾ivatelského
	hlediska zcela patrné.  Dal¹í výhoda je ta, ¾e odkazy na náhledy,
	k nim¾ u¾ivatel nemá dostateèná práva, budou nyní automaticky
	za¹edlé.

	
2006-06-14  Tomas Cerha  <cerha@brailcom.org>

	Byl zásadnì pøepracován zpùsob sestavování editaèních formuláøù ve
	snaze zlep¹it vlastnosti formuláøe pøi scrollování a implementovat
	scrollování podle nového mechanismu wx.  První výsledek je ten, ¾e
	nyní není scrollován celý formuláø vèetnì nadpisu a tlaèítek, ale
	pouze vlastní plocha obsahující vstupní prvky.  Napøíklad v
	DescriptiveDualFormu se tak náhledový formuláø chová z pohledu
	scrollování stejnì, jako øádkový formuláø.  Druhý viditelný
	výsledek je ten, ¾e pøi zobrazení popup editaèního formuláøe je
	velikost jeho okna automaticky omezena, aby nepøekroèila velikost
	obrazovky a obsah je automaticky scrollován, pokud je to potøeba.
	
	Doposud mají popup formuláøe (výbìr z èíselníku a editaèní
	formuláø) pøednastavenu fixní velikost.  Nyní by bylo mo¾né
	povolit interaktivní zmìnu velikosti u¾ivatelem (napø. pøeta¾ením
	my¹í apod.).  Bude v¹ak tøeba otestovat jak se to chová ve spojení
	s rùznými mana¾ery oken, tak¾e jsem to zatím ponechal zakázané.
	Myslím ale, ¾e by to mohlo být praktické, zejména u èíselníkù.

	I editaèní formuláøe nyní podporují metodu 'refresh()' a je tedy
	mo¾né nad nimi vyvolat pøíkaz REFRESH (Ctrl-l) a vynutit tak
	pøekreslení.  To se mù¾e hodit zejména pøi scrollování, kdy díky
	chybì ve wx není správnì pøekreslováno orámování skupin a formuláø
	je tak po chvíli pìknì zaneøádìný...

	Byl zru¹en arguemnt `related_codebook_field' ve `FieldSpec' a
	funkce `cb_computer' v pytis.extensions.  Obojí je nahrazeno
	pomocí `CbComputer'.

	* BUGFIX: Výchozí layout je nyní opìt vertikální.  Po vèerej¹í
	opravì se toti¾ projevila chyba v jeho sestavování, která v¹ak
	kvùli døívìj¹ímu nesprávnému chování dosud nevy¹la najevo.
	
	
2006-06-13  Tomas Cerha  <cerha@brailcom.org>

	Nová tøída `BindingSpec' umo¾òuje definovat zpùsob napojení dvou
	formuláøù do duálního formuláøe.  Narozdíl od døívìj¹í `DualSpec'
	v¹ak ji¾ nedefinuje název hlavního a vedlej¹ího formuláøe a
	nepodporuje nìkteré zavr¾ené atributy, jako byly `side_cilumns' a
	`side_title' a argument `title' je zde povinný.  I zpùsob pou¾ití
	je odli¹ný a poèítá s novou notací názvu specifikace duálního
	formuláøe.  Ten nyní obsahuje název specifikace hlavního i
	vedlej¹ího formuláøe oddìlené dvojteèkou --
	napø. `Faktury::Polozky'. Pøíslu¹ná specifikace napojení je potom
	hledána jako `binding_spec' ve specifikaci hlavního formuláøe.
	Více viz dokumentace `BindingSpec'.

	V pøechodné fázi je mo¾né pou¾ívat jak starý zpùsob definice
	duálních formuláøù pomocí `dual_spec', tak nový zpùsob s pou¾itím
	`binding_spec'.  Na staré duální formuláøe se odkazujeme jako
	døíve pouze jednoduchým názvem.  Jakmile se v¹ak chceme odkazovat
	novým slo¾eným názvem, je tøeba `dual_spec' nahradit pomocí
	`binding_spec'.  Funkènost tohoto kombinovaného zpùsobu v¹ak
	doporuèuji nejdøíve otestovat -- zejména ovìøit zda fungují
	nejrùznìj¹í pøechody z jednoho typu formuláøe do druhého.  Po
	zru¹ení `dual_spec' je samozøejmì tøeba v¹echny odkazy na danou
	specifikaci nahradit novou notací obsahující názvy hlavního a
	vedlej¹ího náhledu.

	Nový argument `orientation' (pou¾itelný jak v DualSpec tak v
	BindingSpec) umo¾òuje urèit orientaci duálního formuláøe, tak¾e
	kromì horizontálního rozdìlení, které je stále výchozí, je mo¾né
	pro nìkteré formuláøe zvolit také vertikální rozdìlení.  Více viz
	dokumentace konstruktoru `BindingSpec'.

	Byl zdokonalen zpùsob urèení pozice oddìlovaèe v duálních
	formuláøích pøi zmìnì rozmìrù okna.  Pokud je jedním z oken
	editaèní formuláø, bude jeho velikost zachovávána.  Dva øádkové
	formuláøe se v horizontálním rozlo¾ení rozpínají rovnomìrnì, ve
	vertikálním je zachovávána velikost levého formuláøe.  Také urèení
	poèáteèní polohy oddìlovaèe je pøi pøítomnosti editaèního
	formuláøe øízeno jeho ¹íøkou/vý¹kou.
	
	* BUGFIX: Polo¾ky horizontální skupiny v LayoutSpec ji¾ nejsou
	sdru¾ovány pod sebe.  Toto chybné chování døíve znemo¾òovalo
	umístit políèka vedle sebe vertikálnì -- fungovalo pouze
	vertikální spojení celých skupin, tak¾e to ¹lo obejít obalením
	ka¾dého políèka do vlastní skupiny.  Nyní ji¾ nic takového není
	potøeba.  Tato zmìna by v¹ak teoreticky mohla zpùsobit zmìnu
	layoutu nìkterých existujících formuláøù, pokud se ve specifikaci
	vyskytla horizontální skupina, která se sice vykreslila jako
	vertikální, ale byla tak ponechána a následnì se s tímto
	rozvr¾ením ji¾ poèítalo...
	
	* BUGFIX: Byla nastavena minimální velikost jednotlivých
	podformuláøù v duálním formuláøi, díky èemu¾ ji¾ nelze jeden z
	nich uzavøít pøeta¾ením oddìlovaèe a¾ na okraj a nebo dvojklikem
	na oddìlovaèi.
	
	* BUGFIX: Po zmìnì pomìru formuláøù v duálním fomruláøi (pøeta¾ení
	oddìlovaèe my¹í) je pøenastaven focus na aktivní formuláø, proto¾e
	jinak formuláø pøestal reagovat na klávesy.

2006-06-12  Tomas Cerha  <cerha@brailcom.org>
	
	* BUGFIX: Opravena priorita pøi urèení datového typu sloupce na
	základì CbComputer.  Nyní má pøednost typ z datového objektu a
	teprve pokud není sloupec v datovém objektu, je pou¾it datový typ
	odpovídajícího sloupce v datovém objektu enumerátoru.  Tím 

	* BUGFIX: Opravena chyba, která zpùsobovala tisk první polo¾ky
	tiskového menu pøi výbìru libovolné jiné polo¾ky.
	
	* BUGFIX: Pokus o zobrazení informace z èíselníku ve stavovém
	øádku je nyní podmínìn také existencí enumerátoru, nejen znalostí
	názvu specifikace èíselníku.

2006-06-09  Tomas Cerha  <cerha@brailcom.org>

	Doplòeny asserty na správnost definice CbComputer, které mohou
	pomoci odhalit pøíèinu chyby.

2006-06-08  Tomas Cerha  <cerha@brailcom.org>

	Výchozí chování metody `original_row' bylo vráceno na pùvodní
	stav, kdy je prázdný záznam vrácen jako instance `PresentedRow'.
	Chování, které potøebujeme v metodì `RecordForm._current_key()',
	tedy ¾e je prázdný záznam vracen jako `None' lze vynutit novým
	nepovinným argumentem `empty_as_none'.  Tím je zamezeno chybám,
	které díky zmìnì chování vznikly v defsech, které s None, jako
	návratovou hodnotou nepoèítaly.

	Byla zru¹ena tøída NullApplication a upraveny nìkteré funkce v
	application.py, aby se nehroutily i v pøípadì, ¾e zrovna ¾ádná
	aplikace neexistuje.  Tím je mo¾né knihovny a zejména defsy naèíst
	i v jiném kontextu ne¾ ze samostatné aplikace (napø. ve webovém
	rozhraní, nebo pøi generování nápovìdy).
	
	* BUGFIX: Oprava assertu ve funkci `pytis.util.set_resolver()'
	
2006-06-02  Tomas Cerha  <cerha@brailcom.org>

	V modulu `pytis.util.resolver' pøibyly nové funkce `resolver()' a
	`set_resolver()', které slou¾í k získání a nastavení globálního
	resolveru.  Díky tomu bylo mo¾no odstranit správu resolveru z
	tøídy `Application'.  Tím je práce s resolverem nezávislá na
	modulu `pytis.form' a není jej tak nutno importovat napøíklad v
	`pytis.presentation'.

	* BUGFIX: Argument `side_binding_column' v `DualSpec' ji¾ není
	vy¾adován.  None hodnota znamená stejný sloupec jako
	`binding_column', co¾ odpovídá dokumentaci.

	* BUGFIX: Pokus o vlo¾ení øádku v inline editaci je zamítnut,
	pokud chybí nìkterý NOT NULL sloupec.  Pokud v¹ak sloupec chybìl
	ve fields, skonèila kontrola tracebackem.  Nyní jsou sloupce,
	které nejsou ve fields tolerovány, proto¾e se dá pøedpokládat, ¾e
	mají v databázi default hodnotu (Pokud by nemìly, tak je to chyba,
	proto¾e by záznam ne¹el vlo¾it ani v editaèním formuláøi).  Dále
	nejsou vy¾adovány ty sloupce, jejich¾ hodnota je urèena pomocí
	prefill (typicky v SideFormu duálního formuláøe).

	* BUGFIX: Pøi pou¾ití políèka typu CHOICE je po inicializaci
	NULL hodnotou zobrazena první hodnota výbìru (NULL se ve výbìru
	nevyskytuje).  Problém v¹ak byl v tom, ¾e pøi pøeètení hodnoty
	byla vrácena prázdná hodnota, pøesto¾e u¾ivatel vidí první
	hodnotu jako vybranou.  To je nyní opraveno tak, ¾e políèko v¾dy
	vrací tu hodnotu, která je vidìt jako vybraná.
	
2006-05-31  Tomas Cerha  <cerha@brailcom.org>

	Nový pøíkaz RESET_FORM_STATE zahodí ve¹kerá u¾ivatelská nastavení
	formuláøe (na rozdíl od existujícího pøíkazu RELOAD_FORM_STATE,
	který zahodí pouze nastavení provedená bìhem posledního spu¹tìní
	formuláøe).  Tento pøíkaz nahrazuje také pøíkaz RESET_COLUMNS,
	který obnovil pouze zobrazené sloupce, ale ji¾ neobnovil tøídìní,
	seskupování atd.  Pøíkaz RESET_FORM_STATE je dostupný pøes novou
	klávesovou zkratku "Ctrl-Shift-Backspace" (pøíkaz
	RELOAD_FORM_STATE má zkratku "Ctrl-Backspace").  Oba pøíkazy byly
	doplnìny do hlavního menu pøíkazù a byly doplnìny metody, které
	zabezpeèí, ¾e jsou aktivní pouze pokud k nìjakým zmìnám do¹lo.
	Pøíkaz RESET_FORM_STATE je dále dostupný z kontextového menu
	sloupce na místì, kde býval zru¹ený pøíkaz RESET_COLUMNS.

	Z menu pøíkazù byly odstranìny nìkteré pøíkazy, které jsou
	dostupné pøes kontextové menu øádku.

	Byla pødána ikona pro pøíkaz Form.COMMAND_HELP.

	* BUGFIX: Pøi zobrazování kontextového menu je nejprve
	initializována klávesová mapa, tak¾e klávesové zkratky jsou v menu
	nyní v¾dy viditelné.
	
2006-05-30  Tomas Cerha  <cerha@brailcom.org>
	
	Nový pøíkaz `LookupForm.COMMAND_UNFILTER', navázaný na klávesovou
	zkratku `Ctrl-Shift-F4', zru¹í filter.  Chování je nyní takové, ¾e
	stávající filtrovací podmínky zùstanou ve filtrovacím dialogu
	navolené, ale nejsou aktivní a neuplatní se napøíklad ani po
	následném pøidání filtrovací podmínky pomocí pøíkazu "Filtrovat
	podle buòky".  To je dobøe, proto¾e u¾ivatel ji¾ nemusí o døíve
	navolených podmínkách vìdìt, ale mù¾e to být matoucí ve chvíli,
	kdy dialog otevøe a vidí tam jak stávající platné podmínky, tak
	pøedchozí neplatné podmínky.  Pøi následném filtrování z
	otevøeného dialogu se ji¾ uplatní v¹echny podmínky.  Pokud nìkdo
	má nápad, jak by se to mohlo chovat lépe, tak jej uvítám, ale
	realizace mù¾e být pomìrnì komplikovaná kvùli souèasné
	implementaci filtrovacích dialogù (dal¹í dùvod pro pøepis).

	Zpracování pøíkazù ve tøídì ListForm bylo pøevedeno na nový
	zpùsob.  Vìt¹inu pøíkazù jsem otestoval, ale zmìn bylo dost, tak¾e
	bych s nasazováním do ostrého provozu byl pokud mo¾no opatrný...

	Kvùli ní¾e popsané opravì je nyní v metodì select_row hlá¹eno
	nenalezení øádku i v nìkterých døíve ignorovaných situacích.
	Teoreticky by to tak mìlo být správnì, ale nedá se vylouèit, ¾e v
	nìkterých situacích teï bude dialog "Záznam nenalezen" vyskakovat
	nechtìnì.  Takové situace je tøeba zaznamenat (napø. do TODO).

	* BUGFIX: Pøi vyhledání øádku urèeného argumentem `select_row' je
	brána v úvahu aktuální filtrovací podmínka.  Díky tomu je
	u¾ivateli oznámeno nenalezení øádku pøi pøepnutí do existujícího
	formuláøe ve kterém byl pøedtím zapnutý filter, pokud hledaný
	øádek není mezi aktuálnì vyfiltrovanými øádky.
	
2006-05-29  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi pokusu o výbìr neexistujícího øádku v ListFormu je
	nyní korektnì zobrazena chybová zpráva.
	
	* BUGFIX: Pøi pøíkazu "Skok na záznam" je pou¾íván `InputDialog'
	namísto nefunkèního `InputNumeric'.
	
	* BUGFIX: Procházení záznamù v ShowFormu nyní funguje v¾dy,
	a nekoliduje s voláním `select_row'.  To, vzhledem k tomu, ¾e
	select_row je voláno pøi ka¾dém otevøení showformu, zpùsobovalo,
	¾e procházení v podstatì nikdy nefungovalo a navíc nefungovalo ani
	vyhledávání, skok na záznam atd.
	
	* BUGFIX: Pøi zji¹tìní handleru pøíkazu je navíc testována tøída a
	pokud neodpovídá, je handler brán jako nedostupný.  Tím je
	zabránìno napø. tracebacku pøi pokusu o otevøení menu pøíkazù nad
	ShowFormem nebo pøi pokusu o spu¹tìní pøíkazu ListFormu nad ShowFormem.
	
2006-05-25  Tomas Cerha  <cerha@brailcom.org>

	V pytis-extensions byly v kódu pro generování nápovìdy
	implementovány nové funkce pro výpis pøehledu akcí kontextového
	menu.  V souvislosti s tím doporuèuji doplnit popisy akcí do
	defsù, aby v nápovìdì byl kromì názvu také struèný popis ka¾dé
	akce.  Popis lze definovat pomocí argumentu `descr' konstruktoru
	`Action'.  Stejný popis je zobrazen také ve stavovém øádku
	aplikace kdy¾ u¾ivatel zvýrazní danou polo¾ku v kontextovém menu.
	Aby se seznamy akcí v nápovìdì objevily, je nutné ji
	pøegenerovat...
	
2006-05-24  Tomas Cerha  <cerha@brailcom.org>

	Definice klávesové zkratky, obsahující prefix, který ji¾ je
	pou¾it k vyvolání koncového pøíkazu (není prefixem), nyní není
	povolena a problém je logován.
	
	* BUGFIX: Opravena chyba znemo¾òující vyvolání èíselníku.
	
2006-05-23  Tomas Cerha  <cerha@brailcom.org>

	Nápovìda Pytisu byla aktualizována (pøidán popis nových
	vlastností).  Doporuèuji pøegenerovat soubory nápovìdy (spustit
	make v koøenovém adresáøi cvs modulu `pytis-help' a rozmístit
	výsledný soubor `pytis.zip' na v¹echny stroje, odkud je spou¹tìn
	Pytis.
	
2006-05-22  Tomas Cerha  <cerha@brailcom.org>
	
	* BUGFIX: Pøi nastavování klávesových zkratek akcí v lokální
	klávesové mapì `ListForm' je specifikace akcí pøevádìna na prostý
	seznam.  Tím je zabránìno chybì pøi otevírání náhledu, který má
	seznam akcí s vnoøenými seznamy a skupinami.
	
2006-05-19  Tomas Cerha  <cerha@brailcom.org>

        Byly implementovány nové pøíkazy cut, copy, paste a select-all pro
	vstupní políèka.  Tyto pøíkazy byly pøidány do kontextového menu
	vstupních políèek.

	Byla implementována podpora pro zobrazování ikon u polo¾ek menu.
	Ikony jsou asociovány s jednotlivými pøíkazy.  Polo¾ka menu ikonu
	zobrazí automaticky, pokud je k jejímu pøíkazu nìjaká ikona
	pøiøazena.  Zatím bylo definováno jen nìkolik základních ikon.
	Viz konstanta `WX_COMMAND_ICONS' v `commands_.py'.  Zatím jsou
	pou¾ívány jen standardní ikony `wxWidgets' (viz "Using
	Images/ArtProvider" ve wxdemo).  Pokud nìkdo ví, kde sehnat nìjaké
	dal¹í pou¾itelné ikony, bylo by mo¾né vyu¾ít i jiné.
	
	* BUGFIX: V¹echny pøíkazy tøíd LookupForm a RecordForm jsou nyní v
	PopupEditFormu zakázány.  Døíve tak bylo mo¾no napøíklad vyvolat
	tøídící dialog nad editaèním formuláøem apod.
	
	* BUGFIX: Klávesové zkratky kontextových akcí jsou nyní definovány
	v lokální klávesové mapì ji¾ v konstruktoru formuláøe, tak¾e jsou
	dostupné ihned.  Døíve to bylo a¾ po prvním otevøení kontextového
	menu.

	* BUGFIX: Pøi kopírování klávesové mapy jsou nyní kopírovány i
	jednotlivé klávesové definice, proto¾e jinak docházelo pøi
	definici kláves v odvozené klávesové mapì i k pøedefinování kláves
	v pùvodní klávesové mapì (pokud pro stejnou klávesu ji¾ byly
	definovány jiné pøíkazy -- ty jsou toti¾ uchovávány jako list).
	
2006-05-18  Tomas Cerha  <cerha@brailcom.org>

	Byla implementována podpora pro zobrazování nápovìdy ve stavové
	øádce pro polo¾ky popup-menu.  Doposud to fungovalo jen u polo¾ek
	hlavního menu, nyní se zobrazuje nápovìda i u polo¾ek kontextového
	menu v BrowseFormu a kontextového menu vstupních políèek.

	* BUGFIX: V `ListField' byla opravena chyba, která znemo¾òovala
	vybrat první polo¾ku seznamu pomocí my¹i.
	
	* BUGFIX: Výbìr polo¾ky v `ListField' je mo¾ný pouze pokud je
	políèko editovatelné.

2006-05-17  Tomas Cerha  <cerha@brailcom.org>
	
	Byl komplentì pøepracován mechanismus uzavírání oken a provádìní
	cleanup kódu formuláøù.  Byly k tomu dva dùvody.  Zaprvé jsem
	zjistil, ¾e popup formuláøe po svém uzavøení sice nejsou pøítomny
	v u¾ivatelském rozhraní, ale jejich objekty stále ¾ijí.  To mohlo
	vést k zaná¹ení pamìti.  Zajímalo by mne, jestli nebylo pozorováno
	postupné zpomalování aplikace po del¹ím pou¾ívání a zda to teï
	bude lep¹í.  Uzavøené formuláøe jsou nyní ka¾dopádnì likvidovány
	dùslednì.  Druhý dùvod byl ten, ¾e nebylo korektnì o¹etøeno
	uzavøení formuláøe ve v¹ech situacích.  Napøíklad pokud rozedituji
	øádek a pøepnu se do jiného formuláøe (chci si nìco zkontrolovat)
	a zavøu aplikaci (zapomenu, ¾e jsem mìl rozeditovaný øádek), bude
	formuláø uzevøen a zmìny budou zahozeny bez mo¾nosti zásahu
	u¾ivatele.  To by nyní mìlo být v¹e o¹etøeno správnì.  Vzhledem k
	tomu, ¾e jde o pomìrnì citlivou zále¾itost (pøípadné chyby mohou
	zpùsobovat segfaulty apod), prosím o dostateèné otestování.

	Dále byl implementován nový pøíkaz
	`Applcation.COMMAND_RAISE_RECENT_FORM', který vyzvedne
	pøedposlední aktivní okno, tj. okno, které bylo aktivní pøed tím,
	ne¾ se souèasné okno stalo aktivním.  Tím je v dùsledku umo¾nìno
	se jednodu¹e cyklicky pøepínat mezi dvìma poslednì aktivními okny.
	Pøíkaz je navázán na klávesovou zkratku `Ctrl-w'.

	Do menu pøíkazù byly doplnìny také krátké popisy jednotlivých
	pøíkazù, které jsou zobrazovány ve stavové øádce pøi procházení
	menu.  Drobný problém mù¾e být, pokud je okno aplikace malé a
	rozbalené menu tak stavovou øádku pøekrývá.  Proto bych navrhoval
	pøíkazy seskupit do podmenu, co¾ by mìlo i tu výhodu, ¾e by bylo
	mo¾né pøidat do menu pøíkazù více.
	
	* BUGFIX: Rozeditovaný formuláø ji¾ není potichu uzavøen pøi
	pokusu o ukonèení aplikace, ale u¾ivatel má mo¾nost zmìny ulo¾it.
	
	
2006-05-15  Tomas Cerha  <cerha@brailcom.org>

	Globální funkce `run_form()' nyní nevolá pøímo metodu aplikace, ale
	pøíkaz `Application.COMMAND_RUN_FORM'.  Pokud otevøení formuláøe
	není mo¾né (napø. kvùli právùm, apod.), není pøíkaz vyvolán a je
	zobrazena chybová zpráva.  Díky tomu není nutné v kódu práva nijak
	o¹etøovat a funkci `run_form()' je mo¾no volat bez obav o
	rozhození aplikace neúspì¹ným otevøením formuláøe.

	Díky novému zpùsobu zpracování pøíkazù ji¾ není nutné v¹echny
	potenciální pøíkazy zkou¹et spou¹tìt a podle výsledku rozhodovat,
	zda ¹lo o platný pøíkaz èi ne.  Tím bylo umo¾nìno pøedávat
	skuteènou návratovou hodnotu obslu¾né rutiny.  Toho je vyu¾ito
	napøíklad v metodì `run_form()', ale bude mo¾né toho vyu¾ít i v
	mnoha jiných pøípadech.  Mù¾e to znamenat odstranìní nìkterých
	souèasných omezení.  Ve¹keré nápady jsou vítány...

	* BUGFIX: Vý¹e popsaná úprava v `run_form()' vyøe¹ila i nahlá¹enou
	chybu pøi otevírání odkazu "Zobrazit související èíselník" pøi
	nedostateèných právech.

	
2006-05-12  Tomas Cerha  <cerha@brailcom.org>

	Proèi¹tìn zpùsob uzavírání formuláøù a odstranìno mnoho s tím
	souvisejících hackù.

	Tøída CommandHandler nyní vyhledává obslu¾nou rutinu pøíkazu podle
	názvu.  Pokud je nalezena metoda `_cmd_*', kde * odpovídá názvu
	pøíkazu, je automaticky tato metoda zavolána a není tak nutno
	procházet sérii if/elsif v `on_command'.  Mnohé obslu¾né rutiny
	ji¾ byly na tento nový zpùsob pøevedeny.

	Vyøe¹eno rozdìlení pøíkazù na pøíkazy propagované do vnitøních
	formuláøù duálního formuláøe a pøíkazy zpracovávané pøímo duálním
	formuláøem.

	Globální pøíkaz `Application.COMMAND_SHOW_POPUP_MENU' nahrazen
	pøíkazy `ListForm.COMMAND_CONTEXT_MENU' a
	`InputField.COMMAND_CONTEXT_MENU' a proèi¹tìn zbyteèný kód.

	* BUGFIX: Vyøe¹en problém s kolidujícím menu GTK nad vstupním
	políèkem a vlastním menu vstupních políèek.
	
	* BUGFIX: Opraven nefunkèní pøíkaz
	`InputField.COMMAND_RESET_FIELD' pro navrácení pùvodní hodnoty
	políèka.
	
	* BUGFIX: Pøi ztrátì fucusu políèka je zru¹en výbìr.  Tím je
	zamezeno nepøíjemnému zneviditelnìní textu v nìkterých situacích.

	
2006-05-11  Tomas Cerha  <cerha@brailcom.org>

	Proèi¹tìní callbackù v RecordForm a jejich vyu¾ití v duálním
	formuláøi (odstranìn hack).

	V¹echny metody pro zji¹»ování dostupnosti pøíkazù jsou nyní
	neveøejné ("_can_*" namísto "can_*").

	Proèi¹tìní `RecordForm.on_command()' a zpùsobu volání metod
	o¹etøujících pøíkazy.

	Metodì `_run_callback()' jsou nyní pøedávány argumenty pøímo v
	rozbalené podobì, ne jako tuple a slovník (Pythonov¹tìj¹í).

	Byla zcela zru¹ena funkce `invoke_command()'.  Namísto ní nech» je
	vyu¾ívána metoda `Command.invoke()'.

	Specifikace virtuálního políèka dopoèítávaného z èíselníku byla
	koneènì vyøe¹ena s uspokojením (snad) v¹ech po¾adavkù.  Argument
	`related_codebook_field' byl zru¹en (je stále funkèní pro zpìtnou
	kompatibilitu, ale mìl by být èasem nahrazen).  Namísto nìho je
	virtuální políèko opìt specifikováno pomocí `computer'.  Oproti
	pùvodnímu stavu je zde v¹ak pomìrnì zásadní rozdíl.  K vytvoøení
	computeru slou¾í nová tøída `CbComputer', které pouze sdìlíme jaký
	je identifikátor sloupce navázaného na èíselník a jeký je název
	sloupce v èíselníku, urèujícího výslednou hodnotu.  Tøída u¾ sama
	doplní odpovídající dopoèítávací funkci a závislosti.  Navíc tøída
	poskytuje u¾ivatelskému rozhraní infomace o vazbì na èíselník,
	tak¾e jsou zde zachovány ve¹keré výhody, které vedly k zavedení
	`related_codebook_field'.  Také datový typ virtuálního políèka,
	které pou¾ívá `CbComputer' je automaticky získán z enumerátoru,
	tak¾e není nutné jej explicitnì definovat pomocí 'type_'.  A
	koneènì je také mo¾né urèit výchozí hodnotu, kterou computer
	vrací, kdy¾ èíselníkové políèko není vyplnìno.  Více viz
	dokumentace 'CbComputer' a jeho konstruktoru.

	Byla doplnìna a aktualizována dokumentace FieldSpec a
	ComputerSpec.
	

2006-05-10  Tomas Cerha  <cerha@brailcom.org>

	Bylo kompletnì pøepsáno v¹e, co se týká zpracování pøíkazù.  O
	zpracování se nyní stará tøída `CommandHandler' a instance, která
	má pøíkaz zpracovat, je vyhledána automaticky v závislosti na
	tøídì, která pøíkaz definuje.  Tím je koneènì sjednocen zpùsob
	zji¹»ování dostupnosti pøíkazu s jeho vlastním vyvoláním.  To
	umo¾nilo odstranìní nìkolika o¹klivých hackù, podstatnì
	zjednodu¹ilo zpracování pøíkazù v metodách `on_command' a umo¾ní
	to i flexibilnìj¹í vytváøení handlerù událostí v budoucnosti.
	Dále v souvislosti s touto zmìnou byly zrevidovány a pøepsány
	metody zji¹»ující dostupnost pøíkazù a bylo odstranìno nìkolik
	známých i novì odhalených chyb (vesmìs souvisejících s vyvoláním
	nechtìného pøíkazu bìhem inline editace a následným SEGFAULTEM).

	Vý¹e popsaná zmìna by mohla také umo¾nit rozli¹ení dùvodu
	nedostupnosti pøíkazu - pøíkaz není v daném kontextu pou¾itelný,
	nebo u¾ivatel nemá dostateèná pøístupová práva.

	Zároveò bylo provedeno nìkolik zmìn ve vlastních pøíkazech a byly
	nahrazeny nìkteré související callbacky vstupních políèek, které
	ji¾ nejsou potøeba (více viz Changelog).

	Vzhledem k mno¾ství zmìn je nutné kód dùkladnì otestovat!  Zejména
	bude vhodné se zamìøit na reakce na klávesové zkratky v rùzných
	komplikovanìj¹ích situacích (duální formuláøe, inline editace
	apod.).
	
	* BUGFIX: Pøi roz¹iøování/zu¾ování sloupce bìhem inline editace je
	aktualizována také velikost vstupního pole.
	
	* BUGFIX: Pøi inline editaci ji¾ nelze aplikaci shodit na SEGFAULT
	klávesovou kombinací Ctrl-¹ipka.  Také nìkolik dal¹ích pøíkazù,
	bylo v prùbìhu editace zakázáno.
	
2006-05-04  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opraveno nekorektní chování políèek typu CheckBox,
	RadioBox a Choice kde nedocházelo k vyvolání callbacku pøi
	programovém nastavení hodnoty, èím¾ se pøedvyplnìné hodnoty ve
	formuláøi sice zobrazily jakoby správnì, ale do ukládaného záznamu
	se ji¾ nedostaly..
	
	* BUGFIX: Opravena reakce na ENTER ve víceøádkových políèkách.
	Ten nefungoval, proto¾e byl pøebit pøíkazem pro posun mezi políèky
	formuláøe.
	
	* BUGFIX: Opravena nesprávná konverze tebelátoru v separátoru
	záznamù pøi interaktivním vkládání série záznamù z CSV.  Dále
	opravena drobná chyba ve formátování textu nápovìdy pro
	interaktivní vkládání.
	
2006-04-28  Tomas Cerha  <cerha@brailcom.org>

        Pomocí argumentu `related_codebook_field' je nyní mo¾no urèit také
	sloupec v navázaném èíselníku, ze kterého má být pøevzata hodnota.
	Díky tomu by funkce `cb_computer()' v Pytis extensions nemìla být
	ji¾ potøeba.  Její poui¾ití je proto logováno.  Dal¹í výhodou je,
	¾e není nutné definovat explicitnì typ virtuálních políèek, která
	mají nastaveno `related_codebook_field'.  Ten je mo¾né také
	automaticky urèit z èíselníku. 
	
	Políèka s nulovou ¹íøkou v layoutu jsou ignorována (není ji¾ pro
	nì vytváøena instance HiddenField).  Taková políèka jsou pøi
	naètení specifikace logována.  Bylo by dobré je z layoutu
	odstranit, proto¾e tam ji¾ nejsou zapotøebí.  V budocnu bude
	pravdìpodobnì speciální o¹etøování nulové ¹íøky zcela zru¹eno.
	Políèka, která nejsou ve formuláøi zobrazená zkrátka nemají v
	layoutu co dìlat.

2006-04-27  Tomas Cerha  <cerha@brailcom.org>

	Byla zru¹ena funkce `user_cmd()' v extensions a v souvislosti s
	tím bylo zru¹eno mnoho hackù, které ji¾ koneènì nejsou potøeba.

	Ji¾ nelze v aplikaci definovat vlastní instance pøíkazù (tøídy
	`Command').  Namísto toho je mo¾né vyu¾ívat pøíkazy
	`BrowseForm.COMMAND_CONTEXT_ACTION' a
	`Application.COMMAND_HANDLED_ACTION'.  Druhý zmínìný pøíkaz je
	nový a slou¾í k vytváøení u¾ivatelem o¹etøených akcí.  Stejnì jako
	COMMAND_CONTEXT_ACTION umo¾òuje definovat obslu¾nou rutinu jako
	povinný argument `handler' a funkci `enabled' pro zji¹tìní
	dostupnosti pøíkazu.  Na rozdíl od handleru COMMAND_CONTEXT_ACTION
	nedostává handler COMMAND_HANDLED_ACTION ¾ádné argumenty navíc.
	Pøedány jsou v¹ak v¹echny ostatní argumenty, kromì `handler' a
	`command', tak¾e lze jeden handler pou¾ít ve více situacích.
	
2006-04-25  Tomas Cerha  <cerha@brailcom.org>

	Tøídy DataSpec a Column byly pøesunuty z extensions pøímo do
	Pytisu.  Dále bylo v tøídì DataSpec a DataEnumerátor
	implementováno roz¹íøení, které umo¾òuje zjistit název specifikace
	èíselníku pøímo z instance enumerátoru.  Toho je nyní vyu¾ito pøi
	sestavování vstupních políèek a není tedy ji¾ nutné ve FieldSpec
	uvádìt argument `codebook'.  Staèí definovat jen `enumerator' v
	`DataSpec' a rozhraní automaticky zjistí jaký èíselník má být
	pou¾it.  Argumenty `codebook' ve stávajících defsech momentálnì
	nièemu nevadí, ale jsou tam ji¾ zbyteèné.  Pro pøehlednost by bylo
	nejlep¹í tyto nadbyteèné argumenty ze v¹ech defsù vyhodit...

	Nový argument `related_codebook_field' ve FieldSpec umo¾òuje urèit
	ke kterému èíselníkovému sloupeèku se daný sloupeèek vá¾e.  Tím
	zaènou fungovat odkazy "Zobrazit související èíselník" i u
	sloupeèkù, které samy enumerátor nemají, ale pøesto jde o hodnoty
	pocházející z èíselníku (napøíklad jsou do náhledu zahrnuty na
	úrovni view).  Podmínkou je, aby sloupeèek s enumerátorem ve
	specifikaci sloupcù existoval.
	
	
2006-04-24  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opravena drobná chyba, kvùli které nefungovalo pøedávání
	sekundárního kontextu handleru akce.
	
2006-04-20  Tomas Cerha  <cerha@brailcom.org>

	Byl zru¹en argument `description_format' ve ViewSpec.  Popis je
	v¾dy textový.  V informaèním oknì je zobrazován jako wiki, ale to
	jen kvùli zalamování textu.  Zároveò je text zobrazován jako
	tooltip tlaèítka, které informaèní okno vyvolává, tak¾e pokud
	u¾ivatel má tooltipy zapnuté a nepotøebuje text zobrazit v
	samostatném oknì, staèí nad tlaèítko najet my¹í a popis je
	zobrazen...
	
2006-04-19  Tomas Cerha  <cerha@brailcom.org>

	Byl zru¹en argument `check' ve FieldSpec.  Nyní lze pou¾ívat jen
	`check' specifikovaný ve ViewSpec.

	Dále byl v pytis.extensions zru¹en argument `ignore_enumerators' a
	metoda `make()'.
	
2006-04-12  Tomas Cerha  <cerha@brailcom.org>

	Zobrazení kontextového menu akcí na pravé tlaèítko lze ovlivòovat
	seskupováním.  Více viz dokumentace argumentu `actions'
	konstruktoru ViewSpec.

2006-03-14  Pavel Hanak  <hanak@asellus.cz>

        Do funkce 'new_record' byl pøidán argument 'block_on_new_record',
	který slou¾í k zablokování volání funkce 'on_new_record'. Tak je
	mo¾no i v rámci procedury 'on_new_record' pou¾ít funkci
	'new_record' pro pøidání záznamu.
	
2006-03-11  Tomas Cerha  <cerha@brailcom.org>

	Namísto pøímé specifikace polo¾ek kontextového menu pomocí
	argumentu `popup_menu' ve `ViewSpec', je nyní mo¾né definovat
	seznam u¾ivatelských akcí pomocí argumentu `actions'.  Argumentem
	je sekvence specifikací akcí jako instanci nové tøídy `Action'.
	Takto definované akce nyní umo¾òují i èisté øe¹ení práce s duálním
	formuláøem.  Je mo¾né handleru pøedávat øádek z druhého formuláøe
	a korektnì je øe¹en také refresh duálních formuláøù.  Více
	informací v dokumentaci tøídy `Action'.

	Nová globální funkce `has_access' v `application.py' umo¾òuje
	zjistit pøístupová práva pøihlá¹eného u¾ivatele k danému náhledu.
	
	DÙLE®ITÉ UPOZORNÌNÍ: `Action' umo¾òuje definovat také
	`access_groups', ale podle v¹eho je nyní pøi definici kontextových
	pøíkazù `access_groups' vyu¾íváno hlavnì k vyjmenování skupin,
	které mají právo pracovat s nìjakým náhledem, se kterým se pracuje
	v rámci handleru.  To není zrovna praktické, proto¾e `access
	groups' jsou zde definovány duplicitnì.  Pokud potom napøíklad
	zmìním pøístupová práva ve specifikaci náhledu, u¾ je nejspí¹e
	zapomenu zmìnit ve v¹ech definicích pøíkazù, které s daným
	náhledem pracují.  I kdybych to udìlat chtìl, tak se nikde
	nedozvím, které v¹echny pøíkazy to jsou.  Argument `access_groups'
	by mìl být u¾íván jen v opravdu nutných pøípadech (dost mo¾ná
	¾ádné takové nejsou).  V¹ude kde to jde, by mìla být práva
	zji¹tìna pomocí metody nové `has_access()' (viz vý¹e).  Tu lze
	pou¾ít ve funkci `enabled' pøi definici `Action' napøíklad
	následovnì:

		enabled=lambda row: has_access('Faktury')
	
	V pytis.extensins byla funkce `context_mitem' oznaèena za
	potlaènou a není tedy dále doporuèováno ji pou¾ívat.  Funkce bude
	zru¹ena, jakmile budou v¹echna její pou¾ití nahrazena pomocí
	`actions'.

	Dále byla v pytis.extensins funkce `context_rp' pøejmenována na
	`rp_handler', co¾ lépe odpovídá jejímu urèení.  Pro zpìtnou
	kompatibilitu byl vytvoøen alias `context_rp', ale bude vhodné
	v¹echna pou¾ití starého názvu ve specifikacích pøepsat.
	
2006-03-08  Tomas Cerha  <cerha@brailcom.org>

	Funkce `run_procedure' nyní pøijímá a pøedává jak klíèové, tak
	pozièní argumenty.  Toho je vyu¾ito napøíklad ve wrapperu
	'context_rp' v pytis-extensions, který teï pøedává vyjmenované
	hodnoty z row jako pozièní argumenty (v poøadí, ve kterém jsou
	uvedeny), èím¾ odpadá nutnost udr¾ovat názvy identifikátorù
	sloupcù v defcech a v procedurách v konzistenci.

	Dále byla roz¹íøena assertová hlá¹ka pøi kontrole názvu
	vytváøeného pøíkazu a v `user_cmd()' odstranìn jeden potenciální
	problém, který mo¾ná zpùsoboval chybu pøi ke¹ování specifikací.
	
2006-03-03  Tomas Cerha  <cerha@brailcom.org>

	Doplnìná nápovìda Pytisu je v CVS pytis-help.

	Pro generování nápovìdy doporuèuji aktualizaci LCG, které doznalo
	nìkolika drobných vylep¹ení.  V souvislosti s tím bude tøeba i
	aktualizace pytis-extensions.

	Funkce `new_record()' ji¾ neakceptuje argument `key'.  Pøedání
	kopírovaného øádku nech» je provádìno s pou¾itím argumentu
	`prefill'.  V rámci pytisu bylo pøedávání argumentù upraveno a v
	rámci aplikací jsem nenalezl ¾ádné pou¾ití argumentu `key'.

	Zároveò funkce `on_new_record' by ji¾ argument `key' nemìla
	akceptovat.  Ve v¹ech projektech je funkce `on_new_record' nyní
	definována tak, ¾e argument `key' akceptuje.  To by v¹ak nemìlo
	vadit, proto¾e je definován jako klíèový.  Hodnota zkrátka nebude
	nikdy pøedána.  Problém by nastal pouze pokud by se v rámci funkce
	nìjak implementovala podpora pro vytváøení nového záznamu jako
	kopie pùvodního, tak¾e by se s argumentem `key' nìjak poèítalo.
	To jsem v¹ak pøi zbì¾né kontrole nikde nevidìl.  Pravda je, ¾e
	argumenty `key' a `prefill' jsou vìt¹inou vesele ignorovány.  To
	je nyní sice výhodné, proto¾e nevznikne nekompatibilita, ale ve
	skuteènosti to není správnì.  Argument `prefill' (který nyní
	obsahuje také data kopírovaného øádku) by mìl být, pokud je to
	mo¾né, pøedáván dále do otevíraných formuláøù, pokud jsou nìjakým
	zpùsobem kompatibilní s daty náhledu, který funkci on_new_record
	implementuje.  Zkrátka argument `prefill' by mìl být v¾dy brán v
	úvahu a mìlo by být uèinìno maximum proto, aby data z nìho byla
	nìjakým zpùsobem vyu¾ita, pokud to v daném pøípadì dává alespoò
	trochu smysl.

2006-02-27  Pavel Hanák  <hanak@asellus.cz>

        Byly implementovány dva nové datové typy Inet a Macaddr,	
	odpovídající stejným typùm v PostgreSQL.
	
	* BUGFIX: Pøi updatu øádku, kde dochází ke zmìnì klíèe se nyní
	pro metodu data.update pou¾ije pùvodní klíè. Doposud se pou¾il
	aktuální klíè, a tak v pøípadì modifikace klíèe do¹lo k selhání
	metody 'data.update'.

2006-02-27  Tomas Cerha  <cerha@brailcom.org>

	Byly implementovány funkce pro práci s výbìrem v øádkovém
	formuláøi.  V ka¾dém formuláøi je nyní mo¾no vybrat i nìkolik
	øádkù souèasnì a s nimi dále pracovat.  Výbìr je mo¾no roz¹iøovat
	pomocí levého tlaèítka my¹i a souèasnì stisknuté klávesy Ctrl,
	nebo Shift.  Chování je obdobné, jak tomu bývá bì¾né v jiných
	aplikacích.  

	Problém v¹ak nastává vzhledem k na¹í pùvodní koncepci aktuálního
	øádku.  Ta autuální øádek v¾dy zvýrazòuje právì pomocí výbìru,
	tak¾e napøíklad pøi pohybu kurzoru v gridu dochází k zru¹ení
	jakéhokoliv výbìru a nastavení výbìru v¾dy na øádek, kde se
	nachází kurzor.  Výbìr tedy pøi pohybu kurzoru není zachován.

	Stejný problém nastává pøi kliknutí pravým tlaèítkem my¹i, kdy
	potøebujeme kurzor pøesunout na místo kliknutí.  Tím je v¹ak øádek
	vybrán a pøedchozí výbìr zru¹en.  Nyní bylo chování upraveno, aby
	v pøípadì, ¾e jsou vybrány nìjaké øádky (kromì aktuálního), výbìr
	ru¹en nebyl.  V takovém pøípadì v¹ak není mo¾né zobrazit menu,
	proto¾e by nebylo zøejmé, nad kterým øádkem je akce vyvolána.

	Pokud problém doøe¹íme, bude mo¾né definovat také menu pøíkazù,
	které pracují s aktuálním výbìrem.

	Pøed plným vyu¾itím práce s výbìrem v¹ak bude tøeba zvolit jinou
	techniku zvýraznìní aktuálního øádku, aby výbìr a aktuální øádek
	byly zcela nezávislé.  To v¹ak bude znamenat zmìnu chování, která
	by mohla být z u¾ivatelského hlediska pomìrnì nebezpeèná (vyvolání
	akce nad jiným, ne¾ zamý¹leným záznamem, apod.).

	Prozatím je mo¾né jedno konkrétní vyu¾ití vícenásobného výbìru
	øádkù.  Nová formuláøová tøída `SelectRowsForm' je obdobou
	èíselníku.  Namísto aktuálního øádku v¹ak vrací v¹echny oznaèené
	øádky jako tuple instancí PresentedRow.  Implementace je zamý¹lena
	jako prototyp a zatím není doporuèováno pøípi¹ èetné vyu¾ívání.
	Mù¾eme si v¹ak díky tomu vícenásobný výbìr vyzkou¹et a doøe¹it tak
	vý¹e zmiòované problémy.
	
	V pytis-extensions byly databázové funkce soustøedìny do nového
	modulu `dbutils'.  Nìkteré funkce byly pøejmenovány v zájmu
	konzistence.  Pro pùvodní názvy byly vytvoøeny aliasy, tak¾e
	zpìtná kompatibilita by mìla být zachována beze zmìn, ale je
	doporuèováno pou¾ívat nové názvy.  Více viz ChangeLog.  Kód byl
	navíc proèi¹tìn a tento modul ji¾ nevyu¾ívá ¾ádné identifikátory z
	hvìzdièkových importù.

	* BUGFIX: Pøi ukládání ¹íøek sloupcù je slovník pøeveden korektnì
	na tuple, tak¾e zapamatovaná hodnota není pozdìji zahozena, co¾
	znefunkèòovalo obnovování u¾ivatelem nastavených ¹íøek sloupcù.
	
2006-02-24  Tomas Cerha  <cerha@brailcom.org>

	V modulu pytis.data.access pøibyla nová funkce `is_in_groups()',
	umo¾òující pohodlnì zjistit, zda pøihlá¹ený u¾ivatel patøí do
	jedné z vyjmenovaných skupin.

	Nová konfiguraèní volba dbpass umo¾òuje pøímé nastavení hesla.
	Pou¾ití v konfiguraèním souboru èi na pøíkazové øádce není z
	bezpeènostních dùvodù doporuèováno.  Volba se v¹ak mù¾e hodit
	napøíklad pøi pøístupu k databázi z jiného programu vyu¾ívajícího
	Ptytis API.
	
	* BUGFIX: Ve filtrovacím dialogu je o¹etøena situace, kdy výchozí
	sloupec není v aktuální mno¾inì sloupcù.
	
	* BUGFIX: Pøi formátování textù pomocí LCG jsou nyní pøedávány
	argumenty konstruktoru `lcg.WikiNode' pro novìj¹í verzi LCG.
	
	* BUGFIX: Chyba pøihlá¹ení je nyní detekována i pøi pøihla¹ování
	pomocí PAM.  Díky tomu je pøi ¹patném zadání hesla pøi PAM
	pøihla¹ování znovu nabídnut pøihla¹ovací dialog.

	* BUGFIX: S èíslem portu nastaveným pomocí konfiguraèní volby
	`dbport' je nyní nakládáno jako s celoèíselnou hodnotou, ne jako s
	øetìzcem, co¾ odporovalo definici.  Pokud byl `dbport' nìkde
	nastavován jako øetìzec, nebude to nyní fungovat.  Konfiguraèní
	soubory je v tomto pøípadì tøeba opravit.
	
2006-02-23  Tomas Cerha  <cerha@brailcom.org>

	V pytis-extensions byly tøídy a funkce související s konfigurací
	ulo¾enou v databázi pøesunuty do nového modulu `configuration'.

	Nepou¾ívané argumenty `static' a `key' konstruktoru `Command' byly
	odstranìny.  V defsech ¾ádného ze souèasných projektù nebylo
	pou¾ití tìchto argumentù nalezeno, tak¾e by se snad nic nemìlo
	pokazit.

	Menubar ji¾ nepodporuje aktivaèní kategorie.  Menu je statické a
	v¹echny polo¾ky jsou pøítomny po celou dobu bìhu aplikace.  Podle
	kontextu mohou být jednotlivé polo¾ky aktivní, nebo neaktivní, ale
	nikdy nemizí.  Toto chování je z pohledu u¾ivatelského rozhraní
	standardnìj¹í.  Kód se tím na mnoha místech podstatnì zjednodu¹il.

	Definice aktivaèních kategorií byla také zru¹ena ze v¹ech
	formuláøových tøíd a aplikace se nyní nestará o aktivace pøi práci
	se zásobníkem oken.

	Z modulu `screen' bylo odstranìno nìkolik dal¹ích kostlivcù, jako
	`ButtonBar', `HelpFrame' apod.

	V tiskovém formuláøi jsou nyní vyu¾ívána stock buttons, díky èemu¾
	mají nìkterá tlaèítka ikonky.

	Tiskový formuláø ji¾ není pøidáván do menu poslednì otevøených
	formuláøù, proto¾e jeho obnovení stejnì nìní mo¾né, pokud není
	vytvoøen pøíslu¹ný formátovaè.  Ten je nutné vytvoøit ve
	formuláøi, nad kterým je tisk spou¹tìn.  Proto pøímé vyvolání
	printformu z menu nemá smysl.

	Byla zru¹ena specifikaèní tøída 'RefSpec', argument 'references'
	konstruktoru `FieldSpec' a metoda 'PresentedRow.refvalue'.  Nebyla
	ji¾ nalezena ¾ádná pou¾ití v defsech.

	Dále byl zru¹en argument `enable_inline_insert' konstruktoru
	`ViewSpec' a `insert_unknown_values' konstruktoru `CodebookSpec'.
	Opìt nebylo nalezeno pou¾ití v defsech.

	V titulku aplikace se nyní automaticky zobrazuje název databáze,
	u¾ivatelské jméno, databázový stroj i port.

	Konstruktor ViewSpec má nyní nový argument `help'.  Ten nech» je
	vyu¾íván pro rozsáhlej¹í popis formuláøe, který vy¾aduje
	formátování.  Jednoduchý popis v rozsahu jedné a¾ dvou vìt nech»
	je uvádìn jako `description'.  Proto¾e se oba popisy pou¾ívají v
	jiných situacích, není pravda, ¾e staèí uvést jeden z nich.
	Description by mìl být uveden prakticky v¾dy.  Help slou¾í pro
	generování nápovìdy a namísto nìho je mo¾né vytvoøit odpovídající
	soubor ve zdrojovém adresáøi nápovìdy (viz tutoriál Help).
	
	
2006-02-22  Tomas Cerha  <cerha@brailcom.org>

	V pytis-extensions pøibyla nová funkce `context_rp()', která
	vytvoøí handler pro pøíkaz kontextového menu øádku.  Tento handler
	vyvolá proceduru daného jména z dané specifikace a pøedá jí urèené
	hodnoty z aktuálního øádku jako argumenty.

	Pøíkazu `BrowseForm.COMMAND_CONTEXT_MENU_ACTION' (vytváøeném
	napø. pomocí context_mitem) lze nyní pøedat také argument
	`access_groups'.

	Handler pøíkazu `BrowseForm.COMMAND_CONTEXT_MENU_ACTION' nyní musí
	v¾dy pøijímat instanci `PresentedRow' jako první pozièní argument.
	®ádné zkoumání argumentù pomocí inspect ji¾ není provádìno.  K
	tomu dochází u¾ jen pøi zpracování pøíkazù vytvoøených pomocí
	`user_cmd()'.  Proto je tøeba pøi jejich pøepisu dávat pozor a
	pøípadnì upravit argumenty handleru.  POZOR, pokud handler s
	aktuálním øádkem vùbec nepracuje, není ¾ádoucí, aby takový pøíkaz
	byl typu `BrowseForm.COMMAND_CONTEXT_MENU_ACTION'!!!  V takových
	pøípadech bude tøeba zvolit jiný pøíkaz (pøípadnì implementovat
	nový typ pøíkazu v knihovnách).
	
	
2006-02-21  Tomas Cerha  <cerha@brailcom.org>

	V minulých dnech pøibylo nìkolik nových vlastností týkajících se
	nového systému nápovìdy.  V novém tutoriálu `doc/tutorials/Help'
	je popsáno jak v¹e funguje a jak v aplikacích systém nápovìdy
	vyu¾ívat.

2006-02-15  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi výpoètu pozic scrollbarù pøi zobrazování postscriptu
	bylo o¹etøeno dìlení nulou.
	
	* BUGFIX: Ulo¾ené polo¾ky pro menu poslednì otevøených formuláøù
	jsou nyní zkontrolovány a pokud se pøíslu¹né specifikace nepovede
	otevøít, je polo¾ka vynechána.  Tím je o¹etøena chyba, kdy nelze
	nastartovat aplikaci, pokud mám v mezi poslednì otevøenými
	formuláøi polo¾ku, její¾ specifikace byla zru¹ena èi pøejmenována.
	
2006-01-01  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Hromadné vkládání dat ze souboru nyní správnì
	pøedvyplòuje formuláø i v kombinaci s default funkcemi.        
	
	* BUGFIX: V menu zobrazených sloupcù se nyní zobrazeuje
	`column_label', ne `label'.
		
	* BUGFIX: Sloupce, které mají editovatelnost urèenu computerem,
	nyní nejsou nastavovány jako read only.

2006-01-25  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pokud pøi vyvolání formuláøe není nalezen po¾adovaný
	øádek, ji¾ se nestane, ¾e formuláø zùstane nerozta¾en (¹edá
	plocha).
	
	* BUGFIX: O¹etøena situace, kdy pøi pøidání filtrovací podmínky za
	urèitých okolností nebylo mo¾né nastavit výchozí sloupec nové
	podmínky.
	
2006-01-24  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Po pøidání èi odebrání sloupce je pøenastavena velikost
	gridu.  Tím se zamezí nenascrollovatelným posledním sloupcùm apod.
	
2006-01-23  Tomas Cerha  <cerha@brailcom.org>

	Pøi ukládání konfiguraèních voleb se nyní berou v úvahu pouze
	volby nastavitelné v konfiguraèních formuláøích a dal¹í explicitnì
	vyjmenované volby, jako napø. informace o stavu formuláøù apod.
	Tím zamazíme potenciálním budoucím tì¾ko odhalitelným problémùm,
	jako bylo napø ukládání `dbconnection' apod.

	* BUGFIX: Pøi kliknutí na záhlaví sloupce bez stisknutého Shift je
	nyní v¾dy provedeno primární setøídìní i pokud je sloupec ji¾
	setøídìn sekundárnì.

	* BUGFIX: Po ve¹kerých zmìnách tøídìní je aktualizován grouping,
	aby neobsahoval sloupce, podle kterých ji¾ není tøídìno.

2006-01-23  Pavel Hanak  <hanak@asellus.cz>

	Funkce `cleanup()', volaná po editaci záznamu má nyní dva
	argumenty, prvním je výsledný ulo¾ený øádek odpovídající koneènému
	stavu databáze a druhým je pùvodní øádek z formuláøe pøed ulo¾ením
	(na úrovni databáze mohou být nìkteré hodnoty zmìnìny èi doplnìny
	"default" hodnoty apod.).  Druhý øádek obsahuje hodnoty po editaci
	u¾ivatelem, ale pomocí joho metody `original_row' je mo¾né také
	získat pùvodní hodnoty pøed editací.
	
2006-01-18  Tomas Cerha  <cerha@brailcom.org>

        Specifikaèní parametr `enable_inline_insert' by ji¾ nemìl být
	pou¾íván.  Prozatím byl ponechán pro zpìtnou kompatibilitu a jeho
	pou¾ití je logováno, ale èasem bude potøeba jej v¹ude odstranit.
	Mo¾nost inline vkládání formuláø nyní zji¹»uje automaticky podle
	toho, zda jsou zobrazeny v¹echny NOT NULL sloupce.

	* BUGFIX: Pøi skrytí, èi pøesunu sloupce, nad ním¾ byla pøedtím
	provádìna inline editace se aplikace shroutila na SEGFAULT.  Tomu
	se podaøilo pøedejít uzavíráním v¹ech editorù je¹tì pøed
	manipulacemi se sloupci.
	
	* BUGFIX: Pøi kliknutí na záhlaví sloupce se stisknutým Shiftem
	ji¾ nedojde k doèasnému výbìru v¹ech øádkù gridu.  To bylo
	implicitní chování wx, které výraznì zdr¾ovalo (zejména u velkých
	tabulek) pøi pøepínání dodateèného tøídìní.

	* BUGFIX: O¹etøen pøípad vyvolání pøíkazu nad mrtvým formuláøem.
	
2006-01-17  Tomas Cerha  <cerha@brailcom.org>

	Ovládání tøídìní sloupcù by nyní mìlo být intuitivnìj¹í.
	Kliknutím na záhaví sloupce nyní nedojde k jeho pøidání jako
	dodateèného tøídícího sloupce, ale sloupec se stane primárním
	tøídícím sloupcem.  To je chování obvyklé v jiných aplikacích (ty
	se vìt¹inou mo¾ností nìkolika tøídících sloupcù vùbec nezatì¾ují).
	Pøidat sloupec jako dodateèný je nyní mo¾né jednodu¹e tak, ¾e pøi
	kliknutí na záhlaví sloupce pøidr¾ím klávesu Shift.

	Vizuální seskupování je nyní mo¾né i podle nìkolika sloupcù
	zároveò.  V kontextovém menu záhlaví sloupce proto pøibyly dvì
	nové polo¾ky, umo¾òující sloupec pøidat ke stávajícím seskupovacím
	sloupcùm, a nebo jej naopak odebrat.  Také ve specifikacích lze
	pro parametr `grouping' namísto prostého identifikátoru sloupce
	pøedat tuple a zapnout tak výchozí seskupování podle nìkolika
	sloupcù zároveò.

	* BUGFIX: U¾ivatelské nastavení tøídìní je bráno v potaz i pokud
	si u¾ivatel tøídìní zcela zru¹il.
	
2006-01-16  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Pøi pøeskupování sloupcù jsou nyní také aktualizovány
	atributy sloupcù gridu.  Díky tomu jednak opìt chodí inline
	editace a jednak dojde ke korektnímu pøenastavení atributù po
	vyvolání pøíkazu `Form.COMMAND_RELOAD_FORM_STATE'.

2006-01-13  Tomas Cerha  <cerha@brailcom.org>

        V¹echny hodnoty naèítané z form_state jsou nyní dùkladnì
	kontrolovány, zda neobsahují nesmyslné, nebo zastaralé údaje a v
	pøípadì nesrovnalostí jsou ignorovány.

	Kontextové menu sloupce, pokud je vyvoláno v oblasti, kde ji¾ není
	¾ádný sloupec, nyní obsahuje pouze seznam sloupcù s mo¾ností
	zapnout a vypnout jednotlivé sloupce.  Díky tomu bylo mo¾né
	povolit skrýtí sloupce, by» je posledním zobrazeným sloupcem.
	Tak¾e teï mù¾eme skrýt v¹echny sloupce a pak zase nìkterý sloupec
	zobrazit výbìrem z tohoto menu.  Zároveò bylo o¹etøeno nìkolik
	chyb, vznikajících kdy¾ formuláø nemá zobrazeny ¾ádné sloupce.

	Drobná zmìna ve vytváøení atributù v gridu by mohla pøinést mírné
	zrychlení vykreslování pøi pou¾ití stylù.

	Kvùli ukládání u¾ivatelského nastavení seskupování a tøídìní bylo
	nutné proèistit a zpøehlednit nakládání s tìmito parametry, tak¾e
	nyní je v¹e ve slu¹ném stavu.

	* BUGFIX: O¹etøena situace, kdy byl pøidán nový sloupec z
	kontextového menu sloupce vyvolaného v oblasti za posledním
	sloupcem.  To vedlo k rozhození sloupcù a následnì èasto k
	segfaultu.

	* BUGFIX: I ostatní pøíkazy vyvolávané klikáním na záhlaví sloupcù
	o¹etøují kliknutí mimo existující sloupec a s tím související
	chyby.

	* BUGFIX: Ve filtrovacím a vyhledávacím dialogu se opìt správnì
	pøednastavuje aktuální sloupec a to i za situací, kdy se to døíve
	nedìlo (pøi druhém a dal¹ím spu¹tìní, pokud je podmínka prázdná).

	* BUGFIX: Polo¾ky menu pro grouping jsou nyní aktivní/neaktivní
	podle aktuálního stavu.

	
2006-01-12  Tomas Cerha  <cerha@brailcom.org>

        Nový pøíkaz `Form.COMMAND_RELOAD_FORM_STATE' (spou¹tìný momentálnì
	klávesovou zkratkou `Ctrl-Baskcpace' umo¾òuje zahodit aktuální
	u¾ivatelská nastavení formuláøe (napø. zobrazené sloupce, jejich
	¹íøky apod.) a vrátit døíve ulo¾ené u¾ivatelské nastavení.  V
	podstatì je formuláø reinicializován do stavu, v jakém byl otevøen
	a v¹echny zmìny od té doby provedené jsou tak zapomenuty.
	
        Robustnìj¹í nakládání s ulo¾enými informacemi o formuláøích a
	stavu aplikace by mìlo zamezit zhroucení aplikace pøi potenciálním
	chybném obsahu ulo¾ených stavových informací.

	Novì je nyní ukládáno také u¾ivatelské nastavení vizuálního
	seskupování a tøídìní pro ka¾dý formuláø.  Oba parametry se
	zároveò korektnì obnovují po vyvolání pøíkazu
	`Form.COMMAND_RELOAD_FORM_STATE'.
	
	* BUGFIX: Velikost gridu je nyní po rozta¾ení sloupce upravena
	tak, aby koncové sloupce nebyly useknuté.

	* BUGFIX: Ukládání u¾ivatelské konfigurace ji¾ nesel¾e díky nové,
	døíve neexistující volbì.
	
2006-01-11  Tomas Cerha  <cerha@brailcom.org>

	Nový argument `inserted_data' konstruktoru PopupEditForm umo¾òuje
	pøedat libovolnou sekvenci datových øádkù (instancí
	pytis.data.Row).  Formuláø je potom postupnì pøedvyplòován tìmito
	øádky a tlaèítkem "Dal¹í" je ka¾dý záznam ulo¾en a formuláø
	naplnìn dal¹ím øádkem.  Takto je mo¾né jednodu¹e vyu¾ít formuláø k
	hromadnému vkládání øádkù naètených z libovolného zdroje.

	Stavový øádek PopupEditFormu je teï flexibilnìj¹í a mohl by
	obsahovat nìkterá dal¹í zajímavá políèka, jako napø. pøíznak
	zmìny, nebo zkrátka co nás napadne.  Staèí vymyslet nìco
	smysluplného...

2006-01-09  Tomas Cerha  <cerha@brailcom.org>

	Název i formát specifikaèní funkce `command_keys' zmìnìn.  Nový
	název je `keymap' a polo¾ky definují navíc také argumenty pøíkazu,
	pøièem¾	definice klávesy je nyní na prvním místì.  Pøíkladem je
	definice `DEFAULT_KEYMAP' v `commands_.py'.  Hlavní výhodou je to,
	¾e nyní mù¾eme definovat i argumenty pøíkazù a nemusíme vytváøet
	pro ka¾dou variantu pøíkazu jeho specializovanou instanci.

	Pøi zpracování mnohých pøíkazù jsou nyní vyu¾ívány argumenty a
	mnohé pøíkazy byly zru¹eny a nahrazeny obecným pøíkazem a jeho
	arguemnty.
	
	Nové klávesové zkratky `Shift-Left' a `Shift-Right' (¹ipky),
	umo¾òují pøesunout aktuální sloupec vlevo/vpravo bez pou¾ití my¹i.
	
	
2006-01-06  Tomas Cerha  <cerha@brailcom.org>

	Ve filtraèním, vyhledávacím a tøídícím dialogu se nyní zobrazené
	sloupce zobrazují na zaèátku a skryté sloupce jsou za nimi a
	jejich názvy jsou v závorkách.  Tím by mìl být výbìr sloupce
	daleko pøehlednìj¹í.

	Pøi ka¾dém otevøení formuláøe je kontrolováno, zda se mno¾ina
	sloupcù definovaná ve specifikaci nezmìnila od doby, kdy si
	u¾ivatel ulo¾il vlastní nastavení sloupcù.  Pokud ano, vyskoèí
	dialog, jeho¾ potvrzením je u¾ivatelské nastavení zahozano.
	U¾ivatel mù¾e zahození také zamítnout.  V tom pøípadì vidí jen ty
	sloupce, ze svého nastavení, které v souèasné specifikaci zùstaly,
	resp. jejich¾ identifikátory se nezmìnily.
	
	Nový argument `row_style' ve `ViewSpec' umo¾òuje definovat styl
	pro celý øádek, tedy v¹echna políèka zároveò.  Tím by se mohly
	nìkteré formuláøe dosti urychlit, proto¾e se styl i pøi velkém
	poètu sloupcù poèítá pro ka¾dý øádek jen jednou.  Je v¹ak tøeba
	zru¹it v¹echny styly definované jako `style' ve `FieldSpec' a
	definovat místo toho `row_style'.  Pokud má nìjaký sloupec
	pou¾ívat jiný styl, není problém oba styly kombinovat -- `style'
	ve `FieldSpec' má pøednost, pokud je definován.

	Nová konfiguraèní volba ve formuláøi "Nastavení u¾ivatelského
	rozhraní" umo¾òuje nastavit ztmavení øádkù pøi vizuálním
	seskupování.

	* BUGFIX: Filtraèní dialog u¾ opìt filtruje i pøi stisku
	"Ctrl-Enter".

	* BUGFIX: Filtraèní a tøídící dialog nyní rozeznávají sloupeèky
	podle poøadí, nikoliv podle názvu, co¾ opravuje napøíklad
	nefunkèní filtraci v zakázkách isasu, kde byly dva sloupce
	stejného názvu a filtrování se tak provádìlo v jiném sloupci, ne¾
	u¾ivatel oèekával.

	* BUGFIX: Grouping nyní funguje i pokud sloupec zrovna není
	zobrazen.

	* BUGFIX: Pokud je sloupec roztahován/zu¾ován my¹í, nedochází ji¾
	k nechtìnému pøesouvání sloupce pøi pøeta¾ení okraje za polovinu
	vedlej¹ího sloupce.

	* BUGFIX: Urèení pozice sloupce nyní poèítá i s offsetem
	zpùsobeným horizontálním scrollováním.  Ve¹keré akce nad sloupci
	provádìné my¹í tak nyní pracují za v¹ech okolností se správným
	sloupcem.  Døíve byl napøíklad pøesunut nebo skryt jiný sloupec,
	pokud byla tabulka odscrollovaná doprava.
	
2006-01-04  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: V pytis-extensions byla opravena funkce
	`get_menu_defs()', tak aby nezahrnovala polo¾ky týkající se
	konfigurace.

	* BUGFIX: Inicializuj klávesovou mapu pøed naèítáním konfigurace,
	jinak nefungují klávesy v dialogu pro pøihlá¹ení k databázi.
	
2006-01-03  Tomas Cerha  <cerha@brailcom.org>

        Validace hodnot zadaných ve filtrovacím nebo vyhledávacím dialogu
	nyní není striktní a pokud k chybì validace dojde, dialog se
	neukonèí.
	
        Algoritmus pro pøepoèítávání ¹íøek sloupcù byl upraven, aby lépe
	zohledòoval u¾ivatelem nastavené ¹íøky sloupcù.

	Nová konfiguraèní volba (v dialogu nastavení u¾ivatelského
	rozhraní) umo¾òuje zakázat automatické roztahování tabulek na
	celou ¹íøku okna.

	* BUGFIX: Tlaèítko "Pou¾ít" v konfiguraèním dialogu ji¾ opìt
	funguje.

	* BUGFIX: Zmìna ¹íøky sloupce pomocí klávesových zkratek je
	zapamatována.

	* BUGFIX: Pøi ukládání u¾ivatelských voleb do konfiguraèního
	souboru jsou døíve ulo¾ené hodnoty promazávány.  Pokud se tak
	nedìlo, volby, které u¾ivatel jednou zmìnil a potom vrátil na
	výchozí hodnotu, si poøád dr¾ely zmìnìnou hodnotu.
	
	* BUGFIX: Ve filtrovacím dialogu se nyní zobrazují v¹echny
	dostupné sloupce (tedy i ty, které momentálnì nejsou zobrazené).
	
2006-01-02  Tomas Cerha  <cerha@brailcom.org>

        V pytis-extensions byla definována nová pomocná funkce
	`context_mitem()', která usnadòuje definici polo¾ek kontextového
	menu.
	
	* BUGFIX: Zobrazování popiskù konfiguraèních voleb ji¾ funguje i v
	optimalizovaném re¾imu.
	
	* BUGFIX: Pøi naèítání konfigurace z databáze je díky pou¾ití
	`db_operation' nyní správnì provedeno pøihlá¹ení do databáze.

	* BUGFIX: Pøi sestavování argumentù handleru pøíkazu je o¹etøena
	situace, kdy handler nepøijímá ¾ádné klíèové argumenty, která
	po pøede¹lých úpravách vyvolávala výjimku.
	
2005-12-28  Tomas Cerha  <cerha@brailcom.org>

	Pøíkazy kontextového menu øádkového formuláøe:
	
	ListForm má nyní nový pøíkaz `COMMAND_CONTEXT_MENU_ACTION', který
	je urèen k vytváøení akcí v kontextovém menu øádku BrowseFormu.

	Pøíkaz mù¾e mít libovolné argumenty, av¹ak dva z nich jsou
	zpracovány odli¹nì.  Argument `handler' je povinný a musí
	odkazovat na funkci, která akci provede.  Dal¹ím speciálním
	argumentem je `enabled', co¾ mù¾e být funkce, vracející pravdu,
	pokud je pøíkaz aktivní a nepravdu v opaèném pøípadì.

	Obì funkce (`handler' i `enabled') dostanou jako klíèové argumenty
	v¹echny ostatní argumenty pøíkazu, vyjma argumentù `handler' a
	`enabled'.  Navíc, pokud tyto funkce pøijímají jeden pozièní
	argument, dostanou jako první argument instanci PresentedRow
	aktuálního øádku, nad kterým byla akce vyvolána.  Pokud pøijímají
	dva pozièní argumenty, bude na prvním místì pøedán je¹tì datový
	objekt formuláøe.

	Tento pøíkaz by mìl být vyu¾íván namísto u¾ivatelských pøíkazù,
	ale pro finální pou¾ití bude je¹tì dodìlána nìjaká podpora
	zjednodu¹ující definici.   Bohu¾el asi nebude mo¾é automaticky
	zmìnit typ pøíkazu vracený funkcí `user_cmd()', proto¾e ta vrací
	pouze pøíkaz a my potøebujeme zmìnit také jeho argumenty...  Je¹tì
	se na to ale podíváme.

	Menu poslednì otevøených formuláøù:
	
	Pøi definici menu aplikace je mo¾no v libovolném místì pou¾ít
	novou funkci `recent_forms_menu()', která vytvoøí menu poslednì
	otevøených formuláøù.  Do tohoto menu jsou potom automaticky
	pøidávány v¹echny spou¹tìné formuláøe (vyjma popup formuláøù).
	Výbìrem polo¾ky menu je stejný formuláø otevøen znovu.  Stav je
	ukládán pøi ukonèení aplikace, tak¾e se menu bude hodit zejména
	pro znovuotevírání èasto pou¾ívaných formuláøù.  Menu si pamatuje
	pouze posledních deset polo¾ek.

	* BUGFIX: Byl o¹etøen pøípad vkládání záznamu do prázdné tabulky.

	* BUGFIX: Pøi zji¹»ování editovatelnosti políèka v inline editaci
	je nyní správnì pou¾it rozeditovaný øádek, ne øádek stejného èísla.
	
	* BUGFIX: Pøi aktualizaci gridu nyní nevoláme `_select_cell()' pro
	výbìr pøedchozí vybrané buòky.  Vìt¹inou to není potøeba a bìhem
	refresh, kde to potøeba je, se to stejnì provádí na konci je¹tì
	jednou.  Naopak v nìkterých pøípadech vkládání øádkù je to
	ne¾ádoucí, proto¾e je tím opìt zru¹ena nastartovaná editace.
	
2005-12-27  Tomas Cerha  <cerha@brailcom.org>

	Notifikace o zmìnì dat v databázi (napø. jiným u¾ivatelem) je nyní
	mo¾no zobrazovat ve stavové øádce.  Staèí v definici polí
	stavového øádku (v application.py) pøidat polo¾ku
	"('data-changed', 13)" a v aplikaci pøibyde nové stavové pole,
	které zobrazuje text "Data ok", pokud jsou data aktuální a "Data
	zmìnìna", pokud byla data v databázi zmìnìna a je tedy nutné
	zobrazení aktualizovat.  Jsou vítány návrhy na lep¹í hlá¹ky,
	proto¾e "data zmìnìna" mù¾e vypadat i jako ¾e u¾ivatel nìco zmìnil
	a neulo¾il, ale v¹echny jiné varianty jsou pøíli¹ dlouhé...

	V budoucnu bude vhodné umo¾nit zobrazení ikony s tooltipem, èím¾
	se vyøe¹í dilema s délkou/výsti¾ností hlá¹ky.  Také by tato
	polo¾ka mìla být pøidávána do statusbaru automaticky, tak¾e nebude
	nutné upravovat application.py v¹ech aplikací.  K tomu je ov¹em
	tøeba trochu pøepracovat implementaci stavové øádky.

	Dále byla dnes commitnuta úprava v configui, která zaji¹»uje
	naèítání a ukládání konfigurace v konfiguraèním formuláøi pomocí
	speciální "fale¹né" datové tøídy, èím¾ se jednak zjednodu¹ila
	implementace formuláøe a jednak vyøe¹il døívìj¹í problém s módem
	formuláøe.
	
2005-12-22  Tomas Cerha  <cerha@brailcom.org>

        Pøibyl nový konfiguraèní formuláø "Nastavení exportu", který
	nahrazuje polo¾ky, které byly døíve zamíchány do u¾ivatelského
	nastavení.  Tyto polo¾ky byly odstranìny z Isasu a Solasu.
	
	* BUGFIX: Pøi uzavírání popup oken je kontrolováno, zda pøíslu¹ný
	wx prvek je¹tì ¾ije.  To døíve mohlo vést ve speciálních pøípadech
	ke krachu aplikace.
	
2005-12-21  Tomas Cerha  <cerha@brailcom.org>

        ListForm nyní pøi refreshi aktualizuje i nastavení v¹ech barev,
	tak¾e po zmìnì v konfiguraci se v¹e hned promítne.

	EditForm nyní pou¾ívá "Stock Buttons", tak¾e tlaèítka mají nyní
	ikonky.  Tlaèítko "Ok" se teï sice jmenuje "Budi¾", co¾ nelze
	zmìnit, proto¾e to je vlastnost GTK, ale snad to u¾ivatelùm vadit
	nebude.  Ikonky se jim urèitì líbit budou.

	V pytis.form nyní pøibyl nový modul `configui', který realizuje
	u¾ivatelské rozhraní pro nastavování konfiguraèních voleb.
	Konfiguraèní formuláøe jsou tak nyní souèástí pytis a nemysí být
	slo¾itì znova a znova implementovány v ka¾dé aplikaci.  Zejména
	nemusí být pro ka¾dou konfiguraèní volbu vytváøen sloupeèek v
	databázi, co¾ umo¾ní snadné pøidávání nových voleb do formuláøù.

	Pou¾ití konfiguraèních formuláøù je snadné.  Staèí pøi vytváøení
	menu aplikace pou¾ít funkci `config_menu_items()', která
	automaticky do menu doplní polo¾ky pro v¹echny dostupné
	konfiguraèní formuláøe.
	
2005-12-20  Tomas Cerha  <cerha@brailcom.org>

        Tabulkové formuláøe si nyní ukládají nastavení sloupcù do
	konfigurace, tak¾e pokud si u¾ivatel pøeskupí, skryje èi zobrazí
	sloupce oproti specifikaci, budou tyto zmìny zapamatovány.  Také
	¹íøky sloupcù jsou ukládány.  Není zatím øe¹ena napø. situace, kdy
	ve specifikaci aplikace pøibydou nové sloupce, nebo bylo zmìnìno
	jejich výchozí poøadí, èi názvy.  Pokud si u¾ivatel sloupce ji¾
	upravil, o zmìnì se nyní nedozví, pouze sloupce, které ji¾ ne
	specifikaci neexistují nebudou zobrazeny.  Tuto situaci bude tøeba
	je¹tì o¹etøit.

	Byl také implementován mechanismus ukládání konfiguraèních voleb
	pøi ukonèení aplikace a jejich obnovení pøi dal¹ím spu¹tìní, tak¾e
	napø. zmìny sloucù, ale i zmìny libovolných jiných konfiguraèních
	voleb jsou perzistentní.  Výchozí metodou ukládání konfigurace je
	konfiguraèní soubor v domovském adresáøi u¾ivatele (na platformì
	UNIX - na jiných platformáých by tomu bylo jinak, napø. Windows
	Registry).  Ve specifikaci aplikace ('application.py') v¹ak lze
	metodu ukládání pøedefinovat libovolnou vlastní metodou (více viz
	dokumnetace tøídy pytis.form.Application).  Navíc v
	pytis-extensions byly definovány nové funkce umo¾òující ukládání
	konfigurace v zapicklované podobì do stringového sloupeèku v
	databázi.
	
        V pytis-extensions je nyní nová tøída DBConfig, nahrazující
	døívìj¹í ConfigDB.  Není s pùvodní tøídou zcela kompatibilní,
	proto nový název.  Stará tøída by ji¾ nemìla být vyu¾ívána a bude
	èasem zru¹ena.  Kromì jednodu¹¹ích arguemntù konstruktoru nová
	tøída opravuje nekonzistenci rozhraní, kdy nastavení hodnoty
	slovníku oèakávalo instanci Value, ale získání hodnoty vracelo
	Pythonovou hodnotu.  Nyní se v¹ude pracuje pouze s Pythonovými
	hodnotami.  K získání instance Value je navíc mo¾né vyu¾ít novou
	metodu `value()'.  Kromì toho tøída ke¹uje datové objekty, tak¾e
	je nyní vnitøne vyu¾ívána i funkcí `cfg_param', její¾ rozhraní se
	v¹ak nijak nezmìnilo.

	* BUGFIX: Opraveno ¹patné chování metody `Configuration.changed()'
	pøi práci s mutable objekty.  Inicializaèní hodnota je nyní
	kopírována, tak¾e dojde ke správné detekci zmìny.
	
	* BUGFIX: Záhlaví sloupcù nech» zobrazují `column_label', nikoli
	plný název sloupce.

2005-12-19  Tomas Cerha  <cerha@brailcom.org>

        Ka¾dá konfiguraèní volba nyní udr¾uje informaci o své pùvodní
	hodnotì a umo¾òuje tak zjistit, zda za bìhu aplikace do¹lo ke
	zmìnì této hodnoty u¾ivatelem.  Tím bude mo¾né zmìnìné volby pøed
	ukonèením aplikace ulo¾it a pøi pøí¹tím startu opìt obnovit.
	
	* BUGFIX: begin_search
	
2005-12-16  Tomas Cerha  <cerha@brailcom.org>

        Vìt¹ina vlastností konfiguraèních voleb (v modulu
	`configuration.py') je nyní definována pomocí konstant.  Není tak
	nutno pøedefinovávat celé metody a definice je tak pøehlednìj¹í a
	snáze udr¾ovatelná.

	* BUGFIX: Opravena vèerej¹í chybka, která mìla za následek ¾e
	stiskem Enter na tlaèítku dialogu nebyl vyvolán stisk tlaèítka,
	tak¾e dialog ne¹el tímto zpùsobem odeslat.

2005-12-15  Tomas Cerha  <cerha@brailcom.org>

	Dialog lze nyní odeslat klávesou Ctrl-Enter.  Tímto zpùsobem je
	dialog odeslán stejnì, jako by bylo stisknuto potvrzovací
	tlaèítko.  Toto potvrzovací tlaèítko mají definováno jen dialogy,
	u kterých to má smysl (napø. vyhledávací/filtrovací).
	
	* BUGFIX: Pøidání sloupce nyní funguje i pokud je zobrazen pouze
	jeden sloupec.
	
2005-12-14  Tomas Cerha  <cerha@brailcom.org>

	Byly implementovány funkce umo¾òující u¾ivateli interaktivnì mìnit
	poøadí sloupcù, skrývat vybrané sloupce a zobrazovat sloupce,
	které jsou implicitnì skryté.  V kontextovém menu záhlaví sloupce
	je polo¾ka pro skrytí aktuálního sloupce a podmenu, ve kerém jsou
	vidìt v¹echny dostupné sloupce a jejich aktuální stav.  Výbìrem
	polo¾ky je tak mo¾né libovolný sloupec skrýt nebo zobrazit.

	Zmìnu poøadí sloupcù lze nyní jednodu¹e mìnit pøetahováním záhlaví
	sloupce my¹í.
	
	* BUGFIX: O¹etøen pøípad, kdy v hlavním formuláøi dualformu není
	vybrán ¾ádný øádek.  Pøedchozí oprava toti¾ mìla mouchy...

2005-12-12  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Funkce `refresh()' nyní pracuje správnì s aktivním
	formuláøem, ne s posledním, jak tomu bylo dosud, tak¾e teï u¾ by
	se mìl refresh skuteènì projevit ve v¹ech pøípadech.

2005-12-09  Tomas Cerha  <cerha@brailcom.org>

	Nová tøída `CheckItem' umo¾òuje definovat polo¾ku menu, které se v
	konstruktoru pøedá funkce `state', která za bìhu zjistí stav
	polo¾ky.

	Menu oken pøepsáno s pou¾itím této nové vlastnosti, kterou dìdí i
	`RadioItem'.
	
	* BUGFIX: Spojovací operátory ("a zároveò" / "a nebo") by ji¾ mìly
	bát správnì pøi vytváøení podmínky pomocí "Filtrovat podle buòky".
	
	* BUGFIX: O¹etøen pøípad, kdy v hlavním formuláøi dualformu není
	vybrán ¾ádný øádek.  To se nìkdy stávalo po úpravì dat horního
	formuláøe a zpùsobovalo to traceback.

	* BUGFIX: V rámci kódu pøepoèítávací funkce cmputeru je nyní
	mo¾né zjistit pùvodní hodnotu sebe sama bez rizika rekurze.  Tím
	je mo¾né napø. za urèitých podmínek ponechat hodnotu políèka
	nezmìnìnou (vrátit pøedchozí hodnotu).
	
	* BUGFIX: Pøi zmìnì ¹írky sloupce z klávesnice se nyní aktualizují
	i scrollbary.
	
	* BUGFIX: "Filtrovat podle buòky" se ji¾ nehroutí na virtuálním
	sloupci.  Zobrazí se jen zpráva, ¾e to nelze.
	
2005-12-07  Tomas Cerha  <cerha@brailcom.org>

	Specifikace èíselníku se nyní naèítá a¾ v konstruktoru formuláøe.
	V dùsledku se napø. pøi pou¾ití `run_cb()' (pytis-extensions)
	automaticky pou¾ijí sloupce definované v `cb_spec()'

        Klávesové zkratky 'Alt-Right' a 'Alt-Left' (levá a pravá ¹ipka)
	nyní umo¾òují interaktivnì mìnit ¹íøku aktuálního sloupce.
	
        Funkce `run_procedure()' a `user_cmd()' (pytis-extensions) nyní
	pøijímají argument `block_refresh_' a pokud je pravdivý, tak
	obalují proceduru, resp. handler pøíkazu funkcí `block_refresh()',
	tak¾e po dobu jejich provádìní se neprovádí ¾ádné refreshe.  Pokud
	je to tøeba, je nutno pøípadný refresh nakonec zavolat ruènì.
	
	* BUGFIX: Øazení klikáním na záhlaví sloupce ji¾ funguje i na
	primárnì øazeném sloupci.

	* BUGFIX: Opraveny nefunkèní agregaèní funkce ve vedlej¹ím
	formuláøi dualformu.  Døíve docházelo k tomu, ¾e filtraèní dialog
	(ve kterém se agregaèní funkce poèítají) byl inicializován pouze
	pøi prvním spu¹tìní aktuální datovou podmínkou platnou pro aktivní
	øádek hlavního formuláøe.  Pøi pøechodu na jiný øádek se data
	dolního formuláøe zmìnila, ale agregaèní funkce pracovaly poøád se
	stejnými daty.
	
2005-12-06  Tomas Cerha  <cerha@brailcom.org>

	Èíselníkové políèko typu ListField nyní umo¾òuje nezávislý pohyb
	kurzoru a výbìr.  Døíve výbìr v¾dy následoval kurzor, co¾
	znemo¾òovalo napøíklad scrollovat hodnoty pomocí klávesnice.

	Blokování refreshe nyní funguje i pøi jeho vnoøeném pou¾ití a je
	mo¾né pøedat argumenty volané funkce.  Byly také odstranìny
	nìkteré døívìj¹í hacky, které øe¹ily blockování refreshe po svém.
	
	* BUGFIX: O¹etøena ztráta focusu pøi uzavøení filtrovacího diaogu
	nad duálním formuláøem, kvùli které pøestávalo fungovat
	zobrazování aktivního øádku ve stavové øádce.

	* BUGFIX: Focus je nyní pøi otevøení duálního formuláøe nahoøe.
	
2005-12-05  Tomas Cerha  <cerha@brailcom.org>

	Nová funkce `block_refresh' umo¾òuje zablokovat refresh po dobu
	vykonávání bloku kódu.  To je vhodné zejména pøi definici procedur
	v defsech, kde automatické refreshe èasto zdr¾ují a pøitom postaèí
	jeden refresh a¾ na konci série operací.

	* BUGFIX: Opravena drobná chybka znemo¾òující tisk pomocí
	klávesové zkratky.

	* BUGFIX: Opraveno havarování pøi zobrazení více dialogù.
	
	* BUGFIX: Filtrovací dialog si nyní opìt správnì zapamatuje
	podmínku.

	* BUGFIX: Nastavování velikostí prvkù filtrovacích dialogù
	upraveno pro nové verze wx.

2005-12-01  Tomas Cerha  <cerha@brailcom.org>

	Tiskové menu se nyní nevytváøí v menubaru aplikace, ale ka¾dý
	formuláø má tlaèítko, kterým lze menu vyvolat.  Je tím vyøe¹en
	problém tiskového menu v duálním formuláøi.

2005-11-29  Tomas Cerha  <cerha@brailcom.org>

	Dialogy nyní pou¾ívají systémové ikony, tak¾e jednak není nutné
	distribuovat ikony spoleènì s Pytisem (a nastavovat cesty atd.) a
	jednak ikony odpovídají zvolenému systémovému tématu (jsou
	vìt¹inou mnohem hezèí, ne¾ ty, které jsme mìli).

	* BUGFIX: Opraven nefunkèní `OperationDialog'.

	* BUGFIX: Nastavení výchozího tlaèítka dialogu by ji¾ mìlo
	fungovat.
	
	* BUGFIX: Klávesy v dialozích by se ji¾ mìly chovat pøirozenìji.
	
	* BUGFIX: Editable.ONCE nyní funguje správnì i v inline editaci.
	
2005-11-29  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Kalendáøový dialog by ji¾ mìl správnì reagovat ve v¹ech
	verzích wxWidgets.
	
	* BUGFIX: O¹etøeny výjimky resloveru pøi zji¹»ování výchozího
	tøídìní èíselníku.

2005-11-28  Tomas Cerha  <cerha@brailcom.org>

	Nová konfiguraèní volba `dbport' (a argument pøíkazové øádky)
	umo¾òuje nastavit port databázového spojení.  `dbhost' nyní
	funguje i jako argument pøíkazové øádky.
 	
	ListField nyní reaguje na koleèko my¹i.

	* BUGFIX: Pøi vyvolání prázdného èíselníku nezobrazuj chybovou
	hlá¹ku "Záznam nenalezen".

	* BUGFIX: Needitovatelný ListField lze nyní scrollovat (my¹í).

	* BUGFIX: Focus ji¾ v duálním formuláøi nepøeskakuje pøi pøechodu
	na záznam, ke kterému v dolním formuláøi nejsou ¾ádné polo¾ky.
	Tato chyba byla pravdìpodobnì odstranìna nìkterou pøedchozí
	úpravou.  Dnes bylo správné chování pouze zji¹tìno.

	* BUGFIX: Vyvolání èíselníku v inline editaci.
	
2005-11-25  Tomas Cerha  <cerha@brailcom.org>

	Odstranìn doèasný hack v PresentedRow._init_row.genval()
	umo¾òující pou¾ití computeru namísto funkce `default'.  Nyní je
	tedy nutné ve specifikacích v¾dy rozli¹ovat.  Default je pro
	výpoèet hodnoty pøi inicializaci nového záznamu, computer pro
	prùbì¾né dopoèítávání a výpoèet hodnot virtuálních políèek.

	* BUGFIX: Vyøe¹en problém sdílení Enumerátorù projevující se
	výrazným zpomalením pøi pou¾ití ListField v DescriptiveDualFormu.
	
2005-11-24  Tomas Cerha  <cerha@brailcom.org>

	Argument 'sorting' v CodebookSpec se nyní skuteènì projeví pøi
	zobrazení èíselníku.
      	
	* BUGFIX: V DescriptiveDualForm byl pøi výbìru pøedáván do
	vedlej¹ího formuláøe celý PresentedRow, tak¾e nedocházelo správnì
	k aktualizaci RuntimeFilterù a dal¹ích závislostí.  Opraveno
	nastavováním pouze pøes datový øádek.

	* BUGFIX: Vèerej¹í bugfix zpùsobil problémy s computery pøi
	inicializaci prázdného PresentedRow v EditFormu.  Dne¹ní oprava v
	DescriptiveDualFormu v¹ak øe¹í i problém s neinicializovanými
	filtry, tak¾e vèerej¹í úprava mohla být zase zru¹ena.

	* BUGFIX: ListField nyní zachovává nastavenou hodnotu i po
	pøenaètení dat (zmìna runtime-filteru).

2005-11-23  Tomas Cerha  <cerha@brailcom.org>

        V CodebookSpec lze nyní pøedefinovat také tøídìní argumentem
	'sorting'.  Zatím se to nikde neprojeví, ale lze toho ji¾ vyu¾ívat
	ve specifikacích a brzo se snad dostaneme i k implementaci.  Sní¾í
	se tak poèet potøebných variant v defsech.

	V pytis-extensions pøibyla nová funkce enum(), umo¾òující
	jednodu¹e vytvoøit DataEnumerator pro arguemnt 'enumerator'
	datového typu.

	* BUGFIX: V ListField jsou nyní správnì zobrazovány i víceøádkové
	polo¾ky.

	* BUGFIX: Odstranìn problém s "Insufficient runtime filter"
	zpùsobený neinicializovanými filtry ve formuláøích, které
	nevytváøely PresentedRow v konstruktoru.

	* BUGFIX: Opraveno chování specifikátoru 'default'.  Nyní je
	funkce volána pouze pøi vytváøení nového øádku.

2005-11-22  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: None nech» je platným argumentem 'select_row()'.

	* BUGFIX: Vnoøené volání hookù pøi zmìnì runtime filteru
	enumerátoru.

	* BUGFIX: PresentedRow nyní správnì øe¹í ve¹keré závislosti a
	pøepoèítávání i pro virtuální políèka.
	
2005-11-21  Tomas Cerha  <cerha@brailcom.org>

	Nový typ èíselníkového políèka urèený pomocí `SelectionType.LIST'.
	Toto políèko nahrazuje pùvodní seznamové políèko urèené pomocí
	'RefSpec' a argumentu 'references'.  Argument 'references' je nyní
	nefunkèní a jeho pou¾ití je pouze logováno.  Bude tøeba ho v¹ude
	odstranit a nahradit èíselníkem s vý¹e zmínìným 'selection_type'.
	Tato nová implementace umo¾òuje daleko sna¾¹í práci se seznamem,
	mo¾nost pøímého získání vybrané hodnoty (napø. v computerech),
	získání hodnoty libovolného sloupce vybraného øádku a dal¹í
	mo¾nosti *sdandardnì* podporované èíselníkovými políèky.
	Odstraòuje také nìkolik velice nepøíjemných hackù, které byly
	nutné kvùli døívìj¹í implementaci a pomìrnì neprùhledné a zcela
	nestandardní chování.  Kromì nového typu 'selection_type' nejsou
	na stranì specifikace nyní pou¾ity ¾ádné speciality.  K filtrování
	záznamù v seznamu podle aktuálních dat formuláøe je mo¾né pou¾ít
	'codebook_runtime_filter'.  V¹e je tak plnì v souladu se za¾itou
	koncepcí systému.

	Zprùhlednìní zpracování arguemntu 'selection_type' ve 'FieldSpec'
	a pøiøazení výchozích hodnot.  Pøidány asserty upozoròující na
	nesprávnou kombinaci 'selection_type' a 'codebook' ve specifikaci.

2005-11-18  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Opraveno nefunkèní nastavení editovatelnosti políèek.

	* BUGFIX: Nezobrazuj chybový dialog, kdy¾ nelze nalézt pùvodní
	záznam po vyvolání funkce kontextového menu v BrowseFromu.

	* BUGFIX: Displej se nyní nezobrazí, pokud má nastavenu nulovou
	¹íøku.

2005-11-16  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Chybné skládání klávesových zkratek a následé padání pøi
	zobrazení popup-menu.

2005-11-15  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Nechtìné nalíznutí sekvencí pøi otevírání formuláøù
	odvozených z EditForm (nadbyteèná inicializace prázdného záznamu).
   
2005-11-09  Tomas Cerha  <cerha@brailcom.org>

	* BUGFIX: Nekorektní chování metody `Data.search()' v tabulce s
	NULL hodnotami ve sloupci, podle kterého je tøídìno.
